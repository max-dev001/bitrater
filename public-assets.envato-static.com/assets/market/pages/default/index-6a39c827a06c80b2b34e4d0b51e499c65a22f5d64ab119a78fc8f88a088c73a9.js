function objectWithPrototype(e,t){function i(){}i.prototype=e;const n=new i;if(n.prototype=e,void 0!==t)for(const e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}Market.GoogleAnalytics.CollectionPage=class{static init(){return this._instance||(this._instance=new this)}constructor(){$(document).on({"googleAnalytics:addCollectionToCart":this.handleAddAllToCart.bind(this)})}handleAddAllToCart(e,t){try{this._set("dimension9","add to cart"),this._addProducts(t.payload),this._setAction("add"),this._send("Add to cart: collection page")}catch(t){console.warn(`Could not fetch payload for '${e.type}'. Add Collection To Cart event not sent.`)}}_addProducts(e){Market.Helpers.GoogleAnalytics.addProducts(e)}_setAction(e,t){Market.Helpers.GoogleAnalytics.setAction(e,t)}_set(e,t){Market.Helpers.GoogleAnalytics.set(e,t)}_send(e,t){Market.Helpers.GoogleAnalytics.sendEvent("event","Ecommerce","click",{label:e,nonInteraction:!!t})}},Views.AddAllToCart=class{constructor(e){this.$el=e,this.googleAnalyticsPayload=this.$el.data("googleAnalyticsPayload"),Market.GoogleAnalytics.CollectionPage.init(),this.$el.on("submit",this.handleAddAllToCart.bind(this))}handleAddAllToCart(e){$(document).trigger("googleAnalytics:addCollectionToCart",{payload:this.googleAnalyticsPayload})}},Market.Helpers.FormEscaping={escapeInHiddenCopyAndDisable(e,t,i){const n=$("<input>").attr({type:"hidden",name:i,value:this.escapeForSecurityFilters(t.val()),class:this.escapedValueFieldClass});e.append(n),t.prop("disabled",!0)},cleanup(e,t){t.prop("disabled",!1);e.find("."+this.escapedValueFieldClass).remove()},onCompleteCleanup(e){return t=>{const i=$(t.target),n=i.find(e);this.cleanup(i,n)}},escapeForSecurityFilters:e=>btoa(encodeURIComponent(e)),escapedValueFieldClass:"js-comment-escaped-value-field"},Views.AddCommentForm=class{constructor(e){this.$form=e,this.$form.on("submit",(()=>{const e=this.$form.find("#comment_form_content");Market.Helpers.FormEscaping.escapeInHiddenCopyAndDisable(this.$form,e,"base64_content")}))}},Market.Helpers._warningOnLeaveAlready=!1,Market.Helpers.warnOnLeave=function(){if(Market.Helpers._warningOnLeaveAlready)return;Market.Helpers._warningOnLeaveAlready=!0;const e=["PUT","POST","DELETE"];$.activeTransforms=0,$(document).ajaxSend((function(t,i,n){e.includes(n.type)&&($.activeTransforms+=1)})),$(document).ajaxComplete((function(t,i,n){e.includes(n.type)&&($.activeTransforms-=1)})),window.onbeforeunload||(window.onbeforeunload=function(){if($.activeTransforms)return"We're still saving your changes. If you leave this page now your changes may not be saved."})},Views.AjaxDelete=class{constructor(e){e.on("ajax:before",(()=>e.addClass("is-hidden"))),e.on("ajax:error",(()=>e.removeClass("is-hidden"))),e.on("ajax:success",(function(t,i){"ok"!==i.status&&e.removeClass("is-hidden")})),Market.Helpers.warnOnLeave()}},function(e,t,i){function n(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(e,i,s,r,o,l){var c,d,u=t.createElement("script");for(d in r=r||h.errorTimeout,u.src=e,s)u.setAttribute(d,s[d]);i=l?a:i||y,u.onreadystatechange=u.onload=function(){!c&&n(u.readyState)&&(c=1,i(),u.onload=u.onreadystatechange=null)},p((function(){c||(c=1,i(1))}),r),M(),o?u.onload():f.parentNode.insertBefore(u,f)}function r(e,i,n,s,r,o){var l,c=t.createElement("link");for(l in s=s||h.errorTimeout,i=o?a:i||y,c.href=e,c.rel="stylesheet",c.type="text/css",n)c.setAttribute(l,n[l]);r||(M(),f.parentNode.insertBefore(c,f),p(i,0))}function a(){var e=g.shift();v=1,e?e.t?p((function(){("c"==e.t?h.injectCss:h.injectJs)(e.s,0,e.a,e.x,e.e,1)}),0):(e(),a()):v=0}function o(e,i,s,r,o,l,c){function d(t){if(!m&&n(u.readyState)&&(b.r=m=1,!v&&a(),t)){for(var s in"img"!=e&&p((function(){$.removeChild(u)}),50),D[i])D[i].hasOwnProperty(s)&&D[i][s].onload();u.onload=u.onreadystatechange=null}}c=c||h.errorTimeout;var u=t.createElement(e),m=0,y=0,b={t:s,s:i,e:o,a:l,x:c};1===D[i]&&(y=1,D[i]=[]),"object"==e?(u.data=i,u.setAttribute("type","text/css")):(u.src=i,u.type=e),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){d.call(this,y)},g.splice(r,0,b),"img"!=e&&(y||2===D[i]?(M(),$.insertBefore(u,_?null:f),p(d,c)):D[i].push(u))}function l(e,t,i,n,s){return v=0,t=t||"j",T(e)?o("c"==t?S:x,e,t,this.i++,i,n,s):(g.splice(this.i++,0,e),1==g.length&&a()),this}function c(){var e=h;return e.loader={load:l,i:0},e}var d,h,u=t.documentElement,p=e.setTimeout,f=t.getElementsByTagName("script")[0],m={}.toString,g=[],v=0,y=function(){},b="MozAppearance"in u.style,_=b&&!!t.createRange().compareNode,$=_?u:f.parentNode,k=e.opera&&"[object Opera]"==m.call(e.opera),w=!!t.attachEvent&&!k,C="webkitAppearance"in u.style&&!("async"in t.createElement("script")),x=b?"object":w||C?"script":"img",S=w?"script":C?"img":x,A=Array.isArray||function(e){return"[object Array]"==m.call(e)},P=function(e){return Object(e)===e},T=function(e){return"string"==typeof e},E=function(e){return"[object Function]"==m.call(e)},M=function(){f&&f.parentNode||(f=t.getElementsByTagName("script")[0])},I=[],D={},j={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};h=function(e){function t(e){var t,i,n,s=e.split("!"),r=I.length,a=s.pop(),o=s.length,l={url:a,origUrl:a,prefixes:s};for(i=0;i<o;i++)n=s[i].split("="),(t=j[n.shift()])&&(l=t(l,n));for(i=0;i<r;i++)l=I[i](l);return l}function n(e){var t=e.split("?")[0];return t.substr(t.lastIndexOf(".")+1)}function s(e,s,r,a,o){var l=t(e),d=l.autoCallback;n(l.url);if(!l.bypass){if(s&&(s=E(s)?s:s[e]||s[a]||s[e.split("/").pop().split("?")[0]]),l.instead)return l.instead(e,s,r,a,o);D[l.url]&&!0!==l.reexecute?l.noexec=!0:D[l.url]=1,e&&r.load(l.url,l.forceCSS||!l.forceJS&&"css"==n(l.url)?"c":i,l.noexec,l.attrs,l.timeout),(E(s)||E(d))&&r.load((function(){c(),s&&s(l.origUrl,o,a),d&&d(l.origUrl,o,a),D[l.url]=2}))}}function r(e,t){function i(e,i){if(""===e||e){if(T(e))i||(c=function(){var e=[].slice.call(arguments);d.apply(this,e),h()}),s(e,c,t,0,a);else if(P(e))for(r in n=function(){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(),e)e.hasOwnProperty(r)&&(i||--n||(E(c)?c=function(){var e=[].slice.call(arguments);d.apply(this,e),h()}:c[r]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),h()}}(d[r])),s(e[r],c,t,r,a))}else!i&&h()}var n,r,a=!!e.test,o=a?e.yep:e.nope,l=e.load||e.both,c=e.callback||y,d=c,h=e.complete||y;i(o,!!l||!!e.complete),l&&i(l),!l&&e.complete&&i("")}var a,o,l=this.yepnope.loader;if(T(e))s(e,0,l,0);else if(A(e))for(a=0;a<e.length;a++)o=e[a],T(o)?s(o,0,l,0):A(o)?h(o):P(o)&&r(o,l);else P(e)&&r(e,l)},h.addPrefix=function(e,t){j[e]=t},h.addFilter=function(e){I.push(e)},h.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",d=function(){t.removeEventListener("DOMContentLoaded",d,0),t.readyState="complete"},0)),e.yepnope=c(),e.yepnope.executeStack=a,e.yepnope.injectJs=s,e.yepnope.injectCss=r}(this,document),Views.AnalyticsData=class{constructor(e){window.Analytics={},yepnope({test:Modernizr.xhr2,yep:e.data("scriptUrl"),complete:()=>new Views.AnalyticsData(e)})}},Views.AnalyticsReports=class{constructor(e){this.dom={reportLinks:e.find(".analytics-report-link")},this.authorId=e.data("authorId"),this.dom.reportLinks.on("click",this.handleLinkClick.bind(this))}handleLinkClick(e){$.ajax({type:"GET",data:{author_id:this.authorId,report_type:$(e.target).data("reportType"),date:$(e.target).data("reportStartDate")},url:"/user/analytics_reports/download_report",success:function(e){window.location.href=e.signedReportUrl},error:function(e){null==e.responseJSON?alert("The report could not be retrieved right now, please try again later."):alert(e.responseJSON.message)}})}},Views.Announcement=class{constructor(e){e.on("ajax:before",(()=>e.addClass("is-hidden")))}},Market.DOMUtils._pageResponsive=null,Market.DOMUtils.isPageResponsive=function(){return null!==Market.DOMUtils._pageResponsive?Market.DOMUtils._pageResponsive:Market.DOMUtils._pageResponsive=!!$("body").data("responsive")},function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e,i){this.expander=e,this.handleClick=t(this.handleClick,this),this.options=$.extend({},this.defaults,i),this.$toggle=$(this.expander),this.$target=null!=this.options.target?this.$toggle.find(this.options.target):$(this.$toggle.data("target")),this.$toggle.on("click",this.handleClick)}return e.prototype.defaults={toggleClass:"is-active",targetClass:"is-hidden"},e.prototype.handleClick=function(e){return e.preventDefault(),this.$toggle.toggleClass(this.options.toggleClass),this.$target.toggleClass(this.options.targetClass)},e}(),$.fn.expander=function(t){return this.each((function(){var i,n;if(void 0===(i=$(this)).data("plugin_expander"))return n=new e(this,t),i.data("plugin_expander",n)}))}}.call(this),Market.DOMUtils.setupResponsiveness=function(){Market.DOMUtils.isPageResponsive()&&$(".js-footer-expand-toggle").expander({toggleClass:"footer-box__header--is-active",targetClass:"footer-box__content--is-active"})};var swfobject=function(){function e(){if(!U){try{var e=L.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(e){return}U=!0;for(var t=B.length,i=0;i<t;i++)B[i]()}}function t(e){U?e():B[B.length]=e}function i(e){if(typeof F.addEventListener!=P)F.addEventListener("load",e,!1);else if(typeof L.addEventListener!=P)L.addEventListener("load",e,!1);else if(typeof F.attachEvent!=P)v(F,"onload",e);else if("function"==typeof F.onload){var t=F.onload;F.onload=function(){t(),e()}}else F.onload=e}function n(){R?s():r()}function s(){var e=L.getElementsByTagName("body")[0],t=g(T);t.setAttribute("type",I);var i=e.appendChild(t);if(i){var n=0;!function(){if(typeof i.GetVariable!=P){var s=i.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),z.pv=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}else if(n<10)return n++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,r()}()}else r()}function r(){var e=N.length;if(e>0)for(var t=0;t<e;t++){var i=N[t].id,n=N[t].callbackFn,s={success:!1,id:i};if(z.pv[0]>0){var r=m(i);if(r)if(!y(N[t].swfVersion)||z.wk&&z.wk<312)if(N[t].expressInstall&&o()){var d={};d.data=N[t].expressInstall,d.width=r.getAttribute("width")||"0",d.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(d.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(d.align=r.getAttribute("align"));for(var h={},u=r.getElementsByTagName("param"),p=u.length,f=0;f<p;f++)"movie"!=u[f].getAttribute("name").toLowerCase()&&(h[u[f].getAttribute("name")]=u[f].getAttribute("value"));l(d,h,i,n)}else c(r),n&&n(s);else _(i,!0),n&&(s.success=!0,s.ref=a(i),n(s))}else if(_(i,!0),n){var g=a(i);g&&typeof g.SetVariable!=P&&(s.success=!0,s.ref=g),n(s)}}}function a(e){var t=null,i=m(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=P)t=i;else{var n=i.getElementsByTagName(T)[0];n&&(t=n)}return t}function o(){return!q&&y("6.0.65")&&(z.win||z.mac)&&!(z.wk&&z.wk<312)}function l(e,t,i,n){q=!0,C=n||null,x={success:!1,id:i};var s=m(i);if(s){"OBJECT"==s.nodeName?(k=d(s),w=null):(k=s,w=i),e.id=D,(typeof e.width==P||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==P||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),L.title=L.title.slice(0,47)+" - Flash Player Installation";var r=z.ie&&z.win?"ActiveX":"PlugIn",a="MMredirectURL="+F.location.toString().replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+L.title;if(typeof t.flashvars!=P?t.flashvars+="&"+a:t.flashvars=a,z.ie&&z.win&&4!=s.readyState){var o=g("div");i+="SWFObjectNew",o.setAttribute("id",i),s.parentNode.insertBefore(o,s),s.style.display="none",function(){4==s.readyState?s.parentNode.removeChild(s):setTimeout(arguments.callee,10)}()}h(e,t,i)}}function c(e){if(z.ie&&z.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=g("div");if(z.win&&z.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(T)[0];if(i){var n=i.childNodes;if(n)for(var s=n.length,r=0;r<s;r++)1==n[r].nodeType&&"PARAM"==n[r].nodeName||8==n[r].nodeType||t.appendChild(n[r].cloneNode(!0))}}return t}function h(e,t,i){var n,s=m(i);if(z.wk&&z.wk<312)return n;if(s)if(typeof e.id==P&&(e.id=i),z.ie&&z.win){var r="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?r+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(r+=" "+a+'="'+e[a]+'"'));var o="";for(var l in t)t[l]!=Object.prototype[l]&&(o+='<param name="'+l+'" value="'+t[l]+'" />');s.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+o+"</object>",V[V.length]=e.id,n=m(e.id)}else{var c=g(T);for(var d in c.setAttribute("type",I),e)e[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?c.setAttribute("class",e[d]):"classid"!=d.toLowerCase()&&c.setAttribute(d,e[d]));for(var h in t)t[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&u(c,h,t[h]);s.parentNode.replaceChild(c,s),n=c}return n}function u(e,t,i){var n=g("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function p(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(z.ie&&z.win?(t.style.display="none",function(){4==t.readyState?f(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function f(e){var t=m(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=L.getElementById(e)}catch(e){}return t}function g(e){return L.createElement(e)}function v(e,t,i){e.attachEvent(t,i),H[H.length]=[e,t,i]}function y(e){var t=z.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function b(e,t,i,n){if(!z.ie||!z.mac){var s=L.getElementsByTagName("head")[0];if(s){var r=i&&"string"==typeof i?i:"screen";if(n&&(S=null,A=null),!S||A!=r){var a=g("style");a.setAttribute("type","text/css"),a.setAttribute("media",r),S=s.appendChild(a),z.ie&&z.win&&typeof L.styleSheets!=P&&L.styleSheets.length>0&&(S=L.styleSheets[L.styleSheets.length-1]),A=r}z.ie&&z.win?S&&typeof S.addRule==T&&S.addRule(e,t):S&&typeof L.createTextNode!=P&&S.appendChild(L.createTextNode(e+" {"+t+"}"))}}}function _(e,t){if(G){var i=t?"visible":"hidden";U&&m(e)?m(e).style.visibility=i:b("#"+e,"visibility:"+i)}}function $(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=P?encodeURIComponent(e):e}var k,w,C,x,S,A,P="undefined",T="object",E="Shockwave Flash",M="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",D="SWFObjectExprInst",j="onreadystatechange",F=window,L=document,O=navigator,R=!1,B=[n],N=[],V=[],H=[],U=!1,q=!1,G=!0,z=function(){var e=typeof L.getElementById!=P&&typeof L.getElementsByTagName!=P&&typeof L.createElement!=P,t=O.userAgent.toLowerCase(),i=O.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),s=i?/mac/.test(i):/mac/.test(t),r=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a=!1,o=[0,0,0],l=null;if(typeof O.plugins!=P&&typeof O.plugins[E]==T)!(l=O.plugins[E].description)||typeof O.mimeTypes!=P&&O.mimeTypes[I]&&!O.mimeTypes[I].enabledPlugin||(R=!0,a=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),o[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),o[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof F.ActiveXObject!=P)try{var c=new ActiveXObject(M);c&&(l=c.GetVariable("$version"))&&(a=!0,l=l.split(" ")[1].split(","),o=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)])}catch(e){}return{w3:e,pv:o,wk:r,ie:a,win:n,mac:s}}();z.w3&&((typeof L.readyState!=P&&"complete"==L.readyState||typeof L.readyState==P&&(L.getElementsByTagName("body")[0]||L.body))&&e(),U||(typeof L.addEventListener!=P&&L.addEventListener("DOMContentLoaded",e,!1),z.ie&&z.win&&(L.attachEvent(j,(function(){"complete"==L.readyState&&(L.detachEvent(j,arguments.callee),e())})),F==top&&function(){if(!U){try{L.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),z.wk&&function(){U||(/loaded|complete/.test(L.readyState)?e():setTimeout(arguments.callee,0))}(),i(e))),z.ie&&z.win&&window.attachEvent("onunload",(function(){for(var e=H.length,t=0;t<e;t++)H[t][0].detachEvent(H[t][1],H[t][2]);for(var i=V.length,n=0;n<i;n++)p(V[n]);for(var s in z)z[s]=null;for(var r in z=null,swfobject)swfobject[r]=null;swfobject=null}));return{registerObject:function(e,t,i,n){if(z.w3&&e&&t){var s={};s.id=e,s.swfVersion=t,s.expressInstall=i,s.callbackFn=n,N[N.length]=s,_(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){if(z.w3)return a(e)},embedSWF:function(e,i,n,s,r,a,c,d,u,p){var f={success:!1,id:i};z.w3&&!(z.wk&&z.wk<312)&&e&&i&&n&&s&&r?(_(i,!1),t((function(){n+="",s+="";var t={};if(u&&typeof u===T)for(var m in u)t[m]=u[m];t.data=e,t.width=n,t.height=s;var g={};if(d&&typeof d===T)for(var v in d)g[v]=d[v];if(c&&typeof c===T)for(var b in c)typeof g.flashvars!=P?g.flashvars+="&"+b+"="+c[b]:g.flashvars=b+"="+c[b];if(y(r)){var $=h(t,g,i);t.id==i&&_(i,!0),f.success=!0,f.ref=$}else{if(a&&o())return t.data=a,void l(t,g,i,p);_(i,!0)}p&&p(f)}))):p&&p(f)},switchOffAutoHideShow:function(){G=!1},ua:z,getFlashPlayerVersion:function(){return{major:z.pv[0],minor:z.pv[1],release:z.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(e,t,i){return z.w3?h(e,t,i):void 0},showExpressInstall:function(e,t,i,n){z.w3&&o()&&l(e,t,i,n)},removeSWF:function(e){z.w3&&p(e)},createCSS:function(e,t,i,n){z.w3&&b(e,t,i,n)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=L.location.search||L.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return $(t);for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return $(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(q){var e=m(D);e&&k&&(e.parentNode.replaceChild(k,e),w&&(_(w,!0),z.ie&&z.win&&(k.style.display="block")),C&&C(x)),q=!1}}}}();(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Market.DOMUtils.MiniFlashAudioPlayer=function(){function t(){this.handleClick=e(this.handleClick,this),this.$container=$("#content"),this.audioPlayer=".js-audio-player",this.flashPlayerSwf="/flash/small_aj_preview.swf",this.flashPlayerId="temp-audio-player",this.$container.on("click",this.audioPlayer,this.handleClick)}return t.prototype.handleClick=function(e){return e.preventDefault(),this.addPlayer(e.currentTarget)},t.prototype.getMp3Url=function(e){return this.mp3Url=$(e).attr("href")},t.prototype.addPlayer=function(e){var t,i,n;if(0===$(e).find("object").length)return this.removePlayer(),n=null,t=null,i={songUrl:this.getMp3Url(e),looping:!1,autoplay:!1},$(e).append("<div id='"+this.flashPlayerId+"'>"),swfobject.embedSWF(this.flashPlayerSwf,this.flashPlayerId,"70","21","9.0.0","/swfobject/expressInstall.swf",i,n,t),this.prevTrack=e},t.prototype.removePlayer=function(){return swfobject.removeSWF(this.flashPlayerId)},t}()}).call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Market.DOMUtils.Html5AudioPlayer=function(){function t(){this.handleClick=e(this.handleClick,this),this.$container=$("#content"),this.audioPlayer=".js-audio-player",this.playingClass=null,this.pausedClass=null,this.loadedTrack=null,this.state=null,$("#large_item_preview_container").addClass("audio-player-large--is-paused"),null!=Modernizr.audio.mp3&&this.$container.on("click",this.audioPlayer,this.handleClick)}return t.prototype.handleClick=function(e){return e.preventDefault(),this.loadedTrack===e.currentTarget?"playing"===this.state?this.pauseTrack():this.playTrack():this.loadAndPlayNewTrack(e.currentTarget)},t.prototype.loadAudio=function(e){return null==this.$audioElement&&this.appendAudioElement(),this.$audioElement.attr("src",e)},t.prototype.pauseTrack=function(){return this.$audioElement.get(0).pause(),this.switchClasses(this.loadedTrack,this.playingClass,this.pausedClass),this.state="paused"},t.prototype.playTrack=function(){return this.$audioElement.get(0).play(),this.switchClasses(this.loadedTrack,this.pausedClass,this.playingClass),this.state="playing"},t.prototype.loadAndPlayNewTrack=function(e){return null!==this.loadedTrack&&this.switchClasses(this.loadedTrack,this.playingClass,this.pausedClass),this.targetPlayer(e),this.switchClasses(e,this.playingClass,this.pausedClass),this.loadAudio(e.href),this.loadedTrack=e,this.playTrack()},t.prototype.appendAudioElement=function(){return this.$audioElement=$("<audio id='html5-audio-placeholder' autoplay>"),this.$container.append(this.$audioElement)},t.prototype.targetPlayer=function(e){return this.size=$(e).data("player-size"),this.playingClass="audio-player-"+this.size+"--is-playing",this.pausedClass="audio-player-"+this.size+"--is-paused"},t.prototype.switchClasses=function(e,t,i){return $(e).removeClass(t).addClass(i)},t}()}.call(this),Market.DOMUtils.setupMiniAudioPlayer=function(){return swfobject.hasFlashPlayerVersion("8.0.0")?new Market.DOMUtils.MiniFlashAudioPlayer:new Market.DOMUtils.Html5AudioPlayer};class DisableOnSubmit{constructor(e){this.form=e,this.$form=$(e),this.$form.on("submit.disableOnSubmit",this._disableSubmitButton.bind(this)),this.$form.on("submit-cancelled.disableOnSubmit",this._enableSubmitButton.bind(this))}_disableSubmitButton(){this._submitButton().prop("disabled",!0)}_enableSubmitButton(){this._submitButton().prop("disabled",!1)}_submitButton(){return this.$form.find("button[type=submit], input[type=submit]")}}$.fn.disableOnSubmit=function(){return this.each((function(){const e=$(this);if(void 0===e.data("plugin_disableOnSubmit")){const t=new DisableOnSubmit(this);e.data("plugin_disableOnSubmit",t)}}))},Market.DOMUtils.legacyDisableFormOnSubmit=()=>$("form.disable-on-submit").disableOnSubmit(),function(){var e,t;e=function(){function e(){this._currentPlayer=null,this._has_been_setup=!1,this._deferred=new $.Deferred}return e.prototype.register=function(){return this._has_been_setup||this._setup(),this._deferred.promise()},e.prototype._setup=function(){return this._has_been_setup=!0,yepnope({load:["//vjs.zencdn.net/5.0.2/video.min.js","//vjs.zencdn.net/5.0.2/video-js.min.css"],complete:(e=this,function(){return e._deferred.resolve(window.videojs)})});var e},e}(),t=null,Market.DOMUtils.getVideoJSPlayerManager=function(){return t||(t=new e)}}.call(this);const Magnifier={price_prefix:"<sup>$</sup>",positionMagnifierNextTo:function(e){let t,i;const n=this.magnifierDiv();t=$(e).offset().top+$(e).outerHeight()-n.outerHeight(),t<$(window).scrollTop()&&(t=$(window).scrollTop()),i=$(e).offset().left+$(e).outerWidth()/2>=$(window).width()/2?$(e).offset().left-n.outerWidth():$(e).offset().left+$(e).outerWidth(),n.css({top:t,left:i})},showMagnifier:function(e){void 0===$(e).attr("data-tooltip")&&($(e).attr("data-tooltip",$(e).attr("title")),$(e).attr("title",""),$("img",e).attr("title","")),this.populateMagnifierFrom(e),this.positionMagnifierNextTo(e),this.magnifierDiv().css({display:"inline"})},hideMagnifier:function(){this.magnifierDiv().hide()},magnify:function(e){const t=this;$(document).on("mouseenter",e,(function(){t.showMagnifier(this)})),$(document).on("mouseleave",e,(function(){t.hideMagnifier(this)}))},bindMetaData:function(e){const t=$(e),i=this.magnifierDiv(),n=i.find("strong").empty(),s=i.find(".author").empty(),r=i.find(".category").empty(),a=i.find(".cost").empty(),o=t.attr("data-item-cost"),l=void 0!==$(e).attr("data-item-cost");n.html(t.attr("data-item-name")),s.html(t.attr("data-item-author")),r.html(t.attr("data-item-category")),a.html(l?this.price_prefix+o:o)}},TooltipMagnifier=objectWithPrototype(Magnifier,{magnifierDiv:function(){return $("div#tooltip-magnifier")},populateMagnifierFrom:function(e){this.bindMetaData(e)}}),ImageMagnifier=objectWithPrototype(Magnifier,{populateMagnifierFrom:function(e){let t;const i=this.magnifierDiv().find("div.size-limiter"),n=$(e);n.attr("data-preview-url")?(t=new Image,$(t).attr("src",n.attr("data-preview-url")),n.attr("data-preview-height")&&($(t).attr("height",350),$(t).attr("width",350/n.attr("data-preview-height")*n.attr("data-preview-width"))),i.empty(),i.append(t),i.show()):i.hide(),this.bindMetaData(e)}}),VideoMagnifier=objectWithPrototype(Magnifier,{hoverID:0,loggedEvents:{},initialize:function(e){this.getDOMReferences(),this.addExtraHTML(),this.addEventListeners(e)},getDOMReferences:function(){this.$el=this.magnifierDiv(),this.$limiter=this.$el.find(".size-limiter")},addExtraHTML:function(){this.$fauxplayer=$("<div class='faux-player is-hidden'><img /></div>"),this.$img=this.$fauxplayer.find("img"),this.$limiter.append(this.$fauxplayer,"<div><div id='hover-video-preview'></div></div>")},addEventListeners:function(e){const t=this;$(document).on("mouseenter",e,(function(){t.hoverID++,t.showMagnifier(this)})),$(document).on("mouseleave",e,(function(){t.hoverID++,t.$el.css("left",""),t.stopVideo()}))},magnifierDiv:function(){return $("#video-magnifier")},populateMagnifierFrom:function(e){this.data=$(e).data(),this.bindMetaData(e),this.loadVideo()},stopVideo:function(){this.playerAPIReady&&(videojs("hover-videojs-preview").poster(""),videojs("hover-videojs-preview").pause())},loadVideo:function(){const e=this.hoverID,t=this,i=this.data;this.playerAPIReady||this.showFauxPlayer(i.previewUrl),this.registerVideoJSPlayer().done((function(n){t.injectVideoJSPlayer(n,i.videoFileUrl,i.previewUrl).done((function(){t.hoverID===e&&(t.hideFauxPlayer(),t.videoJSPlay(i.videoFileUrl,i.previewUrl))}))}))},showFauxPlayer:function(e){this.$fauxplayer.removeClass("is-hidden"),this.$img.attr("src",e)},hideFauxPlayer:function(){this.$fauxplayer.addClass("is-hidden")},registerVideoJSPlayer:function(){return Market.DOMUtils.getVideoJSPlayerManager().register()},loopVideo:function(e){e.currentTime(0),e.play()},injectVideoJSPlayer:function(e,t,i){const n=this;return this.playerInjection||(this.playerInjection=new $.Deferred,this.$limiter.append(this.$fauxplayer,'<video id="hover-videojs-preview" class="video-js vjs-default-skin" preload="metadata"></video>'),videojs("hover-videojs-preview",{src:t,poster:i,fluid:!0,width:472,height:264}).ready((function(){n.playerAPIReady=!0,n.playerInjection.resolve()})).on("timeupdate",(function(){const e=100*this.currentTime()/this.duration();n.videoJSLooped||(0===this.currentTime()&&n.logGAEventOnce("video_start",{label:t}),e>=25&&e<50?n.logGAEventOnce("25_percent",{label:t}):e>=50&&e<75?n.logGAEventOnce("50_percent",{label:t}):e>=75&&n.logGAEventOnce("75_percent",{label:t}))})).on("ended",(function(){n.videoJSLooped=!0,n.loopVideo(this),n.logGAEventOnce("video_complete",{label:t})}))),this.playerInjection},isVideoMuted:function(){const e=document.querySelectorAll(".js-.search-facet-video-mute-toggler__checkbox");return"true"===$.cookie("search_videos_muted")&&e.length},videoJSPlay:function(e,t){const i=videojs("hover-videojs-preview"),n=this.isVideoMuted()?0:1;this.videoJSLooped=!1,null!==e?(i.poster(t),i.src(e),i.volume(n).play(),Modernizr.touch||i.play(!0)):this.showFauxPlayer(t)},getPreferredPlayer:function(e){return-1!==e.indexOf("safari")&&-1===e.indexOf("chrome")?"html5":"flash"},logGAEventOnce:function(e,t){this.loggedEvents[e]!==this.hoverID&&(Market.Helpers.GoogleAnalytics.sendEvent("event","video player",e,t),this.loggedEvents[e]=this.hoverID)}}),LandscapeImageMagnifier=objectWithPrototype(ImageMagnifier,{magnifierDiv:function(){return $("div#landscape-image-magnifier")}}),SquareImageMagnifier=objectWithPrototype(ImageMagnifier,{magnifierDiv:function(){return $("div#square-image-magnifier")}}),SmartImageMagnifier=objectWithPrototype(ImageMagnifier,{magnifierDiv:function(){return $("div#smart-image-magnifier")},populateMagnifierFrom:function(e){const t=this.magnifierDiv(),i=t.find("div.size-limiter").empty(),n=t.find("strong"),s=new Image;$(s).attr("src",$(e).attr("data-preview-url"));const r=parseInt($(e).attr("data-preview-height"),10),a=parseInt($(e).attr("data-preview-width"),10);let o,l;if($(i).empty(),$(i).css("height",""),$(i).css("width",""),$(t).removeClass("previewable"),r*a>0){if(r>a?(o=350,l=350/r*a):(l=350,o=350/a*r),$(s).attr("height",o),$(s).attr("width",l),n.css("width",l),t.css("width",l),$(i).css("height",o),$(i).css("width",l),!$(e).hasClass("no_preview")){$(t).addClass("previewable");const n=$(e).clone();n.addClass("thumbnail_preview").attr("width",l).attr("height",o),$(i).append(n)}$(i).show()}else $(s).attr("height",225);$(i).append(s),this.bindMetaData(e)}}),PortraitImageMagnifier=objectWithPrototype(ImageMagnifier,{magnifierDiv:function(){return $("div#portrait-image-magnifier")}});Market.DOMUtils.setupMagnifiers=function(){TooltipMagnifier.magnify(".tooltip-magnifier"),LandscapeImageMagnifier.magnify("img.landscape-image-magnifier"),SquareImageMagnifier.magnify("img.square-image-magnifier"),SmartImageMagnifier.magnify("img.smart-image-magnifier"),PortraitImageMagnifier.magnify("img.portrait-image-magnifier"),VideoMagnifier.initialize("img.video-image-magnifier")},Views.App=class{constructor(e){Market.DOMUtils.setupResponsiveness(),Market.DOMUtils.setupMiniAudioPlayer(),Market.DOMUtils.legacyDisableFormOnSubmit(),Market.DOMUtils.setupMagnifiers(),Market.Helpers.GoogleAnalytics.storeGaClientId()}},Market.Helpers.easeInSine=(e,t,i,n)=>-i*Math.cos(e/n*(Math.PI/2))+i+t,function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Market.DOMUtils.AsyncForm=function(){function t(t,i){var n,s;this.$form=t,null==i&&(i={}),this.checkJobStatus=e(this.checkJobStatus,this),this.bindSubmitEvent=e(this.bindSubmitEvent,this),n={submitButton:this.$form.find("button[type=submit], input[type=submit]"),postingText:"Submitting...",postedText:"Processing...",retryText:"Retry Submit",pollTimeoutMessage:"The upload processing timed out.\n\nThis may happen because of a temporary backend issue, or because the files being uploaded are too big or numerous for our system to quickly process.\n\nPlease try reducing the size/number of preview screenshots or try again later. If the issue persists, please contact Envato Help.",submitErrorMessage:"Something went wrong while submitting the form. Please try again.",submitUrl:this.$form.attr("action"),returnUrl:this.$form.attr("data-job-return-url")||this.$form.attr("action"),jobStatusUrl:"/async_jobs/status",onSubmit:(s=this,function(){return s.submitButton.text(s.options.postingText)}),onSubmitFailure:function(e){return function(){return alert(e.options.submitErrorMessage),e.submitButton.text(e.options.retryText),e.submitButton.prop("disabled",!1)}}(this),onSubmitted:function(e){return function(){return e.submitButton.text(e.options.postedText)}}(this),onPollTimeout:function(e){return function(){return alert(e.options.pollTimeoutMessage),e.submitButton.text(e.options.retryText),e.submitButton.prop("disabled",!1)}}(this),onJobComplete:function(e){return function(){var t;return(t=new URL(e.options.returnUrl,window.location)).searchParams.set("job_id",e.jobID),window.location.href=t.href}}(this),maxTries:50,initialWait:1500,maxWait:26500},this.tries=0,this.options=$.extend(n,i),this.submitButton=this.options.submitButton,this.bindSubmitEvent(),this.completed=!1}return t.prototype.bindSubmitEvent=function(){return this.$form.on({submit:(e=this,function(){return e.options.onSubmit(),$.ajax({type:"POST",url:e.options.submitUrl,data:e.$form.serialize(),success:function(t){return e.options.onSubmitted(),e.jobID=t.job_id,setTimeout(e.checkJobStatus,e.options.initialWait)},error:function(){return e.options.onSubmitFailure()}}),!1})});var e},t.prototype.checkJobStatus=function(){return $.ajax({type:"GET",url:this.options.jobStatusUrl,data:{job_id:this.jobID},success:(e=this,function(t){if(t.complete)return e.completed=!0,e.options.onJobComplete()}),complete:function(e){return function(){if(!e.completed)return e.tries++<e.options.maxTries?setTimeout(e.checkJobStatus,e.calculateWaitTime(e.tries)):(e.tries=0,e.options.onPollTimeout())}}(this)});var e},t.prototype.calculateWaitTime=function(e){return Market.Helpers.easeInSine(e,this.options.initialWait,this.options.maxWait,this.options.maxTries)},t}()}.call(this),Views.AsyncForm=class{constructor(e){new Market.DOMUtils.AsyncForm(e,(()=>({postingText:"Uploading...",retryText:"Retry upload",errorAlertText:"Something went wrong. Please try uploading again."})))}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.AuthorDrivenPricingCalculator=function(){function t(t,i){this.$el=t,null==i&&(i=null),this.closePopup=e(this.closePopup,this),
this._handleEarningsUpdate=e(this._handleEarningsUpdate,this),this.handlePriceChange=e(this.handlePriceChange,this),this._handleUpdateDiscountPurchasePrice=e(this._handleUpdateDiscountPurchasePrice,this),this.handleDiscountPriceChange=e(this.handleDiscountPriceChange,this),this.handleDiscountPercentageChange=e(this.handleDiscountPercentageChange,this),this.handleDecimalInput=e(this.handleDecimalInput,this),this.handleSwitch=e(this.handleSwitch,this),this.dom={$switch:this.$el.find(".js-.adp__switch"),$popup:this.$el.find(".js-.adp__popup"),$purchasePrice:this.$el.find(".js-.adp__purchase-price"),$buyerFee:this.$el.find(".js-.adp__buyer-fee"),$authorFee:this.$el.find(".js-.adp__author-fee"),$earnings:this.$el.find(".js-.adp__earnings"),$closeButton:this.$el.find(".js-.adp__popup-close"),$discountPrice:$(".item-discount-form .js-.discounted-item-price"),$discountPercentage:$(".item-discount-form .js-.discount-percentage")},this.purchasePriceVal=this.dom.$purchasePrice.val(),this.authorFeePercent=100*this.$el.parent().parent(".license-pricing").first().data().authorFeeRate,this.buyerFeeVal=this.dom.$popup.data("buyer-fee"),this._initializeFields(),this.dom.$switch.on("click",this.handleSwitch),this.dom.$purchasePrice.on("keydown",this.handleDecimalInput),this.dom.$purchasePrice.on("keyup change mouseup",this.handlePriceChange),this.dom.$closeButton.on("click",this.closePopup),this.dom.$discountPrice.on("change",this.handleDiscountPriceChange),this.dom.$discountPercentage.on("change",this.handleDiscountPercentageChange)}return t.prototype.POPUP_TOP_OFFSET=30,t.prototype.POPUP_LEFT_OFFSET=100,t.prototype.handleSwitch=function(e){return e.preventDefault(),this.handlePriceChange(),this.positionPopup(e)},t.prototype.handleDecimalInput=function(e){if(190===e.keyCode)return!1},t.prototype.handleDiscountPercentageChange=function(){var e,t,i,n,s;return e=parseInt(this.buyerFeeVal,10),t=Math.floor(+this.dom.$discountPercentage.val()),s=$(".item-discount-form .js-license-pricing__purchase-price").html(),n=parseInt(s,10),i=Math.floor(n/100*(100-t)-e),this.purchasePriceVal=i+e,this._handleEarningsUpdate(),this._handleUpdateDiscountPurchasePrice()},t.prototype.handleDiscountPriceChange=function(e){return this.purchasePriceVal=parseInt(e.target.value,10)+parseInt(this.buyerFeeVal,10),this._handleEarningsUpdate(),this._handleUpdateDiscountPurchasePrice()},t.prototype._handleUpdateDiscountPurchasePrice=function(){return this.dom.$purchasePrice.val(this.purchasePriceVal),this.dom.$purchasePrice.trigger("change")},t.prototype.handlePriceChange=function(){return this._updatePurchasePrice(),this._handleEarningsUpdate()},t.prototype._handleEarningsUpdate=function(){var e;return(e=this._computeEarnings(this.buyerFeeVal,this.authorFeePercent))<0&&(e=0),this.dom.$earnings.val(e)},t.prototype.positionPopup=function(e){var t,i;return t=$(e.currentTarget).offset(),(i=this.dom.$popup).toggle(),i.appendTo("body"),i.offset({top:t.top+this.POPUP_TOP_OFFSET,left:t.left+this.POPUP_LEFT_OFFSET})},t.prototype.closePopup=function(){return this.dom.$popup.hide()},t.prototype._initializeFields=function(){var e;return e=this.$el.parent(".js-license-pricing__calculator").find(".js-license-pricing__purchase-price").html(),this.dom.$purchasePrice.val(e),this.dom.$authorFee.val(this.authorFeePercent),this.dom.$buyerFee.html(this.buyerFeeVal),this.handlePriceChange()},t.prototype._updatePurchasePrice=function(){return this.purchasePriceVal=this.dom.$purchasePrice.val()},t.prototype._computeEarnings=function(){var e;return(e=this.purchasePriceVal-this.buyerFeeVal)-(.01*this.authorFeePercent*e).toFixed(2)},t}()}.call(this),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}((function(e){e.extend(e.fn,{validate:function(t){if(this.length){var i=e.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",(function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(t.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)})),this.submit((function(t){function n(){var n,s;return!i.settings.submitHandler||(i.submitButton&&(n=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),s=i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&n.remove(),void 0!==s&&s)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)}))),i)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,i;return e(this[0]).is("form")?t=this.validate().form():(t=!0,i=e(this[0].form).validate(),this.each((function(){t=i.element(this)&&t}))),t},removeAttrs:function(t){var i={},n=this;return e.each(t.split(/\s/),(function(e,t){i[t]=n.attr(t),n.removeAttr(t)})),i},rules:function(t,i){var n,s,r,a,o,l,c=this[0];if(t)switch(s=(n=e.data(c.form,"validator").settings).rules,r=e.validator.staticRules(c),t){case"add":e.extend(r,e.validator.normalizeRule(i)),delete r.messages,s[c.name]=r,i.messages&&(n.messages[c.name]=e.extend(n.messages[c.name],i.messages));break;case"remove":return i?(l={},e.each(i.split(/\s/),(function(t,i){l[i]=r[i],delete r[i],"required"===i&&e(c).removeAttr("aria-required")})),l):(delete s[c.name],r)}return(a=e.validator.normalizeRules(e.extend({},e.validator.classRules(c),e.validator.attributeRules(c),e.validator.dataRules(c),e.validator.staticRules(c)),c)).required&&(o=a.required,delete a.required,a=e.extend({required:o},a),e(c).attr("aria-required","true")),a.remote&&(o=a.remote,delete a.remote,a=e.extend(a,{remote:o})),a}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,(function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),(function(){return i}))})),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n):e(t).addClass(i).removeClass(n)},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n):e(t).removeClass(i).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator"),n="on"+t.type.replace(/^validate/,""),s=i.settings;s[n]&&!this.is(s.ignore)&&s[n].call(i,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,n=this.groups={};e.each(this.settings.groups,(function(t,i){"string"==typeof i&&(i=i.split(/\s/)),e.each(i,(function(e,i){n[i]=t}))})),i=this.settings.rules,e.each(i,(function(t,n){i[t]=e.validator.normalizeRule(n)})),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",t).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var i=this.clean(t),n=this.validationTargetFor(i),s=!0;return this.lastElement=n,void 0===n?delete this.invalid[i.name]:(this.prepareElement(n),this.currentElements=e(n),(s=!1!==this.check(n))?delete this.invalid[n.name]:this.invalid[n.name]=!0),e(t).attr("aria-invalid",!s),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),s},showErrors:function(t){if(t){for(var i in e.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,(function(e){return!(e.name in t)}))}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,(function(e){return e.element.name===t.name})).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter((function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!t.objectLength(e(this).rules()))&&(i[this.name]=!0,!0)}))},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i,n=e(t),s=t.type;return"radio"===s||"checkbox"===s?e("input[name='"+t.name+"']:checked").val():"number"===s&&void 0!==t.validity?!t.validity.badInput&&n.val():"string"==typeof(i=n.val())?i.replace(/\r/g,""):i},check:function(t){t=this.validationTargetFor(this.clean(t));var i,n,s,r=e(t).rules(),a=e.map(r,(function(e,t){return t})).length,o=!1,l=this.elementValue(t);for(n in r){s={method:n,parameters:r[n]};try{if("dependency-mismatch"===(i=e.validator.methods[n].call(this,l,t,s.parameters))&&1===a){o=!0;continue}if(o=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,s),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+s.method+"' method.",e),e}}if(!o)return this.objectLength(r)&&this.successList.push(t),!0},customDataMessage:function(t,i){return e(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var n=this.defaultMessage(t,i.method),s=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,t):s.test(n)&&(n=e.validator.format(n.replace(s,"{$1}"),i.parameters)),this.errorList.push({message:n,element:t,method:i.method}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)i=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map((function(){return this.element}))},showLabel:function(t,i){var n,s,r,a=this.errorsFor(t),o=this.idOrName(t),l=e(t).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(i)):(n=a=e("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement(n,e(t)):n.insertAfter(t),a.is("label")?a.attr("for",o):0===a.parents("label[for='"+o+"']").length&&(r=a.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),l?l.match(new RegExp("\\b"+r+"\\b"))||(l+=" "+r):l=r,e(t).attr("aria-describedby",l),(s=this.groups[t.name])&&e.each(this.groups,(function(t,i){i===s&&e("[name='"+t+"']",this.currentForm).attr("aria-describedby",a.attr("id"))})))),!i&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,t)),this.toShow=this.toShow.add(a)},errorsFor:function(t){var i=this.idOrName(t),n=e(t).attr("aria-describedby"),s="label[for='"+i+"'], label[for='"+i+"'] *";return n&&(s=s+", #"+n.replace(/\s+/g,", #")),this.errors().filter(s)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,i){return!!e(t,i.form).length},function:function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},n=e(t).attr("class");return n&&e.each(n.split(" "),(function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])})),i},attributeRules:function(t){var i,n,s={},r=e(t),a=t.getAttribute("type");for(i in e.validator.methods)"required"===i?(""===(n=t.getAttribute(i))&&(n=!0),n=!!n):n=r.attr(i),/min|max/.test(i)&&(null===a||/number|range|text/.test(a))&&(n=Number(n)),n||0===n?s[i]=n:a===i&&"range"!==a&&(s[i]=!0);return s.maxlength&&/-1|2147483647|524288/.test(s.maxlength)&&delete s.maxlength,s},dataRules:function(t){var i,n,s={},r=e(t);for(i in e.validator.methods)void 0!==(n=r.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()))&&(s[i]=n);return s},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,(function(n,s){if(!1!==s){if(s.param||s.depends){var r=!0;switch(typeof s.depends){case"string":r=!!e(s.depends,i.form).length;break;case"function":r=s.depends.call(i,i)}r?t[n]=void 0===s.param||s.param:delete t[n]}}else delete t[n]})),e.each(t,(function(n,s){t[n]=e.isFunction(s)?s(i):s})),e.each(["minlength","maxlength"],(function(){t[this]&&(t[this]=Number(t[this]))})),e.each(["rangelength","range"],(function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))})),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),(function(){i[this]=!0})),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==n?n:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var s=e(i).val();return s&&s.length>0}return this.checkable(i)?this.getLength(t,i)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i,n,s=0,r=0,a=!1;if((e=e.replace(/\D/g,"")).length<13||e.length>19)return!1;for(i=e.length-1;i>=0;i--)n=e.charAt(i),r=parseInt(n,10),a&&(r*=2)>9&&(r-=9),s+=r,a=!a;return s%10==0},minlength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||s>=n},maxlength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||s<=n},rangelength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||s>=n[0]&&s<=n[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||e<=i},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},equalTo:function(t,i,n){var s=e(n);return this.settings.onfocusout&&s.unbind(".validate-equalTo").bind("blur.validate-equalTo",(function(){e(i).valid()})),t===s.val()},remote:function(t,i,n){if(this.optional(i))return"dependency-mismatch";var s,r,a=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),a.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=a.message,n="string"==typeof n&&{url:n}||n,a.old===t?a.valid:(a.old=t,s=this,this.startRequest(i),(r={})[i.name]=t,e.ajax(e.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:r,context:s.currentForm,success:function(n){var r,o,l,c=!0===n||"true"===n;s.settings.messages[i.name].remote=a.originalMessage,c?(l=s.formSubmitted,s.prepareElement(i),s.formSubmitted=l,s.successList.push(i),delete s.invalid[i.name],s.showErrors()):(r={},o=n||s.defaultMessage(i,"remote"),r[i.name]=a.message=e.isFunction(o)?o(t):o,s.invalid[i.name]=!0,s.showErrors(r)),a.valid=c,s.stopRequest(i,c)}},n)),"pending")}}}),e.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var t,i={};e.ajaxPrefilter?e.ajaxPrefilter((function(e,t,n){var s=e.port;"abort"===e.mode&&(i[s]&&i[s].abort(),i[s]=n)})):(t=e.ajax,e.ajax=function(n){var s=("mode"in n?n:e.ajaxSettings).mode,r=("port"in n?n:e.ajaxSettings).port;return"abort"===s?(i[r]&&i[r].abort(),i[r]=t.apply(this,arguments),i[r]):t.apply(this,arguments)}),e.extend(e.fn,{validateDelegate:function(t,i,n){return this.bind(i,(function(i){var s=e(i.target);if(s.is(t))return n.apply(s,arguments)}))}})})),Views.AuthorSettings=class{constructor(){$(".js-author_settings").validate({errorClass:"invalid",validClass:"valid",rules:{"user_google_analytics_updater[agreed_to_google_analytics_terms]":{required:{depends:()=>""!==$("#user_google_analytics_updater_google_analytics_tracking_code").val()}}},messages:{"user_google_analytics_updater[agreed_to_google_analytics_terms]":{required:"You must accept the terms of use in order to use Google Analytics."}}})}},Views.BadgeExposer=class{constructor(e){e.on("click",(function(t){t.preventDefault(),e.siblings(".badges").find(".hidden").removeClass("hidden"),e.remove()}))}},Views.BadgeManager=class{constructor(e){const t=e.data("jqueryUiPath");yepnope({test:Modernizr.touch,yep:[t],nope:t,complete(){const e=$("#badge-manager-list").addClass("dragging"),t=$("#choices");e.sortable({update(i,n){t.val(e.sortable("toArray").join("::"))}}),t.val(e.sortable("toArray").join("::"))}})}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.BookmarkDescription=function(){function t(t){var i;this.$el=t,this.hideSpinner=e(this.hideSpinner,this),this.showSpinner=e(this.showSpinner,this),this.hideError=e(this.hideError,this),this.showError=e(this.showError,this),this.onSubmitFailure=e(this.onSubmitFailure,this),this.onSubmitSuccess=e(this.onSubmitSuccess,this),this.submitForm=e(this.submitForm,this),this.hideForm=e(this.hideForm,this),this.showForm=e(this.showForm,this),this.dontHideOnBlur=!1,this.dom={$form:this.$el.find(".js-edit-description-form"),$add:this.$el.find(".js-add-description"),$edit:this.$el.find(".js-edit-description"),$description:this.$el.find(".js-description"),$descriptionField:this.$el.find(".js-description-field"),$descriptionError:this.$el.find(".js-description-error"),$descriptionSubmit:this.$el.find(".js-description-submit"),$descriptionSpinner:this.$el.find(".js-description-spinner")},this.dom.$add.on("click",this.showForm),this.dom.$edit.on("click",this.showForm),this.dom.$form.on("submit",this.submitForm),this.dom.$descriptionField.on("blur",this.hideForm),this.dom.$descriptionSubmit.on("mousedown touchstart",(i=this,function(){return i.dontHideOnBlur=!0}))}return t.prototype.showForm=function(e){return e.preventDefault(),this.dom.$add.addClass("is-hidden"),this.dom.$edit.addClass("is-hidden"),this.dom.$form.removeClass("is-hidden"),this.dom.$descriptionField.focus()},t.prototype.hideForm=function(e){if(!this.dontHideOnBlur)return e.preventDefault(),this.dom.$form.addClass("is-hidden"),this.dom.$description.is(":empty")?this.dom.$add.removeClass("is-hidden"):this.dom.$edit.removeClass("is-hidden");this.dontHideOnBlur=!1},t.prototype.submitForm=function(e){return e.preventDefault(),this.showSpinner(),$.ajax({url:this.dom.$form.attr("action"),type:"PUT",data:this.dom.$form.serialize(),success:this.onSubmitSuccess,error:this.onSubmitFailure})},t.prototype.onSubmitSuccess=function(e){return this.hideSpinner(),(null!=e?e.success:void 0)?(this.dom.$form.addClass("is-hidden"),this.hideError(),e.bookmark_description?(this.dom.$description.text(e.bookmark_description),this.dom.$edit.removeClass("is-hidden")):(this.dom.$description.text(""),this.dom.$add.removeClass("is-hidden"))):this.onSubmitFailure(e)},t.prototype.onSubmitFailure=function(e){var t;return this.hideSpinner(),t=this.extractErrorMessage(e),this.showError(t)},t.prototype.showError=function(e){return this.dom.$descriptionError.text(e),this.dom.$descriptionError.removeClass("is-hidden"),this.dom.$descriptionField.addClass("is-error"),this.dom.$descriptionField.focus()},t.prototype.hideError=function(){return this.dom.$descriptionError.addClass("is-hidden"),this.dom.$descriptionField.removeClass("is-error"),this.dom.$descriptionError.empty()},t.prototype.showSpinner=function(){return this.dom.$descriptionSpinner.removeClass("is-hidden")},t.prototype.hideSpinner=function(){return this.dom.$descriptionSpinner.addClass("is-hidden")},t.prototype.extractErrorMessage=function(e){return!1===(null!=e?e.success:void 0)&&e.errors?"Error: "+e.errors.toString():(null!=e?e.statusText:void 0)?"Error: "+(null!=e?e.status:void 0)+" "+e.statusText.toString():"Unknown error"},t}()}.call(this),function(){Views.CategorySelectWatcher=function(){function e(){var e;e=$("#upload_file_type").val(),$("#category").change((function(){var t,i;return i=$(this).data("id"),t=$(this).val(),$("#attribute_fields, #licenses").addClass("js-category-select-watcher-replacing"),$.ajax({url:"/content/upload/category_select_changed",data:$.param({category:t,id:i,type:e}),dataType:"html",type:"post",success:function(e){return $("#attribute_fields").replaceWith(e),viewloader.execute(Views,$("#attribute_fields")),$("#attribute_fields").removeClass("js-category-select-watcher-replacing")}}),$.ajax({url:"/content/upload/licenses_for_category_select_changed",data:$.param({category:t,id:i,type:e}),dataType:"html",type:"post",success:function(e){return $("#licenses").replaceWith(e),viewloader.execute(Views,$("#licenses")),$("#licenses").removeClass("js-category-select-watcher-replacing")}})}))}return e}()}.call(this),Market.DOMUtils.CategoryTree=function(){return{setupCategoryTree:function(e){$("a",e).each((function(){if($("li",$("> ul",$(this).parent())).length){$(this).parent().addClass("expandable")}}))},open_next:function(e,t){const i=$(e),n=$(t);let s=$("ul",n);const r=$("> ul",i.parent()).children().clone();i.hasClass("all-category")||0===$("li",$("> ul",i.parent())).length||(i.parent().parent().find(".active").removeClass("active"),i.parent().addClass("active"),n.removeClass("empty"),s.empty(),$("ul",n).length||(s=$("<ul></ul>"),n.append(s)),s.append('<li><a href="'+e.get(0)+'" class="all-category">All '+$(e.get(0)).html()+"</a></li>"),s.append(r),s.is(":empty")&&(s.remove(),n.addClass("empty")))}}},Views.CategoryTreeExplorer=class{constructor(){const e=new Market.DOMUtils.CategoryTree;e.setupCategoryTree("#first");const t=$(".grid-container");$("#first ul:first li").on("click",(function(){$("#second").empty(),e.open_next($("a",this).first(),"#second"),$("#third").empty().addClass("empty"),$("#fourth").empty().addClass("empty")})),t.on("click","#second li",(function(){e.open_next($("a",this).first(),"#third"),$("#fourth").empty().addClass("empty")})),t.on("click","#third li",(function(){e.open_next($("a",this).first(),"#fourth")})),$("li.expandable > a").on("click",(function(){return $(this).parent().trigger("click"),!1})),t.on("click","li.expandable > a",(function(){return $(this).parent().trigger("click"),!1}))}},function(e){"use strict";e.ajaxPrefilter((function(e){if(e.iframe)return e.originalURL=e.url,"iframe"})),e.ajaxTransport("iframe",(function(t,i,n){function s(){l.each((function(t,i){var n=e(i);n.data("clone").replaceWith(n)})),r.remove(),a.one("load",(function(){a.remove()})),a.attr("src","about:blank")}var r=null,a=null,o="iframe-"+e.now(),l=e(t.files).filter(":file:enabled"),c=null;if(t.dataTypes.shift(),t.data=i.data,l.length)return r=e("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:t.originalURL,target:o}),"string"==typeof t.data&&t.data.length>0&&e.error("data must not be serialized"),e.each(t.data||{},(function(t,i){e.isPlainObject(i)&&(t=i.name,i=i.value),e("<input type='hidden' />").attr({name:t,value:i}).appendTo(r)})),e("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(r),c=t.dataTypes[0]&&t.accepts[t.dataTypes[0]]?t.accepts[t.dataTypes[0]]+("*"!==t.dataTypes[0]?", */*; q=0.01":""):t.accepts["*"],e("<input type='hidden' name='X-HTTP-Accept'>").attr("value",c).appendTo(r),l.after((function(){var t=e(this),i=t.clone().prop("disabled",!0);return t.data("clone",i),i})).next(),l.appendTo(r),{
send:function(t,i){(a=e("<iframe src='about:blank' name='"+o+"' id='"+o+"' style='display:none'></iframe>")).one("load",(function(){a.one("load",(function(){var e=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,t=e.documentElement?e.documentElement:e.body,r=t.getElementsByTagName("textarea")[0],a=r&&r.getAttribute("data-type")||null,o=r&&r.getAttribute("data-status")||200,l=r&&r.getAttribute("data-statusText")||"OK",c={text:a?r.value:t?t.textContent||t.innerText:null};s(),n.responseText||(n.responseText=c.text),i(o,l,c,a?"Content-Type: "+a:null)})),r[0].submit()})),e("body").append(r,a)},abort:function(){null!==a&&(a.unbind("load").attr("src","about:blank"),s())}}}))}(jQuery),function(e){var t;e.remotipart=t={setup:function(i){var n=i.data("ujs:submit-button"),s=e('meta[name="csrf-param"]').attr("content"),r=e('meta[name="csrf-token"]').attr("content"),a=i.find('input[name="'+s+'"]').length;i.one("ajax:beforeSend.remotipart",(function(o,l,c){return delete c.beforeSend,c.iframe=!0,c.files=e(e.rails.fileInputSelector,i),c.data=i.serializeArray(),n&&c.data.push(n),c.files.each((function(e,t){for(var i=c.data.length-1;i>=0;i--)c.data[i].name==t.name&&c.data.splice(i,1)})),c.processData=!1,void 0===c.dataType&&(c.dataType="script *"),c.data.push({name:"remotipart_submitted",value:!0}),r&&s&&!a&&c.data.push({name:s,value:r}),e.rails.fire(i,"ajax:remotipartSubmit",[l,c])&&(e.rails.ajax(c).always((function(t){e.rails.fire(i,"ajax:remotipartComplete",[t])})),setTimeout((function(){e.rails.disableFormElements(i)}),20)),t.teardown(i),!1})).data("remotipartSubmitted",!0)},teardown:function(e){e.unbind("ajax:beforeSend.remotipart").removeData("remotipartSubmitted")}},e(document).on("ajax:aborted:file","form",(function(){var i=e(this);return t.setup(i),e.rails.handleRemote(i),!1}))}(jQuery),Market.DOMUtils.uploadInputFileName=function(e){this.$el=e;return this.$el.val().match(/([^/\\]+)$/)[1]},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.CollectionForm=function(){function t(t){this.$el=t,this.handleFileUpload=e(this.handleFileUpload,this),this.render=e(this.render,this),this.updateError=e(this.updateError,this),this.updateSuccess=e(this.updateSuccess,this),this.updateBeforeSend=e(this.updateBeforeSend,this),this.createError=e(this.createError,this),this.createSuccess=e(this.createSuccess,this),this.createBeforeSend=e(this.createBeforeSend,this),this.$formNew=this.$el.find(".js-collection-form--new"),this.$formUpdate=this.$el.find(".js-collection-form--update"),this.$formRadios=this.$el.find(".js-collection-form-radios input"),this.$formError=this.$el.find(".js-collection-form-error"),this.$formFileUpload=this.$el.find(".js-collection-file-upload"),this.$formFilename=this.$el.find(".js-collection-form-filename"),this.$formSubmit=this.$el.find(".js-collection-form-submit"),this.modal=$.magnificPopup.instance,this.$formNew.on("ajax:beforeSend",this.createBeforeSend),this.$formNew.on("ajax:success",this.createSuccess),this.$formNew.on("ajax:error",this.createError),this.$formUpdate.on("ajax:beforeSend",this.updateBeforeSend),this.$formUpdate.on("ajax:success",this.updateSuccess),this.$formUpdate.on("ajax:error",this.updateError),this.$formNew.add(this.$formUpdate).on("change",".js-collection-file-upload",this.handleFileUpload)}return t.prototype.createBeforeSend=function(e){return this.render("updating",e.target)},t.prototype.createSuccess=function(e,t){return"ok"===t.status?this.render("new",e.target,t):this.render("validationError",e.target,t)},t.prototype.createError=function(e,t){return this.render("error",e.target,t)},t.prototype.updateBeforeSend=function(e){return this.render("updating",e.target)},t.prototype.updateSuccess=function(e,t){return"ok"===t.status?this.render("updated",e.target,t):this.render("validationError",e.target,t)},t.prototype.updateError=function(e,t){return this.render("error",e.target,t)},t.prototype.render=function(e,t,i){var n;switch(e){case"updating":return this.$formError.addClass("is-hidden").html("");case"new":return this.$formSubmit.removeAttr("data-disable-with"),location.href=i.collection_url;case"updated":return(n=$("#collection-"+i.collection_id))&&(n.replaceWith(i.partial),viewloader.execute(Views,$(".js-collection-list"))),this.modal.close();case"validationError":return this.$formError.removeClass("is-hidden").html(i.errors);case"error":return this.$formError.removeClass("is-hidden").html("Sorry something went wrong")}},t.prototype.handleFileUpload=function(e){var t;return t=Market.DOMUtils.uploadInputFileName($(e.target)),this.$formFilename.html(t)},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.CollectionShare=function(){function t(t){this.$el=t,this.render=e(this.render,this),this.revokeError=e(this.revokeError,this),this.revokeSuccess=e(this.revokeSuccess,this),this.shareError=e(this.shareError,this),this.shareSuccess=e(this.shareSuccess,this),this.$el.on("ajax:success",".js-collection-share",this.shareSuccess),this.$el.on("ajax:error",".js-collection-share",this.shareError),this.$el.on("ajax:success",".js-collection-share-revoke",this.revokeSuccess),this.$el.on("ajax:error",".js-collection-share-revoke",this.revokeError)}return t.prototype.shareSuccess=function(e,t){return this.render("success",e.target,t)},t.prototype.shareError=function(e,t){return this.render("error",e.target,t)},t.prototype.revokeSuccess=function(e,t){return this.render("success",e.target,t)},t.prototype.revokeError=function(e,t){return this.render("error",e.target,t)},t.prototype.render=function(e,t,i){switch(e){case"success":return this.$el.html(i.partial),viewloader.execute(Views,$(".mfp-wrap"));case"error":return this.$el.addClass("is-error")}},t}()}.call(this),function(){var e;(e=function(e,t){return this.options=$.extend({},this.defaults,t),this.element=e,this.$element=$(e),this.init(),this}).prototype.defaults={exposer:".exposer",exposeeClass:"hidden",destroyParent:!1,parent:!1},e.prototype.init=function(){return this.$element.on("click.exposer",this.options.exposer,(e=this,function(t){return $(t.delegateTarget).find("."+e.options.exposeeClass).removeClass(e.options.exposeeClass),e.options.destroyParent?(e.options.parent?$(e.options.parent):$(t.target).parent()).remove():$(t.target).remove(),t.preventDefault()}));var e},$.fn.exposer=function(t){return this.each((function(){var i,n;if(void 0===(i=$(this)).data("plugin_exposer"))return n=new e(this,t),i.data("plugin_exposer",n)}))}}.call(this),function(e){var t,i={className:"autosizejs",append:"",callback:!1,resizeDelay:10},n=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],s=e('<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>').data("autosize",!0)[0];s.style.lineHeight="99px","99px"===e(s).css("lineHeight")&&n.push("lineHeight"),s.style.lineHeight="",e.fn.autosize=function(r){return this.length?(r=e.extend({},i,r||{}),s.parentNode!==document.body&&e(document.body).append(s),this.each((function(){function i(){var t,i;"getComputedStyle"in window?(t=window.getComputedStyle(u,null),i=u.getBoundingClientRect().width,e.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],(function(e,n){i-=parseInt(t[n],10)})),s.style.width=i+"px"):s.style.width=Math.max(p.width(),0)+"px"}function a(){var a={};if(t=u,s.className=r.className,c=parseInt(p.css("maxHeight"),10),e.each(n,(function(e,t){a[t]=p.css(t)})),e(s).css(a),i(),window.chrome){var o=u.style.width;u.style.width="0px";u.offsetWidth;u.style.width=o}}function o(){var e,n;t!==u?a():i(),s.value=u.value+r.append,s.style.overflowY=u.style.overflowY,n=parseInt(u.style.height,10),s.scrollTop=0,s.scrollTop=9e4,e=s.scrollTop,c&&e>c?(u.style.overflowY="scroll",e=c):(u.style.overflowY="hidden",e<d&&(e=d)),n!==(e+=f)&&(u.style.height=e+"px",m&&r.callback.call(u,u))}function l(){clearTimeout(h),h=setTimeout((function(){var e=p.width();e!==v&&(v=e,o())}),parseInt(r.resizeDelay,10))}var c,d,h,u=this,p=e(u),f=0,m=e.isFunction(r.callback),g={height:u.style.height,overflow:u.style.overflow,overflowY:u.style.overflowY,wordWrap:u.style.wordWrap,resize:u.style.resize},v=p.width();p.data("autosize")||(p.data("autosize",!0),"border-box"!==p.css("box-sizing")&&"border-box"!==p.css("-moz-box-sizing")&&"border-box"!==p.css("-webkit-box-sizing")||(f=p.outerHeight()-p.height()),d=Math.max(parseInt(p.css("minHeight"),10)-f||0,p.height()),p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:"none"===p.css("resize")||"vertical"===p.css("resize")?"none":"horizontal"}),"onpropertychange"in u?"oninput"in u?p.on("input.autosize keyup.autosize",o):p.on("propertychange.autosize",(function(){"value"===event.propertyName&&o()})):p.on("input.autosize",o),!1!==r.resizeDelay&&e(window).on("resize.autosize",l),p.on("autosize.resize",o),p.on("autosize.resizeIncludeStyle",(function(){t=null,o()})),p.on("autosize.destroy",(function(){t=null,clearTimeout(h),e(window).off("resize",l),p.off("autosize").off(".autosize").css(g).removeData("autosize")})),o())}))):this}}(window.jQuery||window.$),Market.DOMUtils.InsertPartial=function(e,t){const i={container:".insert-partial-container",complete:null,loadingClass:"is-loading"},n=$.extend({},i,t),s=$(n.container);s.empty().addClass(n.loadingClass),$.ajax({dataType:"html",url:e,success:e=>{s.removeClass(n.loadingClass),"string"==typeof e&&s.html(e),"function"==typeof n.complete&&n.complete()}})},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.CommentList=function(){function t(){var t;this.cancel=e(this.cancel,this),this.markSuccess=e(this.markSuccess,this),this.flagFetchForm=e(this.flagFetchForm,this),this.editError=e(this.editError,this),this.editSuccess=e(this.editSuccess,this),this.editSubmit=e(this.editSubmit,this),this.editFetchForm=e(this.editFetchForm,this),this.newSuccess=e(this.newSuccess,this),this.newBefore=e(this.newBefore,this),$(".js-discussion").exposer({destroyParent:!0,exposeeClass:"is-hidden"}),t=$(document),this.escaping=Market.Helpers.FormEscaping,t.on("ajax:before",this.selectors.newReplyForm,this.newBefore),t.on("ajax:success",this.selectors.newReplyForm,this.newSuccess),t.on("ajax:error",this.selectors.newReplyForm,this.newError),t.on("ajax:complete",this.selectors.newReplyForm,this.escaping.onCompleteCleanup(this.selectors.newReplyField)),t.on("click",this.selectors.editLink,this.editFetchForm),t.on("ajax:before",this.selectors.editForm,this.editSubmit),t.on("ajax:success",this.selectors.editForm,this.editSuccess),t.on("ajax:error",this.selectors.editForm,this.editError),t.on("ajax:complete",this.selectors.editForm,this.escaping.onCompleteCleanup(this.selectors.editField)),t.on("click",this.selectors.flagLink,this.flagFetchForm),t.on("ajax:success",this.selectors.markCommentForm,this.markSuccess),t.on("click",this.selectors.cancelButton,this.cancel),$(this.selectors.newReplyField).autosize(),Market.Helpers.warnOnLeave()}return t.prototype.classes={hidden:"is-hidden",loading:"is-loading",newReplyLoading:"comment__new-reply--is-loading",markRead:"e-icon -icon-circle-empty",markUnread:"e-icon -icon-circle-full"},t.prototype.selectors={cancelButton:".complaint-form__cancel, .js-comment-cancel",discussion:".js-discussion",comment:".js-comment",commentContent:".js-comment-content",commentTools:".js-comment-tools",editField:"textarea",editForm:".js-edit-comment-form",editLink:".js-comment-edit",flagLink:".js-post-flag",markCommentForm:".js-comment-mark",markButton:".js-post-mark",injectTarget:".js-inject-target",newReply:".js-comment-new-reply",newReplyField:".js-comment-new-reply-field",newReplyForm:".js-comment-reply-form",replyForm:".js-comment-reply-form",commentBody:".js-comment__body",commentFilter:"#filter"},t.prototype.newBefore=function(e){var t,i,n;return n=(i=(t=$(e.target)).find(this.selectors.newReplyField)).val(),!!this.validate(n)&&(this.escaping.escapeInHiddenCopyAndDisable(t,i,"base64_content"),t.closest(this.selectors.replyForm).addClass(this.classes.newReplyLoading))},t.prototype.newSuccess=function(e,t){var i,n;return"ok"===t.status?((i=$(e.target)).closest(this.selectors.replyForm).removeClass(this.classes.newReplyLoading),i.find(this.selectors.newReplyField).val("").blur().trigger("autosize.resize"),n=$(t.partial).insertBefore(i.closest(this.selectors.newReply)),viewloader.execute(Views,n)):"error"===t.status?window.location.href=t.redirect_to:void 0},t.prototype.newError=function(e){return e.target.submit()},t.prototype.editFetchForm=function(e){var t;return e.preventDefault(),(t=$(e.currentTarget).closest(this.selectors.comment)).find(this.selectors.commentBody).addClass(this.classes.hidden),t.find(this.selectors.injectTarget).removeClass(this.classes.hidden),this.insertPartial(e.currentTarget.href,t)},t.prototype.editSubmit=function(e){var t,i,n,s,r;return i=(t=(s=(n=$(e.target)).find(this.selectors.editField)).closest(this.selectors.comment)).find(this.selectors.commentBody),r=s.val(),!!this.validate(r)&&(i.data("old",i.html()),this.escaping.escapeInHiddenCopyAndDisable(n,s,"base64_content"),s.closest(this.selectors.injectTarget).addClass(this.classes.hidden),t.find(this.selectors.commentContent).addClass(this.classes.loading),t.find(this.selectors.commentTools).addClass(this.classes.hidden))},t.prototype.editSuccess=function(e,t){var i,n,s;return n=(i=(s=$(e.target)).closest(this.selectors.comment)).find(this.selectors.commentBody),"ok"===t.status?(i.find(this.selectors.commentTools).removeClass(this.classes.hidden),i.find(this.selectors.commentContent).removeClass(this.classes.loading),i.find(this.selectors.injectTarget).empty().addClass(this.classes.hidden),n.html(t.html).removeClass(this.classes.hidden)):"error"===t.status?s.trigger("ajax:error",[null,null,t.error]):void 0},t.prototype.editError=function(e,t,i,n){var s,r,a;return a="string"==typeof n?n:"",(r=(s=$(e.target).closest(this.selectors.comment)).find(this.selectors.commentBody)).addClass(this.classes.hidden).html(r.data("old")),s.find(this.selectors.commentContent).removeClass(this.classes.loading),s.find(this.selectors.commentTools).removeClass(this.classes.hidden),s.find(this.selectors.injectTarget).prepend("<strong class='comment-error'>Your comment was not updated. "+a+"</strong>").removeClass(this.classes.hidden)},t.prototype.flagFetchForm=function(e){var t;return e.preventDefault(),(t=$(e.currentTarget).closest(this.selectors.comment)).find(this.selectors.injectTarget).removeClass(this.classes.hidden),this.insertPartial(e.currentTarget.href,t),t.find(this.selectors.commentBody).removeClass(this.classes.hidden)},t.prototype.markSuccess=function(e,t){var i,n;if(i=$(e.target).find(this.selectors.markButton),t.new_title!==i.parent().attr("title")&&(i.toggleClass(this.classes.markRead+" "+this.classes.markUnread),i.parent().attr("title",t.new_title)),"unread"===(n=$(this.selectors.commentFilter).val())||"unread-buyer"===n)return i.closest(this.selectors.discussion).slideUp()},t.prototype.cancel=function(e){var t;return(t=$(e.target)).closest(this.selectors.comment).find(this.selectors.commentBody).removeClass(this.classes.hidden),t.closest(this.selectors.injectTarget).addClass(this.classes.hidden).empty()},t.prototype.validate=function(e){return""!==e},t.prototype.insertPartial=function(e,t){return Market.DOMUtils.InsertPartial(e,{container:t.find(this.selectors.injectTarget),loadingClass:this.classes.loading,complete:(i=this,function(){return t.find(i.selectors.editField).focus()})});var i},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.CommentListLegacy=function(){function t(){var t;this.cancel=e(this.cancel,this),this.markSuccess=e(this.markSuccess,this),this.flagFetchForm=e(this.flagFetchForm,this),this.editError=e(this.editError,this),this.editSuccess=e(this.editSuccess,this),this.editSubmit=e(this.editSubmit,this),this.editFetchForm=e(this.editFetchForm,this),this.newSuccess=e(this.newSuccess,this),this.newBefore=e(this.newBefore,this),$(".js-discussion").exposer({destroyParent:!0,exposeeClass:"-hidden"}),t=$(document),this.escaping=Market.Helpers.FormEscaping,t.on("ajax:before",this.selectors.newReplyForm,this.newBefore),t.on("ajax:success",this.selectors.newReplyForm,this.newSuccess),t.on("ajax:error",this.selectors.newReplyForm,this.newError),t.on("ajax:complete",this.selectors.newReplyForm,this.escaping.onCompleteCleanup(this.selectors.newReplyField)),t.on("click",this.selectors.editLink,this.editFetchForm),t.on("ajax:before",this.selectors.editForm,this.editSubmit),t.on("ajax:success",this.selectors.editForm,this.editSuccess),t.on("ajax:error",this.selectors.editForm,this.editError),t.on("ajax:complete",this.selectors.editForm,this.escaping.onCompleteCleanup(this.selectors.editField)),t.on("click",this.selectors.flagLink,this.flagFetchForm),t.on("ajax:success",this.selectors.markCommentForm,this.markSuccess),t.on("click",this.selectors.cancelButton,this.cancel),$(this.selectors.newReplyField).autosize(),Market.Helpers.warnOnLeave()}return t.prototype.classes={hidden:"is-hidden",loading:"is-loading",newReplyLoading:"comment__new-reply--is-loading",markRead:"e-icon -icon-circle-empty",markUnread:"e-icon -icon-circle-full"},t.prototype.selectors={cancelButton:".complaint-form__cancel, .js-comment-cancel",discussion:".js-discussion",comment:".js-comment",commentContent:".js-comment-content",commentTools:".js-comment-tools",editField:"textarea",editForm:".js-edit-comment-form",editLink:".js-comment-edit",flagLink:".js-post-flag",markCommentForm:".js-comment-mark",markButton:".js-post-mark",injectTarget:".js-inject-target",newReply:".js-comment-new-reply",newReplyField:".js-comment-new-reply-field",newReplyForm:".js-comment-reply-form form",replyForm:".js-comment-reply-form",userHTML:".user-html",commentFilter:"#filter"},t.prototype.newBefore=function(e){var t,i,n;return n=(i=(t=$(e.target)).find(this.selectors.newReplyField)).val(),!!this.validate(n)&&(this.escaping.escapeInHiddenCopyAndDisable(t,i,"base64_content"),t.closest(this.selectors.replyForm).addClass(this.classes.newReplyLoading))},t.prototype.newSuccess=function(e,t){var i,n;return"ok"===t.status?((i=$(e.target)).closest(this.selectors.replyForm).removeClass(this.classes.newReplyLoading),i.find(this.selectors.newReplyField).val("").blur().trigger("autosize.resize"),n=$(t.partial).insertBefore(i.closest(this.selectors.newReply)),viewloader.execute(Views,n)):"error"===t.status?window.location.href=t.redirect_to:void 0},t.prototype.newError=function(e){return e.target.submit()},t.prototype.editFetchForm=function(e){var t;return e.preventDefault(),(t=$(e.currentTarget).closest(this.selectors.comment)).find(this.selectors.userHTML).addClass(this.classes.hidden),this.insertPartial(e.currentTarget.href,t)},t.prototype.editSubmit=function(e){var t,i,n,s,r;return i=(t=(s=(n=$(e.target)).find(this.selectors.editField)).closest(this.selectors.comment)).find(this.selectors.commentBody),r=s.val(),!!this.validate(r)&&(i.data("old",i.html()),this.escaping.escapeInHiddenCopyAndDisable(n,s,"base64_content"),s.closest(this.selectors.injectTarget).addClass(this.classes.hidden),t.find(this.selectors.commentContent).addClass(this.classes.loading),t.find(this.selectors.commentTools).addClass(this.classes.hidden))},t.prototype.editSuccess=function(e,t){var i,n,s;return n=(i=(s=$(e.target)).closest(this.selectors.comment)).find(this.selectors.userHTML),"ok"===t.status?(i.find(this.selectors.commentTools).removeClass(this.classes.hidden),i.find(this.selectors.commentContent).removeClass(this.classes.loading),i.find(this.selectors.injectTarget).empty().removeClass(this.classes.hidden),n.html(t.html).removeClass(this.classes.hidden)):"error"===t.status?s.trigger("ajax:error",[null,null,t.error]):void 0},t.prototype.editError=function(e,t,i,n){var s,r,a;return a="string"==typeof n?n:"",(r=(s=$(e.target).closest(this.selectors.comment)).find(this.selectors.userHTML)).addClass(this.classes.hidden).html(r.data("old")),s.find(this.selectors.commentContent).removeClass(this.classes.loading),s.find(this.selectors.commentTools).removeClass(this.classes.hidden),s.find(this.selectors.injectTarget).prepend("<strong class='comment-error'>Your comment was not updated. "+a+"</strong>").removeClass(this.classes.hidden)},t.prototype.flagFetchForm=function(e){var t;return e.preventDefault(),t=$(e.currentTarget).closest(this.selectors.comment),this.insertPartial(e.currentTarget.href,t),t.find(this.selectors.userHTML).removeClass(this.classes.hidden)},t.prototype.markSuccess=function(e,t){var i,n;if(i=$(e.target).find(this.selectors.markButton),t.new_title!==i.parent().attr("title")&&(i.toggleClass(this.classes.markRead+" "+this.classes.markUnread),i.parent().attr("title",t.new_title)),"unread"===(n=$(this.selectors.commentFilter).val())||"unread-buyer"===n)return i.closest(this.selectors.discussion).slideUp()},t.prototype.cancel=function(e){var t;return(t=$(e.target)).closest(this.selectors.comment).find(this.selectors.userHTML).removeClass(this.classes.hidden),t.closest(this.selectors.injectTarget).empty()},t.prototype.validate=function(e){return""!==e},t.prototype.insertPartial=function(e,t){return Market.DOMUtils.InsertPartial(e,{container:t.find(this.selectors.injectTarget),loadingClass:this.classes.loading,complete:(i=this,function(){return t.find(i.selectors.editField).focus()})});var i},t}()}.call(this),Views.CommentsControls=class{constructor(e){e.on("change",(function(e){const t=$(e.target).val();window.location.href=t}))}},function(){Views.CondenseItemInfoPanel=function(){function e(e){var t,i,n,s,r,a;r=30,e.find(".js-item-togglable-content"),s=(n=e.find(".js-meta-attributes-toggle")).find("a"),i=e.find(".js-condense-item-page-info-panel--documentation"),t=e.find(".js-condense-item-page-info-panel--created-at"),e.hasClass("has-toggle")&&(a=i.length>0?i.position().top+i.height()+r:t.position().top+t.height()+r,e.css("height",a+"px"),s.on("click",(function(t){return t.preventDefault(),e.toggleClass("is-expanded"),e.toggleClass("is-collapsed"),n.toggleClass("is-expanded"),e.hasClass("is-expanded")?e.css("height","auto"):(e.css("height",a+"px"),window.scrollTo(0,e.offset().top-100))})))}return e}()}.call(this),function(){function e(){const e=615;document.body.scrollTop>e?t.fadeIn(500):t.fadeOut(500)}const t=$("#site-header-cta");if(!t)return window.removeEventListener("scroll",e),!1;window.addEventListener("scroll",e)}();const loadedResources={};Market.Helpers.loadOnce=function(e){const t=JSON.stringify(e);return loadedResources[t]||(loadedResources[t]=new $.Deferred,yepnope({load:e,complete:loadedResources[t].resolve})),loadedResources[t]},function(){Views.DatePicker=function(){function e(e){var t;this.$el=e,this.dom={$container:this.$el,$humanDate:this.$el.find(".js-date-picker__human-date"),$serverDate:this.$el.find(".js-date-picker__server-date")},Market.Helpers.loadOnce([this.dom.$container.data("jsPath"),this.dom.$container.data("cssPath")]).done((t=this,function(){return t.initialize()}))}return e.prototype.initialize=function(){return this.earliestDate=moment(this.dom.$container.data("earliest-date")),this.latestDate=moment(this.dom.$container.data("latest-date")),this.constructDatePicker(this.dom.$humanDate,this.dom.$humanDate,this.dom.$serverDate)},e.prototype.constructDatePicker=function(e,t,i){var n;return e.DatePicker({mode:"single",date:t.val(),current:t.val(),calendars:1,starts:1,position:"bottom",prev:"<",next:">",onChange:(n=this,function(s){return t.val(n.humanFormat(s)),i.val(n.serverFormat(s)),e.DatePickerHide()})}),e.on("click",(function(){return e.DatePickerShow()}))},e.prototype.humanFormat=function(e){var t;return(t=this.dom.$container.data("human-format"))||(t="DD MMM YYYY"),moment(e).format(t)},e.prototype.serverFormat=function(e){var t;return(t=this.dom.$container.data("server-format"))||(t="YYYY-MM-DD"),moment(e).format(t)},e.prototype.setDate=function(e){return this.dom.$humanDate.val(this.humanFormat(e)),this.dom.$serverDate.val(this.serverFormat(e))},e}()}.call(this),function(){Views.DateRangePicker=function(){function e(e){var t;this.$el=e,this.$datePickerStartDate=this.$el.find(".js-start-date"),this.$humanStartDate=this.$datePickerStartDate.find(".js-human-date"),this.$serverStartDate=this.$datePickerStartDate.find(".js-server-date"),this.$datePickerEndDate=this.$el.find(".js-end-date"),this.$humanEndDate=this.$datePickerEndDate.find(".js-human-date"),this.$serverEndDate=this.$datePickerEndDate.find(".js-server-date"),yepnope({load:[this.$el.data("jsPath"),this.$el.data("cssPath")],complete:(t=this,function(){return t.initialize()})})}return e.prototype.initialize=function(){return this.earliestDate=moment(this.$el.data("earliest-date")),this.latestDate=moment(this.$el.data("latest-date")),this.constructDatePicker(this.$datePickerStartDate,this.$humanStartDate,this.$serverStartDate),this.constructDatePicker(this.$datePickerEndDate,this.$humanEndDate,this.$serverEndDate)},e.prototype.constructDatePicker=function(e,t,i){var n;return e.DatePicker({mode:"single",date:t.val(),current:t.val(),selectableDates:[this.earliestDate,this.latestDate],calendars:1,starts:1,position:"bottom",prev:"<",next:">",onChange:(n=this,function(s){return t.val(n.humanFormat(s)),i.val(n.serverFormat(s)),e.DatePickerHide(),n.ensureDatesAreChronological()})}),e.on("click",(function(){return e.DatePickerShow()}))},e.prototype.humanFormat=function(e){return moment(e).format("DD MMM YYYY")},e.prototype.serverFormat=function(e){return moment(e).format("YYYY-MM-DD")},e.prototype.ensureDatesAreChronological=function(){var e,t;if(t=moment(this.$serverStartDate.val()),e=moment(this.$serverEndDate.val()),t.isAfter(e))return this.setStartDate(e),this.setEndDate(t)},e.prototype.setStartDate=function(e){return this.$datePickerStartDate.DatePickerSetDate(e),this.$humanStartDate.val(this.humanFormat(e)),this.$serverStartDate.val(this.serverFormat(e))},e.prototype.setEndDate=function(e){return this.$datePickerEndDate.DatePickerSetDate(e),this.$humanEndDate.val(this.humanFormat(e)),this.$serverEndDate.val(this.serverFormat(e))},e}()}.call(this),function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.validate"],e):e(jQuery)}((function(e){!function(){function t(e){return e.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-\u201c\u201d\u2019]*/g,"")}e.validator.addMethod("maxWords",(function(e,i,n){return this.optional(i)||t(e).match(/\b\w+\b/g).length<=n}),e.validator.format("Please enter {0} words or less.")),e.validator.addMethod("minWords",(function(e,i,n){return this.optional(i)||t(e).match(/\b\w+\b/g).length>=n}),e.validator.format("Please enter at least {0} words.")),e.validator.addMethod("rangeWords",(function(e,i,n){var s=t(e),r=/\b\w+\b/g;return this.optional(i)||s.match(r).length>=n[0]&&s.match(r).length<=n[1]}),e.validator.format("Please enter between {0} and {1} words."))}(),e.validator.addMethod("accept",(function(t,i,n){var s,r="string"==typeof n?n.replace(/\s/g,"").replace(/,/g,"|"):"image/*",a=this.optional(i);if(a)return a;if("file"===e(i).attr("type")&&(r=r.replace(/\*/g,".*"),i.files&&i.files.length))for(s=0;s<i.files.length;s++)if(!i.files[s].type.match(new RegExp(".?("+r+")$","i")))return!1;return!0}),e.validator.format("Please enter a value with a valid mimetype.")),e.validator.addMethod("alphanumeric",(function(e,t){return this.optional(t)||/^\w+$/i.test(e)}),"Letters, numbers, and underscores only please"),e.validator.addMethod("bankaccountNL",(function(e,t){if(this.optional(t))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(e))return!1;var i,n=e.replace(/ /g,""),s=0,r=n.length;for(i=0;i<r;i++)s+=(r-i)*n.substring(i,i+1);return s%11==0}),"Please specify a valid bank account number"),e.validator.addMethod("bankorgiroaccountNL",(function(t,i){return this.optional(i)||e.validator.methods.bankaccountNL.call(this,t,i)||e.validator.methods.giroaccountNL.call(this,t,i)}),"Please specify a valid bank or giro account number"),e.validator.addMethod("bic",(function(e,t){return this.optional(t)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-2])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/.test(e)}),"Please specify a valid BIC code"),e.validator.addMethod("cifES",(function(e){"use strict";var t,i,n,s,r,a,o=[];if(!(e=e.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)"))return!1;for(n=0;n<9;n++)o[n]=parseInt(e.charAt(n),10);for(i=o[2]+o[4]+o[6],s=1;s<8;s+=2)a=(r=(2*o[s]).toString()).charAt(1),i+=parseInt(r.charAt(0),10)+(""===a?0:parseInt(a,10));return!!/^[ABCDEFGHJNPQRSUVW]{1}/.test(e)&&(i+="",e+=t=10-parseInt(i.charAt(i.length-1),10),o[8].toString()===String.fromCharCode(64+t)||o[8].toString()===e.charAt(e.length-1))}),"Please specify a valid CIF number."),e.validator.addMethod("creditcardtypes",(function(e,t,i){if(/[^0-9\-]+/.test(e))return!1;e=e.replace(/\D/g,"");var n=0;return i.mastercard&&(n|=1),i.visa&&(n|=2),i.amex&&(n|=4),i.dinersclub&&(n|=8),i.enroute&&(n|=16),i.discover&&(n|=32),i.jcb&&(n|=64),i.unknown&&(n|=128),i.all&&(n=255),1&n&&/^(5[12345])/.test(e)||2&n&&/^(4)/.test(e)?16===e.length:4&n&&/^(3[47])/.test(e)?15===e.length:8&n&&/^(3(0[012345]|[68]))/.test(e)?14===e.length:16&n&&/^(2(014|149))/.test(e)?15===e.length:32&n&&/^(6011)/.test(e)||64&n&&/^(3)/.test(e)?16===e.length:64&n&&/^(2131|1800)/.test(e)?15===e.length:!!(128&n)}),"Please enter a valid credit card number."),e.validator.addMethod("currency",(function(e,t,i){var n,s="string"==typeof i,r=s?i:i[0],a=!!s||i[1];return r=r.replace(/,/g,""),n="^["+(r=a?r+"]":r+"]?")+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$",n=new RegExp(n),this.optional(t)||n.test(e)}),"Please specify a valid currency"),e.validator.addMethod("dateFA",(function(e,t){return this.optional(t)||/^[1-4]\d{3}\/((0?[1-6]\/((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))\/(30|([1-2][0-9])|(0?[1-9]))))$/.test(e)}),"Please enter a correct date"),e.validator.addMethod("dateITA",(function(e,t){var i,n,s,r,a,o=!1;return/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e)?(i=e.split("/"),n=parseInt(i[0],10),s=parseInt(i[1],10),r=parseInt(i[2],10),o=(a=new Date(r,s-1,n,12,0,0,0)).getUTCFullYear()===r&&a.getUTCMonth()===s-1&&a.getUTCDate()===n):o=!1,this.optional(t)||o}),"Please enter a correct date"),e.validator.addMethod("dateNL",(function(e,t){return this.optional(t)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(e)}),"Please enter a correct date"),e.validator.addMethod("extension",(function(e,t,i){return i="string"==typeof i?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+i+")$","i"))}),e.validator.format("Please enter a value with a valid extension.")),e.validator.addMethod("giroaccountNL",(function(e,t){return this.optional(t)||/^[0-9]{1,7}$/.test(e)}),"Please specify a valid giro account number"),e.validator.addMethod("iban",(function(e,t){if(this.optional(t))return!0;var i,n,s,r,a,o=e.replace(/ /g,"").toUpperCase(),l="",c=!0,d="";if(!/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(o))return!1;if(void 0!==(s={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",
AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"}[o.substring(0,2)])&&!new RegExp("^[A-Z]{2}\\d{2}"+s+"$","").test(o))return!1;for(i=o.substring(4,o.length)+o.substring(0,4),r=0;r<i.length;r++)"0"!==(n=i.charAt(r))&&(c=!1),c||(l+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(n));for(a=0;a<l.length;a++)d=(""+d+l.charAt(a))%97;return 1===d}),"Please specify a valid IBAN"),e.validator.addMethod("integer",(function(e,t){return this.optional(t)||/^-?\d+$/.test(e)}),"A positive or negative non-decimal number please"),e.validator.addMethod("ipv4",(function(e,t){return this.optional(t)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(e)}),"Please enter a valid IP v4 address."),e.validator.addMethod("ipv6",(function(e,t){return this.optional(t)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(e)}),"Please enter a valid IP v6 address."),e.validator.addMethod("lettersonly",(function(e,t){return this.optional(t)||/^[a-z]+$/i.test(e)}),"Letters only please"),e.validator.addMethod("letterswithbasicpunc",(function(e,t){return this.optional(t)||/^[a-z\-.,()'"\s]+$/i.test(e)}),"Letters or punctuation only please"),e.validator.addMethod("mobileNL",(function(e,t){return this.optional(t)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(e)}),"Please specify a valid mobile number"),e.validator.addMethod("mobileUK",(function(e,t){return e=e.replace(/\(|\)|\s+|-/g,""),this.optional(t)||e.length>9&&e.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/)}),"Please specify a valid mobile number"),e.validator.addMethod("nieES",(function(e){"use strict";return!!(e=e.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")&&(/^[T]{1}/.test(e)?e[8]===/^[T]{1}[A-Z0-9]{8}$/.test(e):!!/^[XYZ]{1}/.test(e)&&e[8]==="TRWAGMYFPDXBNJZSQVHLCKE".charAt(e.replace("X","0").replace("Y","1").replace("Z","2").substring(0,8)%23))}),"Please specify a valid NIE number."),e.validator.addMethod("nifES",(function(e){"use strict";return!!(e=e.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")&&(/^[0-9]{8}[A-Z]{1}$/.test(e)?"TRWAGMYFPDXBNJZSQVHLCKE".charAt(e.substring(8,0)%23)===e.charAt(8):!!/^[KLM]{1}/.test(e)&&e[8]===String.fromCharCode(64))}),"Please specify a valid NIF number."),e.validator.addMethod("nowhitespace",(function(e,t){return this.optional(t)||/^\S+$/i.test(e)}),"No white space please"),e.validator.addMethod("pattern",(function(e,t,i){return!!this.optional(t)||("string"==typeof i&&(i=new RegExp("^(?:"+i+")$")),i.test(e))}),"Invalid format."),e.validator.addMethod("phoneNL",(function(e,t){return this.optional(t)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(e)}),"Please specify a valid phone number."),e.validator.addMethod("phoneUK",(function(e,t){return e=e.replace(/\(|\)|\s+|-/g,""),this.optional(t)||e.length>9&&e.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)}),"Please specify a valid phone number"),e.validator.addMethod("phoneUS",(function(e,t){return e=e.replace(/\s+/g,""),this.optional(t)||e.length>9&&e.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/)}),"Please specify a valid phone number"),e.validator.addMethod("phonesUK",(function(e,t){return e=e.replace(/\(|\)|\s+|-/g,""),this.optional(t)||e.length>9&&e.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/)}),"Please specify a valid uk phone number"),e.validator.addMethod("postalCodeCA",(function(e,t){return this.optional(t)||/^[ABCEGHJKLMNPRSTVXY]\d[A-Z] \d[A-Z]\d$/.test(e)}),"Please specify a valid postal code"),e.validator.addMethod("postalcodeBR",(function(e,t){return this.optional(t)||/^\d{2}.\d{3}-\d{3}?$|^\d{5}-?\d{3}?$/.test(e)}),"Informe um CEP v\xe1lido."),e.validator.addMethod("postalcodeIT",(function(e,t){return this.optional(t)||/^\d{5}$/.test(e)}),"Please specify a valid postal code"),e.validator.addMethod("postalcodeNL",(function(e,t){return this.optional(t)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(e)}),"Please specify a valid postal code"),e.validator.addMethod("postcodeUK",(function(e,t){return this.optional(t)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(e)}),"Please specify a valid UK postcode"),e.validator.addMethod("require_from_group",(function(t,i,n){var s=e(n[1],i.form),r=s.eq(0),a=r.data("valid_req_grp")?r.data("valid_req_grp"):e.extend({},this),o=s.filter((function(){return a.elementValue(this)})).length>=n[0];return r.data("valid_req_grp",a),e(i).data("being_validated")||(s.data("being_validated",!0),s.each((function(){a.element(this)})),s.data("being_validated",!1)),o}),e.validator.format("Please fill at least {0} of these fields.")),e.validator.addMethod("skip_or_fill_minimum",(function(t,i,n){var s=e(n[1],i.form),r=s.eq(0),a=r.data("valid_skip")?r.data("valid_skip"):e.extend({},this),o=s.filter((function(){return a.elementValue(this)})).length,l=0===o||o>=n[0];return r.data("valid_skip",a),e(i).data("being_validated")||(s.data("being_validated",!0),s.each((function(){a.element(this)})),s.data("being_validated",!1)),l}),e.validator.format("Please either skip these fields or fill at least {0} of them.")),jQuery.validator.addMethod("stateUS",(function(e,t,i){var n,s=void 0===i,r=!s&&void 0!==i.caseSensitive&&i.caseSensitive,a=!s&&void 0!==i.includeTerritories&&i.includeTerritories,o=!s&&void 0!==i.includeMilitary&&i.includeMilitary;return n=a||o?a&&o?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":a?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$",n=r?new RegExp(n):new RegExp(n,"i"),this.optional(t)||n.test(e)}),"Please specify a valid state"),e.validator.addMethod("strippedminlength",(function(t,i,n){return e(t).text().length>=n}),e.validator.format("Please enter at least {0} characters")),e.validator.addMethod("time",(function(e,t){return this.optional(t)||/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(e)}),"Please enter a valid time, between 00:00 and 23:59"),e.validator.addMethod("time12h",(function(e,t){return this.optional(t)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(e)}),"Please enter a valid time in 12-hour am/pm format"),e.validator.addMethod("url2",(function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}),e.validator.messages.url),e.validator.addMethod("vinUS",(function(e){if(17!==e.length)return!1;var t,i,n,s,r,a,o=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],l=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],c=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],d=0;for(t=0;t<17;t++){if(s=c[t],n=e.slice(t,t+1),8===t&&(a=n),isNaN(n)){for(i=0;i<o.length;i++)if(n.toUpperCase()===o[i]){n=l[i],n*=s,isNaN(a)&&8===i&&(a=o[i]);break}}else n*=s;d+=n}return 10===(r=d%11)&&(r="X"),r===a}),"The specified vehicle identification number (VIN) is invalid."),e.validator.addMethod("zipcodeUS",(function(e,t){return this.optional(t)||/^\d{5}(-\d{4})?$/.test(e)}),"The specified US ZIP Code is invalid"),e.validator.addMethod("ziprange",(function(e,t){return this.optional(t)||/^90[2-5]\d\{2\}-\d{4}$/.test(e)}),"Your ZIP-code must be in the range 902xx-xxxx to 905xx-xxxx")})),Market.DOMUtils.FormValidation={addError(e,t){const i=e.closest(".e-form__group"),n=i.find(".e-form__response");if(n.length)n.html(t);else{const e=i.find(".e-form__input");_.isObject(t)?(t.addClass("e-form__response"),e.after(t)):e.after($(`<div class='e-form__response'>${t}</div>`))}},removeError(e){e.closest(".e-form__group").find(".e-form__response").remove()},setFieldState(e,t){const i=e.parent().next(".e-form__response");e.attr("data-status",t),i.attr("data-status",t)}},function(){Market.Validations.declineRefundRequest=function(e){return this.dom={$form:e,$notes:e.find(".js-decline-refund-request__notes")},this.dom.$form.validate({errorClass:"is-error",errorElement:"div",rules:{"buying_refund_requests_decline_request_form[notes]":{required:!0}},onfocusout:function(e){return this.element(e)},errorPlacement:function(e,t){return Market.DOMUtils.FormValidation.addError(t,e)},messages:{"buying_refund_requests_decline_request_form[notes]":"Decline reason is required"}})}}.call(this),Views.DeclineRefundRequest=class{constructor(e){this.$el=e,this.dom={$form:this.$el},this._setupForm(),this.dom.$form.attr("data-ready","true")}_setupForm(){Market.Validations.declineRefundRequest(this.dom.$form)}},Views.DefaultMarketingConsent=class{constructor(e){this.$el=e,$("[id='Your Location']").change((e=>{const t=$(e.target);$("#user_confirmer_subscribed_to_envato_newsletter")[0].checked="true"===t.find("option:selected").attr("data-country-marketing-consent")}))}},Views.DownloadPreviewButtonTracking=class{constructor(e){e.on("click",this.handleClick.bind(this))}handleClick(e){$(document).trigger("googleAnalytics:downloadPreviewButtonTracking")}},Views.DownloadVideoPreviewButtonTracking=class{constructor(e){e.on("click",this.handleClick.bind(this))}handleClick(e){$(document).trigger("googleAnalytics:downloadVideoPreviewButtonTracking")}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.Downloads=function(){function t(t){this.initiateSuggestionListener=e(this.initiateSuggestionListener,this),this.showSuggestions=e(this.showSuggestions,this),this.handleClearSearch=e(this.handleClearSearch,this),this.handleInput=e(this.handleInput,this),this.handleCheckBoxChange=e(this.handleCheckBoxChange,this),this.dom={$notify_on_update_checkbox:t.find(".notify_on_update"),$download__search__term:t.find(".download__search__term"),$clear_search:$(".download__search__clear")},this.dom.$notify_on_update_checkbox.on("change",this.handleCheckBoxChange),this.dom.$download__search__term.on("input",this.handleInput),this.dom.$clear_search.on("click",this.handleClearSearch),this.dom.$download__search__term.focus(),this.dom.$download__search__term.val()&&this.dom.$clear_search.show()}return t.prototype.handleCheckBoxChange=function(e){var t,i;return(i=$(e.target)).prop("disabled",!0),i.parent().addClass("ajaxing"),t=function(){return i.prop("disabled",!1),i.parent().removeClass("ajaxing")},$.ajax({type:"PUT",url:i.data("put-url"),data:JSON.stringify({notify_on_update:i.prop("checked")}),contentType:"application/json",dataType:"json",success:t,error:t})},t.prototype.handleInput=function(e){var t;return $(".download__search__clear").show(),$(".download__search__suggestions").hide(),(t=e.target.value).length>3?(this.showSuggestions(e),this.initiateSuggestionListener()):0===t.length?$(".download__search__clear").hide():void 0},t.prototype.handleClearSearch=function(){return this.dom.$download__search__term.val(""),$(".download__search__clear").hide(),$(".download__search__suggestions").hide()},t.prototype.showSuggestions=function(e){var t,i,n;if(n=e.target.value.toLowerCase(),i=(t=$(e.target).data("suggestions").filter((function(e){return e.some((function(e){return e.toLowerCase().includes(n)}))}))).map((function(e){return'<li class="download__search__suggestions__suggestion"><a href="#" aria-label="click to populate search term" data-name="NAME"> <span style="font-weight: bold;">NAME</span> in <span>CATEGORY</span> </a> </li>'.replace(/NAME/g,e[0]).replace("CATEGORY",e[1])})),$(".download__search__suggestions").html(i),t.length>0)return $(".download__search__suggestions").show()},t.prototype.initiateSuggestionListener=function(){return $(".download__search__suggestions__suggestion > a").click((function(e){var t;return e.preventDefault(),t=$(e.target).parent().is("a")?$(e.target).parent("a").data("name"):$(e.target).data("name"),$(".download__search__term").val(t),$(".download__search__suggestions").hide(),$("form.download__search").submit()}))},t}()}.call(this),function(e){function t(t,n,s){var r=this;return this.on("click.pjax",t,(function(t){var a=e.extend({},p(n,s));a.container||(a.container=e(this).attr("data-pjax")||r),i(t,a)}))}function i(t,i,n){n=p(i,n);var r=t.currentTarget;if("A"!==r.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol!==r.protocol||location.hostname!==r.hostname||r.href.indexOf("#")>-1&&u(r)==u(location)||t.isDefaultPrevented())){var a={url:r.href,container:e(r).attr("data-pjax"),target:r},o=e.extend({},a,n),l=e.Event("pjax:click");e(r).trigger(l,[o]),l.isDefaultPrevented()||(s(o),t.preventDefault(),e(r).trigger("pjax:clicked",[o]))}}function n(t,i,n){n=p(i,n);var r=t.currentTarget;if("FORM"!==r.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var a={type:r.method.toUpperCase(),url:r.action,container:e(r).attr("data-pjax"),target:r};if("GET"!==a.type&&void 0!==window.FormData)a.data=new FormData(r),a.processData=!1,a.contentType=!1;else{if(e(r).find(":file").length)return;a.data=e(r).serializeArray()}s(e.extend({},a,n)),t.preventDefault()}function s(t){function i(t,i,n){n||(n={}),n.relatedTarget=o;var s=e.Event(t,n);return u.trigger(s,i),!s.isDefaultPrevented()}t=e.extend(!0,{},e.ajaxSettings,s.defaults,t),e.isFunction(t.url)&&(t.url=t.url());var n,r,o=t.target,l=h(t.url).hash,u=t.context=f(t.container);return t.data||(t.data={}),e.isArray(t.data)?t.data.push({name:"_pjax",value:u.selector}):t.data._pjax=u.selector,t.beforeSend=function(e,s){if("GET"!==s.type&&(s.timeout=0),e.setRequestHeader("X-PJAX","true"),e.setRequestHeader("X-PJAX-Container",u.selector),!i("pjax:beforeSend",[e,s]))return!1;s.timeout>0&&(n=setTimeout((function(){i("pjax:timeout",[e,t])&&e.abort("timeout")}),s.timeout),s.timeout=0),t.requestUrl=h(s.url).href},t.complete=function(e,s){n&&clearTimeout(n),i("pjax:complete",[e,s,t]),i("pjax:end",[e,t])},t.error=function(e,n,s){var r=v("",e,t),o=i("pjax:error",[e,n,s,t]);"GET"==t.type&&"abort"!==n&&o&&a(r.url)},t.success=function(n,r,o){var d=s.state,p="function"==typeof e.pjax.defaults.version?e.pjax.defaults.version():e.pjax.defaults.version,f=o.getResponseHeader("X-PJAX-Version"),m=v(n,o,t);if(p&&f&&p!==f)a(m.url);else if(m.contents){s.state={id:t.id||c(),url:m.url,title:m.title,container:u.selector,fragment:t.fragment,timeout:t.timeout},(t.push||t.replace)&&window.history.replaceState(s.state,m.title,m.url);try{document.activeElement.blur()}catch(e){}m.title&&(document.title=m.title),i("pjax:beforeReplace",[m.contents,t],{state:s.state,previousState:d}),u.html(m.contents);var g=u.find("input[autofocus], textarea[autofocus]").last()[0];if(g&&document.activeElement!==g&&g.focus(),y(m.scripts),"number"==typeof t.scrollTo&&e(window).scrollTop(t.scrollTo),""!==l){var b=h(m.url);b.hash=l,s.state.url=b.href,window.history.replaceState(s.state,m.title,b.href);var _=document.getElementById(b.hash.slice(1));_&&e(window).scrollTop(e(_).offset().top)}i("pjax:success",[n,r,o,t])}else a(m.url)},s.state||(s.state={id:c(),url:window.location.href,title:document.title,container:u.selector,fragment:t.fragment,timeout:t.timeout},window.history.replaceState(s.state,document.title)),(r=s.xhr)&&r.readyState<4&&(r.onreadystatechange=e.noop,r.abort()),s.options=t,(r=s.xhr=e.ajax(t)).readyState>0&&(t.push&&!t.replace&&(b(s.state.id,u.clone().contents()),window.history.pushState(null,"",d(t.requestUrl))),i("pjax:start",[r,t]),i("pjax:send",[r,t])),s.xhr}function r(t,i){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return s(e.extend(n,p(t,i)))}function a(e){window.history.replaceState(null,"",s.state.url),window.location.replace(e)}function o(t){var i=s.state,n=t.state;if(n&&n.container){if(x&&S==n.url)return;if(s.state&&s.state.id===n.id)return;var r=e(n.container);if(r.length){var o,l=P[n.id];s.state&&_(o=s.state.id<n.id?"forward":"back",s.state.id,r.clone().contents());var c=e.Event("pjax:popstate",{state:n,direction:o});r.trigger(c);var d={id:n.id,url:n.url,container:r,push:!1,fragment:n.fragment,timeout:n.timeout,scrollTo:!1};if(l){r.trigger("pjax:start",[null,d]),s.state=n,n.title&&(document.title=n.title);var h=e.Event("pjax:beforeReplace",{state:n,previousState:i});r.trigger(h,[l,d]),r.html(l),r.trigger("pjax:end",[null,d])}else s(d);r[0].offsetHeight}else a(location.href)}x=!1}function l(t){var i=e.isFunction(t.url)?t.url():t.url,n=t.type?t.type.toUpperCase():"GET",s=e("<form>",{method:"GET"===n?"GET":"POST",action:i,style:"display:none"});"GET"!==n&&"POST"!==n&&s.append(e("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var r=t.data;if("string"==typeof r)e.each(r.split("&"),(function(t,i){var n=i.split("=");s.append(e("<input>",{type:"hidden",name:n[0],value:n[1]}))}));else if(e.isArray(r))e.each(r,(function(t,i){s.append(e("<input>",{type:"hidden",name:i.name,value:i.value}))}));else if("object"==typeof r)for(key in r)s.append(e("<input>",{type:"hidden",name:key,value:r[key]}));e(document.body).append(s),s.submit()}function c(){return(new Date).getTime()}function d(e){return e.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function h(e){var t=document.createElement("a");return t.href=e,t}function u(e){return e.href.replace(/#.*/,"")}function p(t,i){return t&&i?i.container=t:i=e.isPlainObject(t)?t:{container:t},i.container&&(i.container=f(i.container)),i}function f(t){if((t=e(t)).length){if(""!==t.selector&&t.context===document)return t;if(t.attr("id"))return e("#"+t.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+t.selector}function m(e,t){return e.filter(t).add(e.find(t))}function g(t){return e.parseHTML(t,document,!0)}function v(t,i,n){var s={},r=/<html/i.test(t);if(s.url=d(i.getResponseHeader("X-PJAX-URL")||n.requestUrl),r)var a=e(g(t.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),o=e(g(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else a=o=e(g(t));if(0===o.length)return s;if(s.title=m(a,"title").last().text(),n.fragment){if("body"===n.fragment)var l=o;else l=m(o,n.fragment).first();l.length&&(s.contents="body"===n.fragment?l:l.contents(),s.title||(s.title=l.attr("title")||l.data("title")))}else r||(s.contents=o);return s.contents&&(s.contents=s.contents.not((function(){return e(this).is("title")})),s.contents.find("title").remove(),s.scripts=m(s.contents,"script[src]").remove(),s.contents=s.contents.not(s.scripts)),s.title&&(s.title=e.trim(s.title)),s}function y(t){if(t){var i=e("script[src]");t.each((function(){var t=this.src;if(!i.filter((function(){return this.src===t})).length){var n=document.createElement("script"),s=e(this).attr("type");s&&(n.type=s),n.src=e(this).attr("src"),document.head.appendChild(n)}}))}}function b(e,t){P[e]=t,E.push(e),$(T,0),$(E,s.defaults.maxCacheLength)}function _(e,t,i){var n,r;P[t]=i,"forward"===e?(n=E,r=T):(n=T,r=E),n.push(t),(t=r.pop())&&delete P[t],$(n,s.defaults.maxCacheLength)}function $(e,t){for(;e.length>t;)delete P[e.shift()]}function k(){return e("meta").filter((function(){var t=e(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()})).attr("content")}function w(){e.fn.pjax=t,e.pjax=s,e.pjax.enable=e.noop,e.pjax.disable=C,e.pjax.click=i,e.pjax.submit=n,e.pjax.reload=r,e.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:k},e(window).on("popstate.pjax",o)}function C(){e.fn.pjax=function(){return this},e.pjax=l,e.pjax.enable=w,e.pjax.disable=e.noop,e.pjax.click=e.noop,e.pjax.submit=e.noop,e.pjax.reload=function(){window.location.reload()},e(window).off("popstate.pjax",o)}var x=!0,S=window.location.href,A=window.history.state;A&&A.container&&(s.state=A),"state"in window.history&&(x=!1);var P={},T=[],E=[];e.inArray("state",e.event.props)<0&&e.event.props.push("state"),e.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),e.support.pjax?w():C()}(jQuery),Views.EarningsData=class{constructor(e){this.pjaxOptions={timeout:1e4,scrollTo:!1},this.el=e,this.canvas=this.el.find(".js-graph__canvas")[0],this.$errorDiv=this.el.find(".js-graph__error-container"),this.$regionList=this.el.find(".js-minimap__region-list"),this.pjaxContainer=this.el.find(".js-pjax-container"),this.pjaxTable(),yepnope({load:this.el.data("jsPath"),complete:function(){this.renderGraph(),this.togglePreloader(!1),this.updateRegionList()}.bind(this)})}pjaxTable(){$(document).on({"pjax:start":()=>{this.toggleError(!1)},"pjax:end":()=>{viewloader.execute(Views,this.el),this.renderGraph(),this.updateRegionList()},"pjax:send":()=>{this.togglePreloader(!0)},"pjax:complete":()=>{this.togglePreloader(!1)},"pjax:error":()=>{this.toggleError(!0)}}),$(document).pjax(".js-pjax-container a",".js-pjax-container",this.pjaxOptions)}toggleError(e){this.el.toggleClass("is-error",e)}togglePreloader(e){this.el.toggleClass("is-preloading",e)}renderGraph(){let e;try{e=JSON.parse($("#graphdata").html())}catch(e){return void this.toggleError(!0)}this.chart&&this.chart.destroy(),this.chart=new Chart(this.canvas.getContext("2d"),{data:e,type:"line",options:{clip:!1,animation:{easing:"easeInOutCirc"},elements:{line:{borderWidth:2,tension:.13},point:{radius:4,borderWidth:1}},scales:{y:{min:0,ticks:{callback:e=>parseFloat(e).toLocaleString("en-EN",{style:"currency",currency:"USD",minimumFractionDigits:2})}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgb(69, 69, 69)",cornerRadius:3,padding:8,mode:"index",intersect:!1,displayColors:!1,callbacks:{title:()=>"",label:e=>parseFloat(e.parsed.y).toLocaleString("en-EN",{style:"currency",currency:"USD",minimumFractionDigits:2})}}}}})}updateRegionList(){const e=$(".js-minimap__fetched-regions").clone().children();this.$regionList.empty(),e.length&&this.$regionList.append(e),this._showEmptyState()}_getMaxValue(e){const t=[];return _.each(e,(e=>t.push(_.max(e.data)))),_.max(t)}_showEmptyState(){const e=this.pjaxContainer.find(".js-minimap__empty-contents").clone();e.addClass("is-visible"),this.$regionList.append(e)}},Views.EarningsSummary=class{constructor(e){this.$el=e,this.dom={$statusMessage:this.$el.find(".js-earnings__status-message"),$statusMessageBox:this.$el.find(".js-earnings__status-message-box"),$summaryContent:this.$el.find(".js-statement-summary__content"),$authorFunds:this.$el.find(".js-earnings__author-funds"),$authorFundsOperator:this.$el.find(".js-statement-summary-author-funds__operator"),$earnings:this.$el.find(".js-earnings__earnings"),$earningsWrapper:this.$el.find(".js-earnings__earnings-wrapper"),$earningsOperator:this.$el.find(".js-statement-summary-earnings__operator"),$salesTax:this.$el.find(".js-earnings__sales-tax"),$salesTaxCell:this.$el.find(".js-earnings__sales-tax-cell"),$salesTaxWrapper:this.$el.find(".js-earnings__sales-tax-wrapper"),$salesTaxOperator:this.$el.find(".js-statement-summary-sales-tax__operator"),$taxWithheldEarnings:this.$el.find(".js-earnings__tax-withheld"),$taxWithheldOperator:this.$el.find(".js-statement-summary-tax-withheld__operator"),$taxWithheldWrapper:this.$el.find(".js-earnings__tax-withheld-wrapper"),$feesEarnings:this.$el.find(".js-earnings__fees"),$feesOperator:this.$el.find(".js-statement-summary-fees__operator"),$feesWrapper:this.$el.find(".js-earnings__fees-wrapper"),$feeTaxesCell:this.$el.find(".js-earnings__fee-taxes-cell"),$feeTaxesOnFees:this.$el.find(".js-earnings__fee-taxes"),$feeTaxesOperator:this.$el.find(".js-statement-summary-fee-taxes__operator"),$feeTaxesWrapper:this.$el.find(".js-earnings__fee-taxes-wrapper"),$preloader:this.$el.find(".js-statement-summary__preloader")},this.currency=this.dom.$summaryContent.data("currency")||"$",this.fetchEarningsSummary()}_colorClass(e){switch(e=parseFloat(e),!1){case!(e<0):return"-color-warning";case!(e>0):return"-color-success"}}fetchEarningsSummary(){const e=window.location.href;$.ajax({url:e.replace("/statement","/statement_earnings_summary"),type:"get",beforeSend:()=>{this._setStatusMessage({status:"is-pending"}),this._togglePreloader(!0)},error:()=>{this._setStatusMessage({status:"is-error",message:"Something went wrong, please refresh and try again."}),this._togglePreloader(!1)},complete:e=>{this._updateEarningsSummary(e.responseJSON)}})}_operator(e){switch(e=parseFloat(e),!1){case!(e<0):return"-";case!(e>0):return"+"}}_setStatusMessage(e){this.dom.$statusMessageBox.removeClass("is-hidden--js"),this.dom.$summaryContent.addClass("is-hidden--js"),this.dom.$statusMessageBox.addClass(e.status),e.message&&this.dom.$statusMessage.html(e.message)}_sumWithCurrency(e){return e=e.replace("-",""),`${this.currency}${e}`}_togglePreloader(e){null==e&&(e=!1),this.dom.$preloader.toggleClass("is-preloading",e)}_updateEarningsSummary(e){const t=e.earnings,i=e.sales_tax,n=e.tax_withheld,s=e.fees,r=e.author_funds,a=e.fee_taxes;this.dom.$statusMessageBox.addClass("is-hidden--js"),this.dom.$summaryContent.removeClass("is-hidden--js"),this.dom.$authorFunds.html(this._sumWithCurrency(r)),parseFloat(r)<0&&this.dom.$authorFundsOperator.html(this._operator(r)),this.dom.$earnings.html(this._sumWithCurrency(t)),this.dom.$earningsWrapper.addClass(this._colorClass(t)),this.dom.$earningsOperator.html(this._operator(t)),"0.00"!==i?(this.dom.$salesTax.html(this._sumWithCurrency(i)),this.dom.$salesTaxWrapper.addClass(this._colorClass(i)),this.dom.$salesTaxOperator.html(this._operator(i)),this.dom.$salesTaxCell.css({display:""})):this.dom.$salesTaxCell.css({display:"none"}),"0.00"!==a?(this.dom.$feeTaxesOnFees.html(this._sumWithCurrency(a)),this.dom.$feeTaxesWrapper.addClass(this._colorClass(a)),this.dom.$feeTaxesOperator.html(this._operator(a)),this.dom.$feeTaxesCell.css({display:""})):this.dom.$feeTaxesCell.css({display:"none"}),this.dom.$taxWithheldEarnings.html(this._sumWithCurrency(n)),this.dom.$taxWithheldWrapper.addClass(this._colorClass(n)),this.dom.$taxWithheldOperator.html(this._operator(n)),this.dom.$feesEarnings.html(this._sumWithCurrency(s)),this.dom.$feesWrapper.addClass(this._colorClass(s)),this.dom.$feesOperator.html(this._operator(s))}},function(e,t,i){function n(t,i){this.element=t,this.options=e.extend({},r,i),this._defaults=r,this._name=s,this.init()}var s="accordion",r={transitionSpeed:300,transitionEasing:"ease",controlElement:"[data-control]",contentElement:"[data-content]",groupElement:"[data-accordion-group]",singleOpen:!0};n.prototype.init=function(){function n(e,t,i){var n;return function(){function s(){i||e.apply(r,a),n=null}var r=this,a=arguments;n?clearTimeout(n):i&&e.apply(r,a),n=setTimeout(s,t||100)}}function s(){var e=(i.body||i.documentElement).style,t="transition";if("string"==typeof e[t])return!0;var n=["Moz","webkit","Webkit","Khtml","O","ms"];t="Transition";for(var s=0;s<n.length;s++)if("string"==typeof e[n[s]+t])return!0;return!1}function r(e){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame?requestAnimationFrame(e)||webkitRequestAnimationFrame(e)||mozRequestAnimationFrame(e):setTimeout(e,1e3/60)}function a(e,t){t?_.css({"-webkit-transition":"",transition:""}):_.css({"-webkit-transition":"max-height "+v.transitionSpeed+"ms "+v.transitionEasing,transition:"max-height "+v.transitionSpeed+"ms "+v.transitionEasing})}function o(t){var i=0;t.children().each((function(){i+=e(this).outerHeight(!0)})),t.data("oHeight",i)}function l(t,i,n,s){var r,a=t.filter(".open").find("> [data-content]"),o=a.find("[data-accordion].open > [data-content]");v.singleOpen||(o=o.not(i.siblings("[data-accordion].open").find("> [data-content]"))),r=a.add(o),t.hasClass("open")&&r.each((function(){var t=e(this).data("oHeight");switch(s){case"+":e(this).data("oHeight",t+n);break;case"-":e(this).data("oHeight",t-n);break;default:throw"updateParentHeight method needs an operation"}e(this).css("max-height",e(this).data("oHeight"))}))}function c(e){if(e.hasClass("open")){var t=e.find("> [data-content]"),i=t.find("[data-accordion].open > [data-content]"),n=t.add(i);o(n),n.css("max-height",n.data("oHeight"))}}function d(e,t){if(e.trigger("accordion.close"),c(e),t.css("max-height"),w){if($)l(e.parents("[data-accordion]"),e,t.data("oHeight"),"-");t.css(k),e.removeClass("open")}else t.css("max-height",t.data("oHeight")),t.animate(k,v.transitionSpeed),e.removeClass("open")}function h(e,t){if(e.trigger("accordion.open"),w){if(a(t),$)l(e.parents("[data-accordion]"),e,t.data("oHeight"),"+");r((function(){t.css("max-height",t.data("oHeight")),setTimeout((function(){t.css("max-height","none")}),v.transitionSpeed),t.css("height","auto")})),e.addClass("open")}else t.animate({"max-height":t.data("oHeight")},v.transitionSpeed,(function(){t.css({"max-height":"none"})})),e.addClass("open")}function u(t){t.closest(v.groupElement);var i=t.siblings("[data-accordion]").filter(".open"),n=i.find("[data-accordion]").filter(".open"),s=i.add(n);s.each((function(){var t=e(this),i=t.find(v.contentElement);d(t,i)})),s.removeClass("open")}function p(){var e=!!v.singleOpen&&y.parents(v.groupElement).length>0;o(_),e&&u(y),y.hasClass("open")?d(y,_):h(y,_)}function f(){b.on("click",p),b.on("accordion.toggle",(function(){if(v.singleOpen&&b.length>1)return!1;p()})),e(t).on("resize",n((function(){c(y)})))}function m(){_.each((function(){var t=e(this);0!=t.css("max-height")&&(t.closest("[data-accordion]").hasClass("open")?(a(t),o(t),t.css("max-height",t.data("oHeight"))):t.css({"max-height":0,overflow:"hidden"}))})),y.attr("data-accordion")||(y.attr("data-accordion",""),y.find(v.controlElement).attr("data-control",""),y.find(v.contentElement).attr("data-content",""))}var g=this,v=g.options,y=e(g.element),b=y.find("> "+v.controlElement),_=y.find("> "+v.contentElement),$=y.parents("[data-accordion]").length>0,k={"max-height":0,overflow:"hidden"},w=s();m(),f()},e.fn[s]=function(t){return this.each((function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new n(this,t))}))}}(jQuery,window,document),Views.EditItemForm=class{constructor(e){this.GA_EVENT_VALUE_OPEN_MANAGE_DISCOUNT_STEP=1,this.dom={$accordion:e.find(".js-.accordion")},this.dom.$accordion.accordion({transitionSpeed:400,singleOpen:!0}).on("accordion.open",this.handleAccordionOpen.bind(this))}handleAccordionOpen(e){
$(e.target).data("editItemDiscount")&&Market.Helpers.GoogleAnalytics.sendEvent("event","Item Edit;Discount Form","click:a",{label:"Manage discount",value:this.GA_EVENT_VALUE_OPEN_MANAGE_DISCOUNT_STEP})}},Views.EditItemLicenses=class{constructor(e){$("#extended").click((function(){this.checked?$(".js-author-pricing-warning").removeClass("is-hidden--js"):$(".js-author-pricing-warning").addClass("is-hidden--js")}))}},Views.EsSimilarItems=class{constructor(e){$.get(e.data("url"),(function(t){e.html(t),viewloader.execute(Views,e)}))}},function(){var e,t,i,n,s;s=function(e,t,i){return t?"disable"===i?e.find("input,textarea,select,button,.btn").prop("disabled",!1):e.show():"disable"===i?e.find("input,textarea,select,button,.btn").prop("disabled",!0):e.hide()},n=function(e){var t,i;return null==e&&(e="fast"),t=$(this),i=function(){var i,n;return i=$(this),n=_.contains(i.attr("data-option-value").split("|"),t.val()),s(i,n,i.data("method"),e)},$(".js-dependent-fields[data-select-id="+t.attr("id")+"]").each(i)},t=function(e){var t,i;return null==e&&(e="fast"),t=$(this),i=function(){var i,n;return n=(i=$(this)).data("checkbox-value")===t.is(":checked"),s(i,n,i.data("method"),e)},$(".js-dependent-fields[data-checkbox-id="+t.attr("id")+"]").each(i)},i=function(e){var t,i;return null==e&&(e="fast"),t=$(this),i=function(){var i,n,r;return n=$(this),i=$("input:checked[name="+t.attr("name").replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")+"]"),r=_.contains(n.attr("data-radio-value").split("|"),i.val()),s(n,r,n.data("method"),e)},$(".js-dependent-fields[data-radio-name="+t.attr("name").replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")+"]").each(i)},e=function(){var e,s,r;return(r=$("select")).not("[data-important]").each(_.partial(n,0)),r.filter("[data-important]").each(_.partial(n,0)),r.change(n),(e=$("input[type=checkbox]")).not("[data-important]").each(_.partial(t,0)),e.filter("[data-important]").each(_.partial(t,0)),e.change(t),(s=$("input[type=radio]")).not("[data-important]").each(_.partial(i,0)),s.filter("[data-important]").each(_.partial(i,0)),s.change(i)},Market.DOMUtils.DependentFields={bind:e}}.call(this),Views.ExclusivityAgreement=class{constructor(){Market.DOMUtils.DependentFields.bind()}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.FancyLabel=function(){function t(t){this.$el=t,this.activateStates=e(this.activateStates,this),this.handleRemoteEnd=e(this.handleRemoteEnd,this),this.handleRemoteStart=e(this.handleRemoteStart,this),this.handleUnhighlight=e(this.handleUnhighlight,this),this.handleHighlight=e(this.handleHighlight,this),this.handleError=e(this.handleError,this),this.updateLabel=e(this.updateLabel,this),this.handleClick=e(this.handleClick,this),this.$labels=this.$el.find(".js-fancy-label:not(.is-disabled)"),this.activateStates(),this.$labels.on({click:this.handleClick,"fancyLabel:errorPlacement":this.handleError,"fancyLabel:highlight":this.handleHighlight,"fancyLabel:unhighlight":this.handleUnhighlight,"fancyLabel:remoteStart":this.handleRemoteStart,"fancyLabel:remoteEnd":this.handleRemoteEnd}),this.$labels.addClass("is-initialized")}return t.prototype.handleClick=function(e){var t;return $(e.target).is(":text")?(t=$(e.delegateTarget),$(e.target).parent().click(),this.updateLabel(t)):$(e.target).is(":radio")?(t=$(e.delegateTarget),this.updateLabel(t)):void 0},t.prototype.updateLabel=function(e){var t,i;if(this.$labels.removeClass("is-active"),e.addClass("is-active"),(t=e.find("input[type=text]")).length&&t.get(0).focus(),(i=this.$labels.not(e).find("input[type='text']")).length)return i.val("").valid(),i.closest(".js-fancy-label").removeClass("is-valid"),i.closest(".js-fancy-label-validation").removeClass("is-valid")},t.prototype.handleError=function(e,t){var i;return(i=$(e.delegateTarget)).find(".js-fancy-label-validation-message").html(t).removeClass("is-hidden"),i.find(".js-fancy-label-hint").addClass("is-hidden")},t.prototype.handleHighlight=function(e){var t;return(t=$(e.delegateTarget)).addClass("is-invalid").removeClass("is-valid"),t.find(".js-fancy-label-validation").addClass("is-invalid").removeClass("is-valid")},t.prototype.handleUnhighlight=function(e){var t;if((t=$(e.delegateTarget)).removeClass("is-invalid").addClass("is-valid"),t.find(".js-fancy-label-validation").removeClass("is-invalid").addClass("is-valid"),t.find(".js-fancy-label-validation-message").html("").addClass("is-hidden"),t.find(".js-fancy-label-hint").removeClass("is-hidden"),!t.hasClass("is-active"))return t.removeClass("is-valid is-invalid"),t.find(".js-fancy-label-validation").removeClass("is-valid is-invalid")},t.prototype.handleRemoteStart=function(e){return $(e.delegateTarget).find(".js-fancy-label-validation").addClass("is-validating")},t.prototype.handleRemoteEnd=function(e){return $(e.delegateTarget).find(".js-fancy-label-validation").removeClass("is-validating")},t.prototype.activateStates=function(){return this.$el.find(".js-fancy-label input[type='radio']:checked").each((function(){return $(this).closest(".js-fancy-label").addClass("is-active")}))},t}()}.call(this),Views.Faqs=class{constructor(e){e.on("click",".js-faq-question, .js-faq-answer",this.handleClick.bind(this))}handleClick(e){$(".js-faq-question, .js-faq-answer").removeClass("is-highlighted"),$($(e.target).attr("href")).addClass("is-highlighted")}},Views.FilterSubmits=class{constructor(e){e.on("change",(e=>$(e.target.form).submit()))}},Views.HostedDownload=class{constructor(){this.$toggle=$(".js-purchase-code-toggle"),this.$purchaseCode=$(".js-purchase-code"),this.$toggle.on("click",this.togglePurchaseCode.bind(this)),this.labelShow=this.$toggle.data("label-show"),this.labelHide=this.$toggle.data("label-hide")}togglePurchaseCode(e){e.preventDefault(),this.$purchaseCode.toggleClass("is-visually-hidden"),this.$purchaseCode.hasClass("is-visually-hidden")?this.$toggle.text(this.labelShow):this.$toggle.text(this.labelHide)}},Views.InputGroupDisabler=class{constructor(e){this.$el=e,this.$group=this.$el.closest(".input-group"),this.$inputs=this.$group.find(":input").not(this.$el),this.$el.on("change.itemGroupDisabler",(()=>this.changed())),this.changed()}changed(){this.$el.prop("checked")?this.$inputs.prop("disabled",!0).addClass("disabled"):this.$inputs.prop("disabled",!1).removeClass("disabled")}},function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e={humanFormat:"MMMM DD, YYYY",serverFormat:"YYYY-MM-DD"},Views.ItemDiscountDatepicker=function(){function i(i){var n;this._sendGAClickEvent=t(this._sendGAClickEvent,this),this.settings=$.extend({},e,i.data("props")),this.changingToProgrammatically=!1,this.dom={humanFrom:i.find(".js-human-from")[0],humanTo:i.find(".js-human-to")[0],serverFrom:i.find(".js-server-from")[0],serverTo:i.find(".js-server-to")[0]},Market.Helpers.loadOnce([this.settings.jsPath,this.settings.cssPath]).done((n=this,function(){return n.setupFields()}))}return i.prototype.GA_EVENT_VALUE_START_DATE_SELECTION=3,i.prototype.GA_EVENT_VALUE_END_DATE_SELECTION=4,i.prototype.setupFields=function(){var e,t,i,n;return t={dayFormat:"D",time:!1,inputFormat:this.settings.humanFormat},e=$.extend({},t),this.settings.min&&(e.min=moment(this.settings.min)),this.settings.max&&(e.max=moment(this.settings.max)),this.from=rome(this.dom.humanFrom,e),i=$.extend({},t,{dateValidator:rome.val.afterEq(this.dom.humanFrom)}),this.settings.max&&(i.max=moment(this.settings.max)),this.to=rome(this.dom.humanTo,i),this.from.on("ready",(n=this,function(){return n.oldFromMoment=n.from.getMoment(),n.updateServerField(n.oldFromMoment,"From")})),this.to.on("ready",function(e){return function(){return e.oldToMoment=e.to.getMoment(),e.updateServerField(e.oldToMoment,"To")}}(this)),this.from.on("data",function(e){return function(){var t;if(!e.settings.doNotAutoUpdateTo)return t=e.from.getMoment(),e.oldFromMoment.isSame(t)?void 0:(e.updateToFieldWhenFromChanged(e.oldFromMoment,t),e.oldFromMoment=t,e._sendGAClickEvent("Choose start date",e.GA_EVENT_VALUE_START_DATE_SELECTION))}}(this)),this.from.on("data",function(e){return function(t){return e.updateServerField(t,"From")}}(this)),this.to.on("data",function(e){return function(t){var i;if(e.updateServerField(t,"To"),i=e.to.getMoment(),!e.changingToProgrammatically&&!e.oldToMoment.isSame(i,"date"))return e.oldToMoment=i,e._sendGAClickEvent("Choose end date",e.GA_EVENT_VALUE_END_DATE_SELECTION)}}(this))},i.prototype._sendGAClickEvent=function(e,t){return Market.Helpers.GoogleAnalytics.sendEvent("event","Item Edit;Discount Form","click:a",{value:t,label:e.trim()})},i.prototype.updateToFieldWhenFromChanged=function(e,t){var i,n,s;i=t.diff(e),n=(s=this.to.getMoment())?s.add(i):moment().add(i);try{return this.changingToProgrammatically=!0,this.to.setValue(n),this.to.emitValues()}finally{this.changingToProgrammatically=!1}},i.prototype.updateServerField=function(e,t){var i;return i=moment(e).format(this.settings.serverFormat),this.dom["server"+t].value=i},i}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.ItemDiscountSubmission=function(){function t(t){this._sendGAClickEvent=e(this._sendGAClickEvent,this),this._closeModal=e(this._closeModal,this),this._dismissModal=e(this._dismissModal,this),this._triggerSubmit=e(this._triggerSubmit,this),this._onCloseCallback=e(this._onCloseCallback,this),this._showModal=e(this._showModal,this),this.dom={$form:t,$saveButton:t.find('[data-action="save"]'),$modalHTML:$(".js_confirm_create_discount_modal"),$modalButtonSubmit:$('.js_confirm_create_discount_modal [data-action="create-item-discount"]'),$modalButtonCancel:$('.js_confirm_create_discount_modal [data-action="cancel-creating-item-discount"]')},this.dom.$modalButtonSubmit.on("click",this._triggerSubmit),this.dom.$modalButtonCancel.on("click",this._dismissModal),this.dom.$saveButton.on("click",this._showModal)}return t.prototype.GA_EVENT_VALUE_SAVE_BUTTON_STEP=6,t.prototype.GA_EVENT_VALUE_MODAL_BUTTONS_STEP=7,t.prototype._showModal=function(e){return e.preventDefault(),this._sendGAClickEvent(this.dom.$saveButton.val(),this.GA_EVENT_VALUE_SAVE_BUTTON_STEP),this.sendGAEventViaOnCloseCallback=!0,Market.DOMUtils.getModalInstance().show(this.dom.$modalHTML.show(),!0,{onClose:this._onCloseCallback})},t.prototype._onCloseCallback=function(){if(this.sendGAEventViaOnCloseCallback)return this._sendGAClickEvent("Close Modal",this.GA_EVENT_VALUE_MODAL_BUTTONS_STEP)},t.prototype._triggerSubmit=function(){return this._sendGAClickEvent(this.dom.$modalButtonSubmit.text(),this.GA_EVENT_VALUE_MODAL_BUTTONS_STEP),this.dom.$form.trigger("submit"),this._closeModal()},t.prototype._dismissModal=function(){return this._sendGAClickEvent(this.dom.$modalButtonCancel.text(),this.GA_EVENT_VALUE_MODAL_BUTTONS_STEP),this._closeModal()},t.prototype._closeModal=function(){return this.sendGAEventViaOnCloseCallback=!1,Market.DOMUtils.getModalInstance().close()},t.prototype._sendGAClickEvent=function(e,t){return Market.Helpers.GoogleAnalytics.sendEvent("event","Item Edit;Discount Form","click:a",{label:e.trim(),value:t})},t}()}.call(this),Views.ItemFreeFile=class{constructor(e){this.googleAnalyticsPayload=e.data("googleAnalyticsPayload"),e.on("click",this.handleClick.bind(this))}handleClick(e){$(document).trigger("googleAnalytics:freeItemDownload",this.googleAnalyticsPayload)}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.ItemHeader=function(){function t(t){this.updateAddToCartModalUrl=e(this.updateAddToCartModalUrl,this),this.updatePrice=e(this.updatePrice,this),this.handleItemVariantChange=e(this.handleItemVariantChange,this),this.dom={$price:t.find(".js-item-header__price"),$addToCart:t.find(".js-item-header__cart-button")},$(document).on("item:variantChange",this.handleItemVariantChange)}return t.prototype.handleItemVariantChange=function(e,t){return this.updatePrice(t.price),this.updateAddToCartModalUrl(t.license,t.size,t.support)},t.prototype.updatePrice=function(e){if(e)return this.dom.$price.html(e)},t.prototype.updateAddToCartModalUrl=function(e,t,i){var n,s;if(n=this.dom.$addToCart.attr("href"))return s=new URL(n,"https://localhost"),e&&s.searchParams.set("license",e),t&&s.searchParams.set("size",t),i&&s.searchParams.set("support",i),this.dom.$addToCart.attr("href",s.pathname+s.search)},t}()}.call(this),Market.DOMUtils.ItemSubmission=function(){const e=function(){const e=this.$input_elements.filter("[type=checkbox]:checked").not(this.$input_controller).length;this.$selected_text.text(e+" "+(1===e?"File":"Files")+" Selected")},t=function(){this.$control_element.slideDown("fast"),this.updateSelectedText()},i=function(){this.$control_element.slideUp("fast")},n=function(){this.$input_controller.is(":checked")&&this.$input_elements.filter("[type=checkbox]:checked").length>0?(this.$input_elements.prop("checked",!0),this.showControlPanel(),this.$toggle_select_text.text("Deselect All")):(this.$input_elements.prop("checked",!1),this.hideControlPanel(),this.$toggle_select_text.text("Select All"))},s=function(e){e.is(":checked")?(this.showControlPanel(),this.$input_elements.filter("input.js-select-controller").prop("checked",!1)):(this.$input_controller.prop("checked",!1),this.$toggle_select_text.text("Select All"),this.updateSelectedText(),0===this.$input_elements.filter("[type=checkbox]:checked").length&&this.hideControlPanel()),this.$input_elements.filter("[type=checkbox]:checked").length===this.$input_elements.not("input.js-select-controller").length&&(this.$input_controller.prop("checked",!0),this.toggleAllSelect())},r=function(e){return confirm(e)};return{loadItemSubmissionDom:function(a){return{$input_controller:$("input.js-select-controller",$(a)),$input_elements:$("input[type=checkbox]",$(a)),$control_element:$(".content div.multiple-action",$(a)),$selected_text:$("span.num-selected",$(".content div.multiple-action",$(a))),$toggle_select_text:$("a.select-all",$(a)),updateSelectedText:e,showControlPanel:t,hideControlPanel:i,toggleSelect:s,toggleAllSelect:n,confirmLicense:r}}}}(),Views.ItemImportForm=function(e){var t={labelForLicense:e.data("labelForLicense"),authenticityToken:e.data("authenticityToken"),numberOfItems:e.data("numberOfItems")};$(".process-wrapper h4 input").click((function(e){e.stopImmediatePropagation(),Market.DOMUtils.ItemSubmission.loadItemSubmissionDom($(this).parents(".process-wrapper")).toggleAllSelect()})),$(".process-wrapper .status input:checkbox").change((function(e){e.stopImmediatePropagation(),Market.DOMUtils.ItemSubmission.loadItemSubmissionDom($(this).parents(".process-wrapper")).toggleSelect($(this))})),$(".process-wrapper .multiple-action input[name=complete]").click((function(){return Market.DOMUtils.ItemSubmission.loadItemSubmissionDom($(this).parents(".process-wrapper")).confirmLicense(t.labelForLicense)})),$(".process-wrapper a.submit-single").click((function(e){if(e.preventDefault(),Market.DOMUtils.ItemSubmission.loadItemSubmissionDom($(this).parents(".process-wrapper")).confirmLicense(t.labelForLicense)){var i=$('<form style="display:none">').attr("method","post").attr("action",this.href);$('<input type="hidden">').attr("name","_method").attr("value","put").appendTo(i),$('<input type="hidden">').attr("name","utf8").attr("value","&#x2713;").appendTo(i),$('<input type="hidden">').attr("name","authenticity_token").attr("value",t.authenticityToken).appendTo(i),i.appendTo("body"),i.submit()}return!1})),$(".select-all").on("click",(function(e){e.preventDefault();var t=$(this),i=t.closest(".process-wrapper").find("h4 input");i[0].checked?(i.prop("checked",!1),t.empty().append("Select All")):(i.prop("checked",!0),t.empty().append("Deselect All")),Market.DOMUtils.ItemSubmission.loadItemSubmissionDom($(this).parents(".process-wrapper")).toggleAllSelect()}));var i=function(){var e="/item_submissions/progress?total_item_submissions_count="+t.numberOfItems;$("#item_submission_progress").load(e,(function(){setTimeout(i,5e3)}))};setTimeout(i,5e3)},Views.ItemLicenseDiscountingForm=class{constructor(e){this.GA_EVENT_VALUE_PRICE_SELECTION_STEP=2,this.GA_EVENT_VALUE_ACCEPT_GUIDELINE_STEP=5,this.DEBOUNCE_DELAY=500,this.discount_percentage_option_row_selector=".js-.discount-percentage-option-row",this.discount_percentage_option_selector=".js-.discount-percentage-option",this.discount_percentage_options_selector=".js-.discount-percentage-options",this.discount_percentage_selector="input.js-.discount-percentage",this.discounted_item_price_selector="input.js-.discounted-item-price",this.discounted_item_list_price_selector=".js-.discounted-item-list-price",this.form_placeholder_selector=".js-.item-license-discounting-form-placeholder",this.discounted_item_price_error_selector=".js-discount-validation-message--amount",this.discount_percentage_error_selector=".js-discount-validation-message--percentage",this.discount_accept_guideline_selector=".js.accept-guideline",this.cancel_discount_button=".js-cancel-discount-button",this.cancel_modal_confirm_button=".js-cancel-discount-modal-primary-action",this.cancel_modal_cancel_button=".js-cancel-discount-modal-secondary-action",this.dom={$body:$("body"),$el:e},this.setupListeners(),this.renderDiscountForm()}setupListeners(){this.dom.$body.on("click",this.discount_percentage_option_row_selector,(e=>{this.handleRowClick(e),this.handleDiscountPercentageInputChange(e)})),this.dom.$body.on("keydown",this.discount_percentage_option_row_selector,_.debounce((e=>this.handleDiscountPercentageInputChange(e)),this.DEBOUNCE_DELAY)),this.dom.$body.on("change",this.discount_percentage_option_selector,(e=>this.handleOptionClick(e))),this.dom.$body.on("change",`${this.discount_percentage_options_selector} input`,_.debounce((e=>this.sendGAEventForPriceSelection(e)),this.DEBOUNCE_DELAY)),this.dom.$body.on("click",this.discounted_item_price_selector,(e=>this.handleDiscountedItemPriceInputChange(e))),this.dom.$body.on("keydown",this.discounted_item_price_selector,_.debounce((e=>this.handleDiscountedItemPriceInputChange(e)),this.DEBOUNCE_DELAY)),this.dom.$body.on("click",this.cancel_discount_button,(e=>this.cancelDiscountButtonClick(e))),this.dom.$body.on("click",this.cancel_modal_confirm_button,(e=>this.cancelModalConfirmButtonClick(e))),this.dom.$body.on("click",this.cancel_modal_cancel_button,(e=>this._dismissModal(e))),this.dom.$body.on("change",this.discount_accept_guideline_selector,(e=>this.handleDiscountAcceptGuidelineChange(e)))}renderDiscountForm(){const e=$(this.form_placeholder_selector),t=e.data("item-id");$.get(`/items/${t}/item_license_discounts/new`).done((t=>{e.replaceWith(t),new Views.ItemDiscountDatepicker($(".edit-item-discount__date-fields")),new Views.Modal($(".js-discounts-view-history"));const i=parseInt($(".item-discount-form .license-pricing").data("buyer-fee"),10);$(".item-discount-form .adp__popup").data("buyer-fee",i),new Views.AuthorDrivenPricingCalculator($(".item-discount-form .adp__wrapper")),new Views.ItemDiscountSubmission($(".item-discount-form"))}))}handleDiscountAcceptGuidelineChange(e){this._sendGAClickEvent($(".js.accept-guideline-label").text(),this.GA_EVENT_VALUE_ACCEPT_GUIDELINE_STEP)}cancelModalConfirmButtonClick(e){this._sendGAClickEvent($(this.cancel_modal_confirm_button).val()),this._closeModal(),$(this.cancel_discount_button).prop("disabled",!0)}_dismissModal(e){this._sendGAClickEvent($(this.cancel_modal_cancel_button).text()),this._closeModal()}_closeModal(){this.sendGAEventViaOnCloseCallback=!1,Market.DOMUtils.getModalInstance().close()}cancelDiscountButtonClick(e){e.preventDefault(),this._sendGAClickEvent($(this.cancel_discount_button).text()),this.sendGAEventViaOnCloseCallback=!0,Market.DOMUtils.getModalInstance().show(this.cancelDiscountModal(),!0,{onClose:()=>this._onCloseCallback()})}_onCloseCallback(){this.sendGAEventViaOnCloseCallback&&this._sendGAClickEvent("Close Modal")}_sendGAClickEvent(e,t){Market.Helpers.GoogleAnalytics.sendEvent("event","Item Edit;Discount Form","click:a",{value:t,label:e.trim()})}sendGAEventForPriceSelection(e){const t=$(e.target);let i=t.val();i=function(){switch(!0){case t.hasClass("discounted-item-price"):return"$"+i;case"custom"!==i:return i+"%";default:return i}}(),this._sendGAClickEvent(i,this.GA_EVENT_VALUE_PRICE_SELECTION_STEP)}handleDiscountPercentageInputChange(e){if(this.handleResetItemPercentageInputValidations(),!this.selectedCustom()||""===this.discountPercentageInput().val())return;const t=Math.floor(+this.discountPercentageInput().val());this.discountPercentageInput().val(t);const i=Math.floor(this.originalItemPrice()/100*(100-t)-this.buyerFee());this.discountedItemPriceInput().val(i),this.handleInputValidations(),$(this.discounted_item_list_price_selector).text("$"+(i+this.buyerFee()))}handleDiscountedItemPriceInputChange(e){if(this.handleResetItemPriceInputValidations(),!this.selectedCustom()||""===this.discountedItemPriceInput().val())return;const t=Math.floor(+this.discountedItemPriceInput().val());this.discountedItemPriceInput().val(t);const i=Math.floor(100-100*(t+this.buyerFee())/this.originalItemPrice());this.discountPercentageInput().val(i),this.handleInputValidations(),$(this.discounted_item_list_price_selector).text("$"+(t+this.buyerFee()))}handleResetItemPriceInputValidations(){this.discountedItemPriceInput().removeClass("invalid"),$(this.discounted_item_price_error_selector).removeClass("active")}handleResetItemPercentageInputValidations(){this.discountPercentageInput().removeClass("invalid"),$(this.discount_percentage_error_selector).removeClass("active")}handleInputValidations(){this.handleResetItemPriceInputValidations(),Math.floor(this.discountedItemPriceInput().val())<this.discountedItemPriceInput().data("validationMinimum")&&(this.discountedItemPriceInput().addClass("invalid"),$(this.discounted_item_price_error_selector).addClass("active")),this.handleResetItemPercentageInputValidations(),Math.floor(this.discountPercentageInput().val())<this.discountPercentageInput().data("validationMinimum")&&(this.discountPercentageInput().addClass("invalid"),$(this.discount_percentage_error_selector).addClass("active"))}handleRowClick(e){if($(e.target).closest("td").hasClass("js- license-pricing-cell"))return!0;const t=$(e.target).parents(this.discount_percentage_option_row_selector);t.find(this.discount_percentage_option_selector).prop("checked")||t.find(this.discount_percentage_option_selector).prop("checked",!0).trigger("change"),this.selectedCustom()&&($(e.target).closest("td").hasClass("js- discounted-item-price")?$(this.discountedItemPriceInput()).select().focus():$(this.discountPercentageInput()).select().focus())}handleOptionClick(e){const t=$(e.target),i=t.parents(this.discount_percentage_options_selector);i.find(".js-discount-custom-input").prop("disabled","custom"!==t.val()),i.find(this.discount_percentage_option_row_selector).removeClass("js-selected"),t.parents(this.discount_percentage_option_row_selector).addClass("js-selected")}discountedItemPriceInput(){return this.dom.$el.find(this.discounted_item_price_selector)}discountPercentageInput(){return this.dom.$el.find(this.discount_percentage_selector)}buyerFee(){return+$(".js-.item-discount-form").data("buyer-fee")}originalItemPrice(){return+$(".js-.item-discount-form").data("original-item-price")}selectedCustom(){return $(this.discountPercentageInput()).closest("tr").hasClass("js-selected")}cancelDiscountModal(){return $(".js-cancel-discount-modal")}},Views.ReplaceItemNavsWithRemote=class{constructor(e){const t=e.data("target");e.on("change",t,(function(e){e.preventDefault();const t=$("option:selected",this);window.location.href=t.data("url")}))}},Market.GoogleAnalytics.ItemPage=class{static init(){return this._instance||(this._instance=new this)}constructor(){$(document).on({"googleAnalytics:itemDetailsView":this.handleDetailsView.bind(this),"googleAnalytics:itemAddToCart":this.handleAddToCart.bind(this),"googleAnalytics:itemBuyNow":this.handleBuyNow.bind(this),"googleAnalytics:itemSupportBundleChange":this.handleItemSupportBundleChange.bind(this),"googleAnalytics:itemLicenseSelectorOpen":this.handleLicenseSelectorOpen.bind(this),"googleAnalytics:itemGalleryScreenshotLoaded":this.handleGalleryScreenshotLoaded.bind(this),"googleAnalytics:cartSupportUpgrade":this.handleCartSupportUpgrade.bind(this),"googleAnalytics:freeItemDownload":this.handleFreeItemDownload.bind(this),"googleAnalytics:downloadPreviewButtonTracking":this.handleDownloadPreviewButtonTracking.bind(this),"googleAnalytics:downloadVideoPreviewButtonTracking":this.handleDownloadVideoPreviewButtonTracking.bind(this),"googleAnalytics:itemPreviewImageHover":this.handleItemPreviewImageHover.bind(this),"googleAnalytics:itemPreviewImageClick":this.handleItemPreviewImageClick.bind(this),"googleAnalytics:itemPreviewButtonClick":this.handleItemPreviewButtonClick.bind(this),"googleAnalytics:SupportInclusionLinkClick":this.handleSupportInclusionLinkClick.bind(this),"googleAnalytics:SupportPricingLinkClick":this.handleSupportPricingLinkClick.bind(this),"googleAnalytics:itemDetailsTab":this.handleItemDetailsTab.bind(this),"googleAnalytics:reviewsTab":this.handleReviewsTab.bind(this),"googleAnalytics:ReviewsSortingOnTab":this.handleReviewsSortingOnTab.bind(this),"googleAnalytics:commentsTab":this.handleCommentsTab.bind(this),"googleAnalytics:CommentsSearchTab":this.handleCommentsSearchTab.bind(this),"googleAnalytics:VerifiedCommentsTab":this.handleVerifiedCommentsTab.bind(this),"googleAnalytics:commentsSortBy":this.handleCommentsSortBy.bind(this),"googleAnalytics:supportTab":this.handleSupportTab.bind(this),"googleAnalytics:breadcrumbCategoryClick":this.handleBreadcrumbCategoryClick.bind(this),"googleAnalytics:itemCommentsClick":this.handleItemCommentsClick.bind(this),"googleAnalytics:headerItemCommentsClick":this.handleHeaderItemCommentsClick.bind(this),"googleAnalytics:viewPortfolioButtonClick":this.handleViewPortfolioButtonClick.bind(this),"googleAnalytics:ratingDetailsClick":this.handleRatingDetailsClick.bind(this),"googleAnalytics:ratingDetailedExposerClick":this.handleRatingDetailedExposerClick.bind(this),"googleAnalytics:attributesShowMoreClick":this.handleShowMoreClick.bind(this),"googleAnalytics:itemDescriptionToggleClick":this.handleItemDescriptionToggleClick.bind(this),"googleAnalytics:byAuthorClick":this.handleByAuthorClick.bind(this),"googleAnalytics:titleRatingClick":this.handleTitleRatingClick.bind(this),"googleAnalytics:itemSidebarMetaAttributeClick":this.handleItemSidebarMetaAttributeClick.bind(this),"googleAnalytics:LicenseTypeSelectorClick":this.handleLicenseTypeSelectorClick.bind(this),"googleAnalytics:itemLicenseInfoIconClick":this.handleitemLicenseInfoIconClick.bind(this),"googleAnalytics:LicenceDetailHyperlinkClick":this.handleLicenceDetailHyperlinkClick.bind(this),"googleAnalytics:scrollItemPagePercentage":this.handleScrollItemPagePercentage.bind(this),"googleAnalytics:itemAddToCartModalGoToCheckout":this.handleAddToCartModalGoToCheckout.bind(this),"googleAnalytics:itemAddToCartModalKeepBrowsing":this.handleAddToCartModalKeepBrowsing.bind(this),"googleAnalytics:itemAddToCartModalSupportOption":this.handleAddToCartModalSupportOption.bind(this),"googleAnalytics:itemAddToCartModalClose":this.handleAddToCartModalClose.bind(this)})}handleDetailsView(e,t){this._addProducts(t.payload),this._setAction("detail"),this._send("Item Details","Item Navigation; Tabs","click;link",!0)}handleAddToCart(e,t){this._set("dimension9","add to cart"),this._addProducts(t.payload),this._setAction("add"),this._send("Add to Cart","Item; Pricing","click;link")}handleBuyNow(e,t){this._set("dimension9","buy now"),this._addProducts(t.payload),this._setAction("add"),this._send("Buy Now","Item; Pricing","click;link")}handleCartSupportUpgrade(e,t){this._addProducts(t.payload),this._setAction("add"),this._send("Add to cart: support upgrade","Ecommerce","click")}handleItemSupportBundleChange(e,t){let i;"bundle_12month"===t?i="Extend Support":"bundle_6month"===t&&(i="Remove Extend Support"),Market.Helpers.GoogleAnalytics.sendEvent("event","Item; Pricing","click;check",{label:i})}handleSupportInclusionLinkClick(e,t){this._send("What does support include?","Item; Pricing","click;link")}handleSupportPricingLinkClick(e,t){this._send("Get it now and save up to","Item; Pricing","click;link")}handleItemDetailsTab(e,t){this._send("Item Details","Item Navigation; Tabs","click;link")}handleReviewsTab(e,t){this._send("Reviews","Item Navigation; Tabs","click;link")}handleCommentsTab(e,t){this._send("Comments","Item Navigation; Tabs","click;link")}handleReviewsSortingOnTab(e,t){this._send(t.label,"Item Navigation; Tabs","click")}handleCommentsSearchTab(e){this._send("Comments : search","Item Navigation; Tabs","click")}handleVerifiedCommentsTab(e,t){this._send(t.label,"Item Navigation; Tabs","click")}handleCommentsSortBy(e,t){this._send(t.label,"Item Navigation; Tabs","click")}handleSupportTab(e,t){this._send("Support","Item Navigation; Tabs","click;link")}handleBreadcrumbCategoryClick(e,t){this._send(t.categoryName,"Item Navigation; Breadcrumbs","click;link")}handleItemCommentsClick(e,t){this._send("Comments","Item;Comments","click;link")}handleHeaderItemCommentsClick(e,t){this._send("Comments","Item;Navigation","click;link")}handleViewPortfolioButtonClick(e,t){this._send("Author Portfolio","Item Author;Portfolio","click;button")}handleRatingDetailsClick(e,t){this._send("Item Rating","Item;Ratings","click;link")}handleRatingDetailedExposerClick(e,t){this._send("More information","Item;Ratings","click;link")}handleShowMoreClick(e,t){this._send(t.label,"Item;Attributes","click;link")}handleItemDescriptionToggleClick(e,t){this._send("View full description","Item;Description","click;link")}handleByAuthorClick(e,t){this._send("Author Portfolio","Item;Navigation","click;link")}handleTitleRatingClick(e,t){this._send("Item Rating","Item;Navigation","click;link")}handleItemSidebarMetaAttributeClick(e,t){this._send(t.metaAttributeLabel,"Item;Attributes","click;link")}handleLicenseSelectorOpen(e,t){Market.Helpers.GoogleAnalytics.sendEvent("event","Item Detail","click",{label:"Licence info"})}handleGalleryScreenshotLoaded(e,t){Market.Helpers.GoogleAnalytics.logPageView(t)}handleDownloadPreviewButtonTracking(e,t){Market.Helpers.GoogleAnalytics.sendEvent("event","AJDownload","click",{label:"itempage"})}handleDownloadVideoPreviewButtonTracking(e,t){Market.Helpers.GoogleAnalytics.sendEvent("event","VHDownload","click",{label:"itempage"})}handleFreeItemDownload(e,t){try{const e=`Free Item ${t.productsArray.map((e=>`${e.itemId}-${e.itemName}`)).join(", ")}`;Market.Helpers.GoogleAnalytics.sendEvent("event","download","click",{label:e})}catch(t){console.warn(`Could not fetch payload for '${e.type}'. download event not sent.`)}}handleItemPreviewImageHover(e,t){Market.Helpers.GoogleAnalytics.sendEvent("event","Item Navigation","hover;image",{label:"Marketing Image"})}handleItemPreviewImageClick(e,t){Market.Helpers.GoogleAnalytics.sendEvent("event","Item Navigation",t.action,{label:t.label})}handleItemPreviewButtonClick(e,t){Market.Helpers.GoogleAnalytics.sendEvent("event","Item Navigation",t.action,{label:t.label})}handleLicenseTypeSelectorClick(e,t){this._send(t.label,"Item Detail","click")}handleitemLicenseInfoIconClick(e,t){this._send("Licence info","Item Detail","click;icon")}handleLicenceDetailHyperlinkClick(e,t){this._send("Licence info : View license details","Item Detail","click")}handleScrollItemPagePercentage(e,t){Market.Helpers.GoogleAnalytics.sendEvent("event","Item Page","scroll",{label:String(t)})}handleAddToCartModalGoToCheckout(e,t){this._send("checkout","Modal: Item added to cart","click;button",!1)}handleAddToCartModalKeepBrowsing(e,t){this._send("keep browsing","Modal: Item added to cart","click;button",!1)}handleAddToCartModalSupportOption(e,t){this._send(t.label,"Modal: Item added to cart","click;check",!1)}handleAddToCartModalClose(e,t){this._send("close",t.category,"click",!1)}_addProducts(e){Market.Helpers.GoogleAnalytics.addProducts(e)}_setAction(e,t){Market.Helpers.GoogleAnalytics.setAction(e,t)}_set(e,t){Market.Helpers.GoogleAnalytics.set(e,t)}_send(e,t,i,n){Market.Helpers.GoogleAnalytics.sendEvent("event",t,i,{label:e,nonInteraction:!!n})}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.ItemPageScrollEvents=function(){function t(){this.handleScrollPositionChange=e(this.handleScrollPositionChange,this),this.heightsToCheck=[25,50,75,100],this.$document=$(document),this.$window=$(window),Market.GoogleAnalytics.ItemPage.init(),this.$document.on("scroll",this.handleScrollPositionChange),this.$window.on("resize",this.handleScrollPositionChange)}return t.prototype.handleScrollPositionChange=function(){var e,t,i,n,s,r,a;for(a=Math.ceil(this.$document.scrollTop()),e=this.$document.height(),
r=a+this.$window.height(),i=0,n=(s=this.heightsToCheck).length;i<n&&r>=e*((t=s[i])/100);i++)this.heightsToCheck=this.heightsToCheck.filter((function(e){return e!==t})),this.$document.trigger("googleAnalytics:scrollItemPagePercentage",t);if(0===this.heightsToCheck.length)return this.$document.off("scroll",this.handleScrollPositionChange),this.$window.off("resize",this.handleScrollPositionChange)},t}()}.call(this),Views.ItemPreviewButtonTracking=class{constructor(e){e.on("click",this.handleClick.bind(this))}handleClick(e){const t={action:"click;button",label:"Live Preview CTA"};$(document).trigger("googleAnalytics:itemPreviewButtonClick",t)}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.ItemPreviewImageTracking=function(){function t(t){this.handleMouseLeave=e(this.handleMouseLeave,this),this.handleMouseEnter=e(this.handleMouseEnter,this),this.handleClick=e(this.handleClick,this),t.on("click",this.handleClick),t.on("mouseenter",this.handleMouseEnter),t.on("mouseleave",this.handleMouseLeave)}return t.prototype.handleClick=function(){var e;return e={action:"click;image",label:"Marketing Image;Live Preview"},$(document).trigger("googleAnalytics:itemPreviewImageClick",e)},t.prototype.handleMouseEnter=function(){return this.itemPreviewImageHoverTimeout=setTimeout(this._triggerItemPreviewImageHover,1e3)},t.prototype.handleMouseLeave=function(){return clearTimeout(this.itemPreviewImageHoverTimeout)},t.prototype._triggerItemPreviewImageHover=function(){return $(document).trigger("googleAnalytics:itemPreviewImageHover")},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.ItemReview=function(){function t(t){var i;this.$form=t,this.updateRating=e(this.updateRating,this),this.updateStars=e(this.updateStars,this),this.notification=e(this.notification,this),this.render=e(this.render,this),this.createError=e(this.createError,this),this.createSuccess=e(this.createSuccess,this),this.createBeforeSend=e(this.createBeforeSend,this),this.$ratingWidgetEdit=this.$form.find("[data-view='starRating']"),this.item_id=this.$ratingWidgetEdit.data("item-id"),this.$ratingWidget=$("#rating-"+this.item_id),this.$formMessages=this.$form.find(".js-rating-form-notifications"),this.$formError=this.$form.find(".js-rating-form-error"),this.$formHint=this.$form.find(".js-rating-form-hint"),this.$formSuccess=this.$form.find(".js-rating-form-success"),this.$formRating=this.$form.find(".js-rating-form-input"),this.$formValidationHint=this.$form.find(".js-rating-form-validation-hint"),this.saved=!1,this.modal=$.magnificPopup.instance,this.quick_rating=this.$ratingWidgetEdit.data("rating-temp"),this.new_rating=this.quick_rating,this.$ratingWidget.on("starRating:change",this.updateRating),this.$form.on("ajax:beforeSend",this.createBeforeSend),this.$form.on("ajax:success",this.createSuccess),this.$form.on("ajax:error",this.createError),this.modal.close=(i=this,function(){return $.magnificPopup.proto.close.call(i),i.updateStars()})}return t.prototype.createBeforeSend=function(e){return this.render("updating",e.target)},t.prototype.createSuccess=function(e,t){return"ok"===t.status?this.render("new",e.target,t):this.render("validationError",e.target,t)},t.prototype.createError=function(e,t){return this.render("error",e.target,t)},t.prototype.render=function(e,t,i){switch(e){case"updating":return this.$formError.addClass("is-hidden").html("");case"new":return this.saved=!0,this.modal.close();case"validationError":return this.notification("error",i.errors);case"error":return this.notification("error","Sorry something went wrong")}},t.prototype.notification=function(e,t){switch(e){case"reset":return this.$formMessages.addClass("is-hidden"),this.$formSuccess.addClass("is-hidden"),this.$formError.addClass("is-hidden"),this.$formHint.addClass("is-hidden"),this.$formValidationHint.addClass("is-hidden");case"hint":return this.$formMessages.removeClass("is-hidden"),this.$formSuccess.addClass("is-hidden"),this.$formHint.removeClass("is-hidden"),this.$formError.addClass("is-hidden"),this.$formValidationHint.removeClass("is-hidden");case"success":return this.$formMessages.removeClass("is-hidden"),this.$formSuccess.removeClass("is-hidden"),this.$formHint.addClass("is-hidden"),this.$formError.addClass("is-hidden"),this.$formValidationHint.addClass("is-hidden");case"error":return this.$formMessages.removeClass("is-hidden"),this.$formSuccess.addClass("is-hidden"),this.$formHint.addClass("is-hidden"),this.$formError.html(t).removeClass("is-hidden"),this.$formValidationHint.removeClass("is-hidden")}},t.prototype.updateStars=function(){return this.saved?this.$ratingWidget.trigger("starRating:save",this.new_rating):this.$ratingWidget.trigger("starRating:reset")},t.prototype.updateRating=function(e,t){return this.new_rating=t,this.$formRating.val(t),this.notification("reset"),this.new_rating<4?this.notification("hint"):this.new_rating>=4&&this.quick_rating===this.new_rating?this.notification("success"):void 0},t}()}.call(this),Views.ItemSupportInquiryForm=class{constructor(e){this.$form=e,this.$form.on("submit",(()=>{const e=this.$form.find("#item_support_inquiry_form_message");Market.Helpers.FormEscaping.escapeInHiddenCopyAndDisable(this.$form,e,"item_support_inquiry_form[base64_message]")}))}},Views.ItemSupportPreferences=class{constructor(){const e=$("#new_user_item_support_preferences_updater");this.radios=e.find(".support-inputs :radio"),this.radios.on("change",this.onSelectChanged.bind(this)),this.sections={response_time:$("#response-time-section"),policy:$("#support-policy-section"),email:$("#email-section"),url:$("#url-section")},this.onSelectChanged()}onSelectChanged(){const e=this.radios.filter(":checked").val();this.sections.policy.toggleClass("is-hidden--js","unsupported"===e),this.sections.response_time.toggleClass("is-hidden--js","unsupported"===e),this.sections.email.toggleClass("is-hidden--js","email"!==e),this.sections.url.toggleClass("is-hidden--js","url"!==e)}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.ItemVariantSelector=function(){function t(t){this.$el=t,this._setCookieData=e(this._setCookieData,this),this._getCookieData=e(this._getCookieData,this),this.handleLicenceDetailHyperlinkClick=e(this.handleLicenceDetailHyperlinkClick,this),this.handlelicenseInfoIconClick=e(this.handlelicenseInfoIconClick,this),this.handlelicenseSelectorClick=e(this.handlelicenseSelectorClick,this),this.handleSupportPricingLinkClick=e(this.handleSupportPricingLinkClick,this),this.handleSupportInclusionLinkClick=e(this.handleSupportInclusionLinkClick,this),this.handleLicenseDetailsClick=e(this.handleLicenseDetailsClick,this),this.handleSupportBundleChange=e(this.handleSupportBundleChange,this),this.handleLicenseChange=e(this.handleLicenseChange,this),this.handleOnLoad=e(this.handleOnLoad,this),this.SUPPORT_12_MONTH_UPGRADE="bundle_12month",this.dataOptions=this.$el.data(),this.cookiebotEnabled=this.dataOptions.cookiebotEnabled,this.consentGiven=Market.Helpers.CookieConsent.given,this.consentType="preferences",this.dom={$licenseSelector:this.$el.find(".js-purchase-license-selector"),$licensePrices:this.$el.find(".js-purchase-license-prices"),$licenses:this.$el.find(".js-purchase-license"),$price:this.$el.find(".js-purchase-price"),$defaultLicense:this.$el.find(".js-purchase-default-license"),$chosenLicense:this.$el.find(".js-license-selector__chosen-license"),$licenseDetails:this.$el.find(".js-purchase-license-details"),$heading:this.$el.find(".js-purchase-heading"),$supportDefault:this.$el.find(".js-support__default"),$supportCheckbox:this.$el.find(".js-support__option"),$supportPrice:this.$el.find(".js-support__price"),$renewalPrice:this.$el.find(".js-renewal__price"),$supportSaving:this.$el.find(".js-support__saving"),$supportInclusionLink:this.$el.find(".js-support__inclusion-link"),$supportPricingLink:this.$el.find(".js-support__pricing-link"),$salePriceWrapper:this.$el.find(".js-adi__item-sale-price-wrapper"),$saleLabelWrapper:this.$el.find(".js-adi__item-sale-savings"),$salePrice:this.$el.find(".js-adi__item-sale-price"),$LicenseSelectorItem:this.$el.find(".js-license-selector__item"),$LicenseDetailLink:this.$el.find(".flyout__link"),$licenseInfoIcon:this.$el.find(".-icon-info"),$purchaseButton:$(".js-purchase__buy-now")},this.itemSupportable=this.dom.$supportCheckbox.length>0,Market.GoogleAnalytics.ItemPage.init(),this.handleOnLoad(),this.dom.$licenseSelector.on("change",this.handleLicenseChange),this.dom.$supportCheckbox.on("change",this.handleSupportBundleChange),this.dom.$licenseDetails.on("click",this.handleLicenseDetailsClick),this.dom.$supportInclusionLink.on("click",this.handleSupportInclusionLinkClick),this.dom.$supportPricingLink.on("click",this.handleSupportPricingLinkClick),$(window).on("pageshow",this.handleOnLoad),this.dom.$LicenseSelectorItem.length>0?this.dom.$LicenseSelectorItem.on("click",this.handlelicenseSelectorClick):this.dom.$licenseSelector.on("change",this.handlelicenseSelectorClick),this.dom.$licenseInfoIcon.on("click",this.handlelicenseInfoIconClick),this.dom.$LicenseDetailLink.on("click",this.handleLicenceDetailHyperlinkClick),this.dom.$licenseDetails.on("click",this.handleLicenceDetailHyperlinkClick)}return t.prototype.handleOnLoad=function(){return this._setActiveLicense(),this._setActiveSupport(),this._setActivePrice(),this._updateSaleUI(),this.dom.$licenseSelector.find("option").prop("disabled",!1),this._resumeSelection(this._getCurrentURL()),this._updateUI()},t.prototype.handleLicenseChange=function(){return this._setActiveLicense(),this._setActiveSupport(),this._setActivePrice(),this._setCookieData(),this._updateSaleUI(),this._updateUI()},t.prototype.handleSupportBundleChange=function(){return this._setActiveSupport(),this._setActivePrice(),this._setCookieData(),this._updateSaleUI(),this._updateUI(),$(document).trigger("googleAnalytics:itemSupportBundleChange",this.activeSupport.bundle)},t.prototype.handleLicenseDetailsClick=function(e){var t,i;return e.preventDefault(),i=$(e.currentTarget).attr("href"),t=$.param({license:this.activeLicense}),window.location=i+"?"+t},t.prototype.handleSupportInclusionLinkClick=function(){return $(document).trigger("googleAnalytics:SupportInclusionLinkClick")},t.prototype.handleSupportPricingLinkClick=function(){return $(document).trigger("googleAnalytics:SupportPricingLinkClick")},t.prototype.handlelicenseSelectorClick=function(e){var t;return t={label:"Licence info : "+($(e.currentTarget).attr("data-license")?$(e.currentTarget).attr("data-license"):this.activeLicense)},$(document).trigger("googleAnalytics:LicenseTypeSelectorClick",t)},t.prototype.handlelicenseInfoIconClick=function(){return $(document).trigger("googleAnalytics:itemLicenseInfoIconClick")},t.prototype.handleLicenceDetailHyperlinkClick=function(){return $(document).trigger("googleAnalytics:LicenceDetailHyperlinkClick")},t.prototype._getCookieData=function(){var e;return(e=$.cookie("licenseSupport"))?JSON.parse(e):[]},t.prototype._setCookieData=function(){var e,t,i,n;if(!this.cookiebotEnabled||this.consentGiven(this.consentType))return t=this._getCookieData(),n=10,this.itemSupportable&&(e=this.activeSupport.bundle),i={item_id:this.$el.data("id"),support:e,license:this.activeLicense},(t=t.filter((function(e){return e.item_id!==i.item_id}))).length>=n&&t.shift(),t.push(i),$.cookie("licenseSupport",JSON.stringify(t),{path:"/"})},t.prototype._setActiveLicense=function(){var e;return null!=(e=this.dom.$licenseSelector.find("option:selected").data("license"))?(this.activeLicense=e,this.activeLicenseDefault=this.dom.$licenseSelector.find("option:selected").data("license-default")):(this.activeLicense=this.dom.$defaultLicense.data("license"),this.activeLicenseDefault=!0)},t.prototype._updateSaleUI=function(){return this.activeLicenseDefault&&"active"===this.dom.$licensePrices.data("discount-status")?(this.dom.$salePriceWrapper.addClass("is-active"),this.dom.$saleLabelWrapper.addClass("is-active"),this.dom.$price.addClass("adi__purchase-price-discounted"),this.dom.$supportCheckbox.prop("checked")?this.dom.$supportCheckbox.prop("checked")?this.dom.$salePrice.text(this.dom.$licensePrices.data("default-discount-price-upgrade")):void 0:this.dom.$salePrice.text(this.dom.$licensePrices.data("discount-price"))):(this.dom.$salePriceWrapper.removeClass("is-active"),this.dom.$saleLabelWrapper.removeClass("is-active"),this.dom.$price.removeClass("adi__purchase-price-discounted"))},t.prototype._setActiveSupport=function(){var e,t,i;if(this.itemSupportable)return i=this.dom.$licensePrices.filter("[data-license='"+this.activeLicense+"']"),t=this.$el.find(".js-support__option:checked").val(),e=this.dom.$supportDefault.val(),this.activeSupport={bundle:t||e,renewalPrice:i.data("support-renewal-price"),price:i.data("support-upgrade-price"),saving:i.data("support-upgrade-saving")}},t.prototype._setActivePrice=function(){var e,t;return t=this.dom.$licensePrices.filter("[data-license='"+this.activeLicense+"']"),e=this.itemSupportable&&this.activeSupport.bundle===this.SUPPORT_12_MONTH_UPGRADE?t.data("price-prepaid-upgrade"):t.data("price-prepaid"),this.activePrice=e},t.prototype._updateUI=function(){return this._renderActiveLicense(),this._renderActiveSupport(),this._renderActivePrice(),this._updateSupportPricingURI(),this._broadcastVariantChange()},t.prototype._renderActiveLicense=function(){var e;if(this.dom.$licenses.length>1)return this.dom.$licenses.removeClass("is-active"),this.dom.$licenses.filter("[data-license='"+this.activeLicense+"']").addClass("is-active"),e=this.dom.$licenseSelector.find("option:selected").text(),this.dom.$chosenLicense.text(e)},t.prototype._renderActiveSupport=function(){if(this.itemSupportable)return this.dom.$supportPrice.html(this.activeSupport.price),this.dom.$renewalPrice.html(this.activeSupport.renewalPrice),this.dom.$supportSaving.html(this.activeSupport.saving)},t.prototype._renderActivePrice=function(){var e;return this.activePrice.length>6?this.dom.$heading.removeClass("-size-xxl").addClass("-size-l"):this.dom.$heading.removeClass("-size-l").addClass("-size-xxl"),this.activeLicenseDefault&&"active"===this.dom.$licensePrices.data("discount-status")?(e=this.itemSupportable&&this.activeSupport.bundle===this.SUPPORT_12_MONTH_UPGRADE?this.dom.$licensePrices.data("default-discount-original-price-upgrade"):this.dom.$licensePrices.data("discount-original-price"),this.dom.$price.html(e)):this.dom.$price.html(this.activePrice)},t.prototype._updateSupportPricingURI=function(){var e,t;if(e=this.dom.$supportPricingLink.attr("href"))return(t=new URL(e,"https://localhost")).searchParams.set("license",this.activeLicense),this.dom.$supportPricingLink.attr("href",t.pathname+t.search)},t.prototype._broadcastVariantChange=function(){var e;return e={license:this.activeLicense,price:this.activePrice},this.itemSupportable&&(e.support=this.activeSupport.bundle),$(document).trigger("item:variantChange",e)},t.prototype._resumeSelection=function(e){var t,i;if(i=(e=new URL(e)).searchParams.get("license"),t=e.searchParams.get("open_purchase_for_item_id"),null!=i&&(this.activeLicense=i,this._setActivePrice(),this._updateUI(),this.dom.$licenseSelector.find("option[data-license='"+i+"']").attr("selected",!0)),null!=t)return this._invokePurchaseFlow()},t.prototype._invokePurchaseFlow=function(){return this.dom.$purchaseButton.click()},t.prototype._getCurrentURL=function(){return window.location},t}()}.call(this),Market.Helpers.CookieConsent={given:function(e){if("undefined"!=typeof Cookiebot&&Cookiebot.consent)return Cookiebot.consent[e];const t=$.cookie("CookieConsent");if(!t)return console.log("could not read CCC"),!1;if("-1"===t)return console.log("CC outside of targeted area"),!0;try{const i=JSON.parse(t.replace(/%2c/g,",").replace(/'/g,'"').replace(/([{[,])\s*([a-zA-Z0-9_]+?):/g,'$1"$2":'));return i&&!!i[e]}catch(e){return console.log("could not parse CCC"),!1}},cookieAvailable:function(){return!!$.cookie("CookieConsent")},addListener:function(e,t){window.addEventListener("CookiebotOnAccept",(function(){Market.Helpers.CookieConsent.given(e)&&t()}),!1)}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.LayoutSwitcher=function(){function t(t){this.handleClick=e(this.handleClick,this),this.cookiebotEnabled=t.data().cookiebotEnabled,this.$list=$(".item-list, .item-grid"),this.$switchers=t.find("[data-layout-switch]"),this.$switchers.on("click",this.handleClick),this.selectInitialLayout($.cookie("item-layout"))}return t.prototype.handleClick=function(e){var t;if(e.preventDefault(),this.$switchers.removeClass("is-active"),(t=$(e.currentTarget)).addClass("is-active"),"grid"===t.data("layoutSwitch")){if(this.$list.addClass("item-grid").removeClass("item-list"),this.setGetCookie())return $.cookie("item-layout","grid")}else if("list"===t.data("layoutSwitch")&&(this.$list.addClass("item-list").removeClass("item-grid"),this.setGetCookie()))return $.cookie("item-layout","list")},t.prototype.selectInitialLayout=function(e){return this.setGetCookie()&&e?$("[data-layout-switch="+e+"]").click():$(".item-list").length?$("[data-layout-switch=list]").addClass("is-active"):$("[data-layout-switch=grid]").addClass("is-active")},t.prototype.setGetCookie=function(){return!this.cookiebotEnabled||Market.Helpers.CookieConsent.given("preferences")},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.LicensePriceCalculator=function(){function t(t){this.$el=t,this.handleLicensePriceKeyDown=e(this.handleLicensePriceKeyDown,this),this.handleLicensePriceChange=e(this.handleLicensePriceChange,this),this.buyerFee=parseInt(this.$el.data("buyer-fee"),10),this.recommendedRange={upper:parseInt(this.$el.data("recommended-range-max"),10),lower:parseInt(this.$el.data("recommended-range-min"),10)},this.dom={$licensePriceField:this.$el.find(".js-license-pricing__price-field"),$purchasePrice:this.$el.find(".js-license-pricing__purchase-price"),$validationMessage:this.$el.find(".js-license-pricing__validation-message"),$adpCalcPurchasePrice:this.$el.find(".js-.adp__purchase-price")},$(".js-.adp__popup").data("buyer-fee",this.buyerFee),this.dom.$licensePriceField.on("keyup change",this.handleLicensePriceChange),this.dom.$licensePriceField.on("keydown",this.handleLicensePriceKeyDown),this.delayedErrorHandler=_.debounce(this._updateErrorWarnState,800),this.dom.$licensePriceField.trigger("change",this.handleLicensePriceChange)}return t.prototype.MIN_AUTHOR_PRICE=1,t.prototype.MIN_DISPLAY_PRICE=0,t.prototype.THRESHOLD={UPPER:1e3,LOWER:10},t.prototype.WARNINGS={UPPER:"Have you accidentally entered an extra digit?<br> This price seems unusually high.",LOWER:"Have you accidentally missed a keystroke?<br> This price seems unusually low."},t.prototype.ERRORS={NUMBER:"Please enter a value greater than or equal to 1."},t.prototype.handleLicensePriceChange=function(){return this._calculatePurchasePrice(),this.delayedErrorHandler(),this._updatePopupPrice()},t.prototype.handleLicensePriceKeyDown=function(e){var t;return t=this.dom.$licensePriceField.val(),190!==e.keyCode&&(!(t.length>=this.dom.$licensePriceField.prop("maxlength")&&this._isNumberKey(e.keyCode))&&void 0)},t.prototype._updatePopupPrice=function(){return this.dom.$adpCalcPurchasePrice.val(this.dom.$purchasePrice.html()),this.dom.$adpCalcPurchasePrice.trigger("change")},t.prototype._calculatePurchasePrice=function(){var e;if(e=parseInt(this.dom.$licensePriceField.val(),10)||0,this._isValidPrice(e))return this._updatePurchasePrice(e+this.buyerFee)},t.prototype._updateErrorWarnState=function(){var e;return this.dom.$licensePriceField.val().length?(e=parseInt(this.dom.$licensePriceField.val(),10)||0)<this.MIN_AUTHOR_PRICE?this._updateValidationMessage(this.ERRORS.NUMBER):e>0&&e<=this.THRESHOLD.LOWER/100*this.recommendedRange.lower?this._updateValidationMessage(this.WARNINGS.LOWER):e>=this.THRESHOLD.UPPER/100*this.recommendedRange.upper?this._updateValidationMessage(this.WARNINGS.UPPER):this._updateValidationMessage(""):this._updateValidationMessage("")},t.prototype._isValidPrice=function(e){return e>=this.MIN_DISPLAY_PRICE},t.prototype._isNumberKey=function(e){return e>=48&&e<=57},t.prototype._updatePurchasePrice=function(e){return this.dom.$purchasePrice.text(e)},t.prototype._updateValidationMessage=function(e){var t;if(null!=(t=this.dom.$validationMessage))return e?(t.html(e),t.slideDown(400),t.css("opacity",1)):(t.text(""),t.slideUp(400),t.css("opacity",0))},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.LicensePricingValidator=function(){function t(t){this.handleLicensePriceChange=e(this.handleLicensePriceChange,this),this.dom={$licensePriceFields:t.find(".js-license-pricing__price-field"),$extendedValidationMessage:t.find(".js-license-pricing__validation-message--extended")},this.delayedHandler=_.debounce(this.handleLicensePriceChange,800),this.dom.$licensePriceFields.on("keyup change",this.delayedHandler)}return t.prototype.WARNINGS={DIFFERENCE:"The extended license is usually priced higher than regular licenses."},t.prototype.handleLicensePriceChange=function(){if(this.dom.$licensePriceFields.length>1&&this.dom.$licensePriceFields[1].value.length)return parseInt(this.dom.$licensePriceFields[0].value,10)>parseInt(this.dom.$licensePriceFields[1].value,10)?this._updateValidationMessage(this.WARNINGS.DIFFERENCE):this._updateValidationMessage("")},t.prototype._updateValidationMessage=function(e){return e?this.dom.$extendedValidationMessage.html(e).slideDown(400).css("opacity",1):this.dom.$extendedValidationMessage.text(e).slideUp(400).css("opacity",0)},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.LicenseSelector=function(){function t(){this._updateChosenLicense=e(this._updateChosenLicense,this),this._updateSelectedLabel=e(this._updateSelectedLabel,this),this.handleLicenseChange=e(this.handleLicenseChange,this),this.handleOpen=e(this.handleOpen,this),this.setup=e(this.setup,this),$(document).on("flyout:setup",this.setup)}return t.prototype.setup=function(e,t){return this.handleOpen(),this.$flyout=t.flyout,this.dom={$license:this.$flyout.find(".js-license-selector__item"),$selectedLabel:this.$flyout.find(".js-license-selector__selected-label"),$licenseSelector:$(".js-purchase-license-selector"),$chosenLicense:$(".js-license-selector__chosen-license")},this._updateSelectedLabel(this.dom.$licenseSelector.val()),Market.GoogleAnalytics.ItemPage.init(),$(document).on("flyout:open",this.handleOpen),this.dom.$license.on("click",this.handleLicenseChange)},t.prototype.handleOpen=function(){return $(document).trigger("googleAnalytics:itemLicenseSelectorOpen")},t.prototype.handleLicenseChange=function(e){var t,i,n;return n=(t=$(e.currentTarget)).data("license"),i=t.data("name"),this.dom.$licenseSelector.val()!==n&&(this.dom.$licenseSelector.val(n),this.dom.$licenseSelector.trigger("change"),this._updateSelectedLabel(n),this._updateChosenLicense(i)),$(document).trigger("flyout:hide")},t.prototype._updateSelectedLabel=function(e){return this.dom.$selectedLabel.addClass("is-hidden"),this.dom.$selectedLabel.filter("[data-license='"+e+"']").removeClass("is-hidden")},t.prototype._updateChosenLicense=function(e){return this.dom.$chosenLicense.text(e)},t}()}.call(this),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Remarkable=e()}}((function(){var e;return function e(t,i,n){function s(a,o){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[a]={exports:{}};t[a][0].call(d.exports,(function(e){var i=t[a][1][e];return s(i||e)}),d,d.exports,e,t,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t){"use strict";t.exports={Aacute:"\xc1",aacute:"\xe1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",Acy:"\u0410",acy:"\u0430",AElig:"\xc6",aelig:"\xe6",af:"\u2061",Afr:"\ud835\udd04",afr:"\ud835\udd1e",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"&",amp:"&",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\xc5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\ud835\udd38",aopf:"\ud835\udd52",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\xc5",aring:"\xe5",Ascr:"\ud835\udc9c",ascr:"\ud835\udcb6",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\ud835\udd05",bfr:"\ud835\udd1f",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\ud835\udd39",bopf:"\ud835\udd53",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",breve:"\u02d8",brvbar:"\xa6",Bscr:"\u212c",bscr:"\ud835\udcb7",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\xc7",ccedil:"\xe7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\xb8",Cedilla:"\xb8",cemptyv:"\u29b2",cent:"\xa2",CenterDot:"\xb7",centerdot:"\xb7",Cfr:"\u212d",cfr:"\ud835\udd20",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\xae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",copf:"\ud835\udd54",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xa9",copy:"\xa9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\ud835\udc9e",cscr:"\ud835\udcb8",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\xa4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\xb0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\ud835\udd07",dfr:"\ud835\udd21",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\xb4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\xa8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\ud835\udd3b",dopf:"\ud835\udd55",Dot:"\xa8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\xa8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\ud835\udc9f",dscr:"\ud835\udcb9",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\xc9",eacute:"\xe9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\xca",ecirc:"\xea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\ud835\udd08",efr:"\ud835\udd22",eg:"\u2a9a",Egrave:"\xc8",egrave:"\xe8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\ud835\udd3c",eopf:"\ud835\udd56",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",
equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\ud835\udd09",ffr:"\ud835\udd23",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\ud835\udd3d",fopf:"\ud835\udd57",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\ud835\udcbb",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\ud835\udd0a",gfr:"\ud835\udd24",Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\ud835\udd3e",gopf:"\ud835\udd58",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\ud835\udca2",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",GT:">",Gt:"\u226b",gt:">",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\xbd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\ud835\udd25",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\ud835\udd59",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\ud835\udcbd",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xcd",iacute:"\xed",ic:"\u2063",Icirc:"\xce",icirc:"\xee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xa1",iff:"\u21d4",Ifr:"\u2111",ifr:"\ud835\udd26",Igrave:"\xcc",igrave:"\xec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\ud835\udd40",iopf:"\ud835\udd5a",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\xbf",Iscr:"\u2110",iscr:"\ud835\udcbe",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xcf",iuml:"\xef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\ud835\udd0d",jfr:"\ud835\udd27",jmath:"\u0237",Jopf:"\ud835\udd41",jopf:"\ud835\udd5b",Jscr:"\ud835\udca5",jscr:"\ud835\udcbf",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\ud835\udd0e",kfr:"\ud835\udd28",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\ud835\udd42",kopf:"\ud835\udd5c",Kscr:"\ud835\udca6",kscr:"\ud835\udcc0",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\xab",Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\ud835\udd0f",lfr:"\ud835\udd29",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\ud835\udd43",lopf:"\ud835\udd5d",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\ud835\udcc1",Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",LT:"<",Lt:"\u226a",lt:"<",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\ud835\udd10",mfr:"\ud835\udd2a",mho:"\u2127",micro:"\xb5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\xb7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\ud835\udd44",mopf:"\ud835\udd5e",mp:"\u2213",Mscr:"\u2133",mscr:"\ud835\udcc2",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\ud835\udd11",nfr:"\ud835\udd2b",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xa0",Nopf:"\u2115",nopf:"\ud835\udd5f",Not:"\u2aec",not:"\xac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\ud835\udca9",nscr:"\ud835\udcc3",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\xd1",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xd3",oacute:"\xf3",oast:"\u229b",ocir:"\u229a",Ocirc:"\xd4",ocirc:"\xf4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\ud835\udd12",ofr:"\ud835\udd2c",ogon:"\u02db",Ograve:"\xd2",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\ud835\udd46",oopf:"\ud835\udd60",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\ud835\udcaa",oscr:"\u2134",Oslash:"\xd8",oslash:"\xf8",osol:"\u2298",Otilde:"\xd5",otilde:"\xf5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\xd6",ouml:"\xf6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\xb6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\ud835\udd13",pfr:"\ud835\udd2d",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\xb1",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",Poincareplane:"\u210c",pointint:"\u2a15",Popf:"\u2119",popf:"\ud835\udd61",pound:"\xa3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\ud835\udcab",pscr:"\ud835\udcc5",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\ud835\udd14",qfr:"\ud835\udd2e",qint:"\u2a0c",Qopf:"\u211a",qopf:"\ud835\udd62",qprime:"\u2057",Qscr:"\ud835\udcac",qscr:"\ud835\udcc6",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\xae",reg:"\xae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\ud835\udd2f",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\ud835\udd63",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\ud835\udcc7",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\xa7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\ud835\udd16",sfr:"\ud835\udd30",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\ud835\udd4a",sopf:"\ud835\udd64",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\ud835\udcae",sscr:"\ud835\udcc8",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\xaf",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\xdf",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\ud835\udd17",tfr:"\ud835\udd31",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\xde",thorn:"\xfe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xd7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\ud835\udd4b",topf:"\ud835\udd65",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\ud835\udcaf",tscr:"\ud835\udcc9",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\xda",uacute:"\xfa",Uarr:"\u219f",uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\xdb",ucirc:"\xfb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\ud835\udd18",ufr:"\ud835\udd32",Ugrave:"\xd9",ugrave:"\xf9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\xa8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\ud835\udd4c",uopf:"\ud835\udd66",UpArrow:"\u2191",Uparrow:"\u21d1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\ud835\udcb0",uscr:"\ud835\udcca",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\xdc",uuml:"\xfc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\ud835\udd19",vfr:"\ud835\udd33",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\ud835\udd4d",vopf:"\ud835\udd67",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\ud835\udcb1",vscr:"\ud835\udccb",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\ud835\udd1a",wfr:"\ud835\udd34",Wopf:"\ud835\udd4e",wopf:"\ud835\udd68",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\ud835\udcb2",wscr:"\ud835\udccc",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\ud835\udd1b",xfr:"\ud835\udd35",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\ud835\udd4f",xopf:"\ud835\udd69",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\ud835\udcb3",xscr:"\ud835\udccd",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\xdd",yacute:"\xfd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\xa5",Yfr:"\ud835\udd1c",yfr:"\ud835\udd36",YIcy:"\u0407",yicy:"\u0457",Yopf:"\ud835\udd50",yopf:"\ud835\udd6a",Yscr:"\ud835\udcb4",yscr:"\ud835\udcce",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\xff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\ud835\udd37",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\ud835\udd6b",Zscr:"\ud835\udcb5",zscr:"\ud835\udccf",zwj:"\u200d",zwnj:"\u200c"}},{}],2:[function(e,t){"use strict";var i={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach((function(e){i[e]=!0})),t.exports=i},{}],3:[function(e,t){"use strict";function i(e,t){return e=e.source,t=t||"",function i(n,s){return n?(s=s.source||s,e=e.replace(n,s),i):new RegExp(e,t)}}var n=/[a-zA-Z_:][a-zA-Z0-9:._-]*/,s=/[^"'=<>`\x00-\x20]+/,r=/'[^']*'/,a=/"[^"]*"/,o=i(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",s)("single_quoted",r)("double_quoted",a)(),l=i(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",n)("attr_value",o)(),c=i(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",l)(),d=/<\/[A-Za-z][A-Za-z0-9]*\s*>/,h=/<!--([^-]+|[-][^-]+)*-->/,u=/<[?].*?[?]>/,p=/<![A-Z]+\s+[^>]*>/,f=/<!\[CDATA\[([^\]]+|\][^\]]|\]\][^>])*\]\]>/,m=i(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",c)("close_tag",d)("comment",h)("processing",u)("declaration",p)("cdata",f)();t.exports.HTML_TAG_RE=m},{}],4:[function(e,t){"use strict";t.exports=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"]},{}],5:[function(e,t,i){"use strict";function n(e){return Object.prototype.toString.call(e)}function s(e){return"[object String]"===n(e)}function r(e,t){return!!e&&f.call(e,t)}function a(e){return[].slice.call(arguments,1).forEach((function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach((function(i){e[i]=t[i]}))}})),e}function o(e){return e.indexOf("\\")<0?e:e.replace(m,"$1")}function l(e){return!(e>=55296&&e<=57343)&&(!(e>=64976&&e<=65007)&&(65535!=(65535&e)&&65534!=(65535&e)&&(!(e>=0&&e<=8)&&(11!==e&&(!(e>=14&&e<=31)&&(!(e>=127&&e<=159)&&!(e>1114111)))))))}function c(e){if(e>65535){var t=55296+((e-=65536)>>10),i=56320+(1023&e);return String.fromCharCode(t,i)}return String.fromCharCode(e)}function d(e,t){var i=0;return r(y,t)?y[t]:35===t.charCodeAt(0)&&v.test(t)&&l(i="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?c(i):e}function h(e){return e.indexOf("&")<0?e:e.replace(g,d)}function u(e){return $[e]}function p(e){return b.test(e)?e.replace(_,u):e}var f=Object.prototype.hasOwnProperty,m=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g,g=/&([a-z#][a-z0-9]{1,31});/gi,v=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,y=e("./entities"),b=/[&<>"]/,_=/[&<>"]/g,$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};i.assign=a,i.isString=s,i.has=r,i.unescapeMd=o,i.isValidEntityCode=l,i.fromCodePoint=c,i.replaceEntities=h,i.escapeHtml=p},{"./entities":1}],6:[function(e,t){"use strict";t.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,linkTarget:"",typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}}},{}],7:[function(e,t){"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,linkTarget:"",typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","linkify","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}}},{}],8:[function(e,t){"use strict";t.exports={options:{html:!1,
xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,linkTarget:"",typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}}},{}],9:[function(e,t){"use strict";var i=e("../common/utils").replaceEntities;t.exports=function(e){var t=i(e);try{t=decodeURI(t)}catch(e){}return encodeURI(t)}},{"../common/utils":5}],10:[function(e,t){"use strict";t.exports=function(e){return e.trim().replace(/\s+/g," ").toUpperCase()}},{}],11:[function(e,t){"use strict";var i=e("./normalize_link"),n=e("../common/utils").unescapeMd;t.exports=function(e,t){var s,r,a,o=t,l=e.posMax;if(60===e.src.charCodeAt(t)){for(t++;t<l;){if(10===(s=e.src.charCodeAt(t)))return!1;if(62===s)return a=i(n(e.src.slice(o+1,t))),!!e.parser.validateLink(a)&&(e.pos=t+1,e.linkContent=a,!0);92===s&&t+1<l?t+=2:t++}return!1}for(r=0;t<l&&32!==(s=e.src.charCodeAt(t))&&!(s>8&&s<14);)if(92===s&&t+1<l)t+=2;else{if(40===s&&++r>1)break;if(41===s&&--r<0)break;t++}return o!==t&&(a=n(e.src.slice(o,t)),!!e.parser.validateLink(a)&&(e.linkContent=a,e.pos=t,!0))}},{"../common/utils":5,"./normalize_link":9}],12:[function(e,t){"use strict";t.exports=function(e,t){var i,n,s,r=-1,a=e.posMax,o=e.pos,l=e.isInLabel;if(e.isInLabel)return-1;if(e.labelUnmatchedScopes)return e.labelUnmatchedScopes--,-1;for(e.pos=t+1,e.isInLabel=!0,i=1;e.pos<a;){if(91===(s=e.src.charCodeAt(e.pos)))i++;else if(93===s&&0===--i){n=!0;break}e.parser.skipToken(e)}return n?(r=e.pos,e.labelUnmatchedScopes=0):e.labelUnmatchedScopes=i-1,e.pos=o,e.isInLabel=l,r}},{}],13:[function(e,t){"use strict";var i=e("../common/utils").unescapeMd;t.exports=function(e,t){var n,s=t,r=e.posMax,a=e.src.charCodeAt(t);if(34!==a&&39!==a&&40!==a)return!1;for(t++,40===a&&(a=41);t<r;){if((n=e.src.charCodeAt(t))===a)return e.pos=t+1,e.linkContent=i(e.src.slice(s+1,t)),!0;92===n&&t+1<r?t+=2:t++}return!1}},{"../common/utils":5}],14:[function(e,t){"use strict";function i(e,t,i){this.src=t,this.env=i,this.options=e.options,this.tokens=[],this.inlineMode=!1,this.inline=e.inline,this.block=e.block,this.renderer=e.renderer,this.typographer=e.typographer}function n(e,t){"string"!=typeof e&&(t=e,e="default"),this.inline=new l,this.block=new o,this.core=new a,this.renderer=new r,this.ruler=new c,this.options={},this.configure(d[e]),this.set(t||{})}var s=e("./common/utils").assign,r=e("./renderer"),a=e("./parser_core"),o=e("./parser_block"),l=e("./parser_inline"),c=e("./ruler"),d={default:e("./configs/default"),full:e("./configs/full"),commonmark:e("./configs/commonmark")};n.prototype.set=function(e){s(this.options,e)},n.prototype.configure=function(e){var t=this;if(!e)throw new Error("Wrong `remarkable` preset, check name/content");e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach((function(i){e.components[i].rules&&t[i].ruler.enable(e.components[i].rules,!0)}))},n.prototype.use=function(e,t){return e(this,t),this},n.prototype.parse=function(e,t){var n=new i(this,e,t);return this.core.process(n),n.tokens},n.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},n.prototype.parseInline=function(e,t){var n=new i(this,e,t);return n.inlineMode=!0,this.core.process(n),n.tokens},n.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},t.exports=n,t.exports.utils=e("./common/utils")},{"./common/utils":5,"./configs/commonmark":6,"./configs/default":7,"./configs/full":8,"./parser_block":15,"./parser_core":16,"./parser_inline":17,"./renderer":18,"./ruler":19}],15:[function(e,t){"use strict";function i(){this.ruler=new n;for(var e=0;e<r.length;e++)this.ruler.push(r[e][0],r[e][1],{alt:(r[e][2]||[]).slice()})}var n=e("./ruler"),s=e("./rules_block/state_block"),r=[["code",e("./rules_block/code")],["fences",e("./rules_block/fences"),["paragraph","blockquote","list"]],["blockquote",e("./rules_block/blockquote"),["paragraph","blockquote","list"]],["hr",e("./rules_block/hr"),["paragraph","blockquote","list"]],["list",e("./rules_block/list"),["paragraph","blockquote"]],["footnote",e("./rules_block/footnote"),["paragraph"]],["heading",e("./rules_block/heading"),["paragraph","blockquote"]],["lheading",e("./rules_block/lheading")],["htmlblock",e("./rules_block/htmlblock"),["paragraph","blockquote"]],["table",e("./rules_block/table"),["paragraph"]],["deflist",e("./rules_block/deflist"),["paragraph"]],["paragraph",e("./rules_block/paragraph")]];i.prototype.tokenize=function(e,t,i){for(var n,s=this.ruler.getRules(""),r=s.length,a=t,o=!1;a<i&&(e.line=a=e.skipEmptyLines(a),!(a>=i))&&!(e.tShift[a]<e.blkIndent);){for(n=0;n<r&&!s[n](e,a,i,!1);n++);if(e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),(a=e.line)<i&&e.isEmpty(a)){if(o=!0,++a<i&&"list"===e.parentType&&e.isEmpty(a))break;e.line=a}}};var a=/[\n\t]/g,o=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,l=/\u00a0/g;i.prototype.parse=function(e,t,i,n){var r,c=0,d=0;if(!e)return[];(e=(e=e.replace(l," ")).replace(o,"\n")).indexOf("\t")>=0&&(e=e.replace(a,(function(t,i){var n;return 10===e.charCodeAt(i)?(c=i+1,d=0,t):(n="    ".slice((i-c-d)%4),d=i-c+1,n)}))),r=new s(e,this,t,i,n),this.tokenize(r,r.line,r.lineMax)},t.exports=i},{"./ruler":19,"./rules_block/blockquote":21,"./rules_block/code":22,"./rules_block/deflist":23,"./rules_block/fences":24,"./rules_block/footnote":25,"./rules_block/heading":26,"./rules_block/hr":27,"./rules_block/htmlblock":28,"./rules_block/lheading":29,"./rules_block/list":30,"./rules_block/paragraph":31,"./rules_block/state_block":32,"./rules_block/table":33}],16:[function(e,t){"use strict";function i(){this.options={},this.ruler=new n;for(var e=0;e<s.length;e++)this.ruler.push(s[e][0],s[e][1])}var n=e("./ruler"),s=[["block",e("./rules_core/block")],["abbr",e("./rules_core/abbr")],["references",e("./rules_core/references")],["inline",e("./rules_core/inline")],["footnote_tail",e("./rules_core/footnote_tail")],["abbr2",e("./rules_core/abbr2")],["replacements",e("./rules_core/replacements")],["smartquotes",e("./rules_core/smartquotes")],["linkify",e("./rules_core/linkify")]];i.prototype.process=function(e){var t,i,n;for(t=0,i=(n=this.ruler.getRules("")).length;t<i;t++)n[t](e)},t.exports=i},{"./ruler":19,"./rules_core/abbr":34,"./rules_core/abbr2":35,"./rules_core/block":36,"./rules_core/footnote_tail":37,"./rules_core/inline":38,"./rules_core/linkify":39,"./rules_core/references":40,"./rules_core/replacements":41,"./rules_core/smartquotes":42}],17:[function(e,t){"use strict";function i(){this.ruler=new s;for(var e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1]);this.validateLink=n}function n(e){var t=["vbscript","javascript","file","data"],i=e.trim().toLowerCase();return-1===(i=a.replaceEntities(i)).indexOf(":")||-1===t.indexOf(i.split(":")[0])}var s=e("./ruler"),r=e("./rules_inline/state_inline"),a=e("./common/utils"),o=[["text",e("./rules_inline/text")],["newline",e("./rules_inline/newline")],["escape",e("./rules_inline/escape")],["backticks",e("./rules_inline/backticks")],["del",e("./rules_inline/del")],["ins",e("./rules_inline/ins")],["mark",e("./rules_inline/mark")],["emphasis",e("./rules_inline/emphasis")],["sub",e("./rules_inline/sub")],["sup",e("./rules_inline/sup")],["links",e("./rules_inline/links")],["footnote_inline",e("./rules_inline/footnote_inline")],["footnote_ref",e("./rules_inline/footnote_ref")],["autolink",e("./rules_inline/autolink")],["htmltag",e("./rules_inline/htmltag")],["entity",e("./rules_inline/entity")]];i.prototype.skipToken=function(e){var t,i,n=this.ruler.getRules(""),s=n.length,r=e.pos;if((i=e.cacheGet(r))>0)e.pos=i;else{for(t=0;t<s;t++)if(n[t](e,!0))return void e.cacheSet(r,e.pos);e.pos++,e.cacheSet(r,e.pos)}},i.prototype.tokenize=function(e){for(var t,i,n=this.ruler.getRules(""),s=n.length,r=e.posMax;e.pos<r;){for(i=0;i<s&&!(t=n[i](e,!1));i++);if(t){if(e.pos>=r)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},i.prototype.parse=function(e,t,i,n){var s=new r(e,this,t,i,n);this.tokenize(s)},t.exports=i},{"./common/utils":5,"./ruler":19,"./rules_inline/autolink":43,"./rules_inline/backticks":44,"./rules_inline/del":45,"./rules_inline/emphasis":46,"./rules_inline/entity":47,"./rules_inline/escape":48,"./rules_inline/footnote_inline":49,"./rules_inline/footnote_ref":50,"./rules_inline/htmltag":51,"./rules_inline/ins":52,"./rules_inline/links":53,"./rules_inline/mark":54,"./rules_inline/newline":55,"./rules_inline/state_inline":56,"./rules_inline/sub":57,"./rules_inline/sup":58,"./rules_inline/text":59}],18:[function(e,t){"use strict";function i(){this.rules=n.assign({},s),this.getBreak=s.getBreak}var n=e("./common/utils"),s=e("./rules");t.exports=i,i.prototype.renderInline=function(e,t,i){for(var n=this.rules,s=e.length,r=0,a="";s--;)a+=n[e[r].type](e,r++,t,i,this);return a},i.prototype.render=function(e,t,i){for(var n=this.rules,s=e.length,r=-1,a="";++r<s;)"inline"===e[r].type?a+=this.renderInline(e[r].children,t,i):a+=n[e[r].type](e,r,t,i,this);return a}},{"./common/utils":5,"./rules":20}],19:[function(e,t){"use strict";function i(){this.__rules__=[],this.__cache__=null}i.prototype.__find__=function(e){for(var t=this.__rules__.length,i=-1;t--;)if(this.__rules__[++i].name===e)return i;return-1},i.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach((function(e){e.enabled&&e.alt.forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),e.__cache__={},t.forEach((function(t){e.__cache__[t]=[],e.__rules__.forEach((function(i){i.enabled&&(t&&i.alt.indexOf(t)<0||e.__cache__[t].push(i.fn))}))}))},i.prototype.at=function(e,t,i){var n=this.__find__(e),s=i||{};if(-1===n)throw new Error("Parser rule not found: "+e);this.__rules__[n].fn=t,this.__rules__[n].alt=s.alt||[],this.__cache__=null},i.prototype.before=function(e,t,i,n){var s=this.__find__(e),r=n||{};if(-1===s)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s,0,{name:t,enabled:!0,fn:i,alt:r.alt||[]}),this.__cache__=null},i.prototype.after=function(e,t,i,n){var s=this.__find__(e),r=n||{};if(-1===s)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s+1,0,{name:t,enabled:!0,fn:i,alt:r.alt||[]}),this.__cache__=null},i.prototype.push=function(e,t,i){var n=i||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:n.alt||[]}),this.__cache__=null},i.prototype.enable=function(e,t){e=Array.isArray(e)?e:[e],t&&this.__rules__.forEach((function(e){e.enabled=!1})),e.forEach((function(e){var t=this.__find__(e);if(t<0)throw new Error("Rules manager: invalid rule name "+e);this.__rules__[t].enabled=!0}),this),this.__cache__=null},i.prototype.disable=function(e){(e=Array.isArray(e)?e:[e]).forEach((function(e){var t=this.__find__(e);if(t<0)throw new Error("Rules manager: invalid rule name "+e);this.__rules__[t].enabled=!1}),this),this.__cache__=null},i.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},t.exports=i},{}],20:[function(e,t){"use strict";function i(e,t){return++t>=e.length-2?t:"paragraph_open"===e[t].type&&e[t].tight&&"inline"===e[t+1].type&&0===e[t+1].content.length&&"paragraph_close"===e[t+2].type&&e[t+2].tight?i(e,t+2):t}var n=e("./common/utils").has,s=e("./common/utils").unescapeMd,r=e("./common/utils").replaceEntities,a=e("./common/utils").escapeHtml,o={blockquote_open:function(){return"<blockquote>\n"},blockquote_close:function(e,t){return"</blockquote>"+l(e,t)},code:function(e,t){return e[t].block?"<pre><code>"+a(e[t].content)+"</code></pre>"+l(e,t):"<code>"+a(e[t].content)+"</code>"},fence:function(e,t,i,o,c){var d,h,u=e[t],p="",f=i.langPrefix;if(u.params){if(h=(d=u.params.split(/\s+/g)).join(" "),n(c.rules.fence_custom,d[0]))return c.rules.fence_custom[d[0]](e,t,i,o,c);p=' class="'+f+a(r(s(h)))+'"'}return"<pre><code"+p+">"+(i.highlight&&i.highlight.apply(i.highlight,[u.content].concat(d))||a(u.content))+"</code></pre>"+l(e,t)},fence_custom:{},heading_open:function(e,t){return"<h"+e[t].hLevel+">"},heading_close:function(e,t){return"</h"+e[t].hLevel+">\n"},hr:function(e,t,i){return(i.xhtmlOut?"<hr />":"<hr>")+l(e,t)},bullet_list_open:function(){return"<ul>\n"},bullet_list_close:function(e,t){return"</ul>"+l(e,t)},list_item_open:function(){return"<li>"},list_item_close:function(){return"</li>\n"},ordered_list_open:function(e,t){var i=e[t];return"<ol"+(i.order>1?' start="'+i.order+'"':"")+">\n"},ordered_list_close:function(e,t){return"</ol>"+l(e,t)},paragraph_open:function(e,t){return e[t].tight?"":"<p>"},paragraph_close:function(e,t){var i=!(e[t].tight&&t&&"inline"===e[t-1].type&&!e[t-1].content);return(e[t].tight?"":"</p>")+(i?l(e,t):"")},link_open:function(e,t,i){var n=e[t].title?' title="'+a(r(e[t].title))+'"':"",s=i.linkTarget?' target="'+i.linkTarget+'"':"";return'<a href="'+a(e[t].href)+'"'+n+s+">"},link_close:function(){return"</a>"},image:function(e,t,i){var n=' src="'+a(e[t].src)+'"',o=e[t].title?' title="'+a(r(e[t].title))+'"':"";return"<img"+n+(' alt="'+(e[t].alt?a(r(s(e[t].alt))):"")+'"')+o+(i.xhtmlOut?" /":"")+">"},table_open:function(){return"<table>\n"},table_close:function(){return"</table>\n"},thead_open:function(){return"<thead>\n"},thead_close:function(){return"</thead>\n"},tbody_open:function(){return"<tbody>\n"},tbody_close:function(){return"</tbody>\n"},tr_open:function(){return"<tr>"},tr_close:function(){return"</tr>\n"},th_open:function(e,t){var i=e[t];return"<th"+(i.align?' style="text-align:'+i.align+'"':"")+">"},th_close:function(){return"</th>"},td_open:function(e,t){var i=e[t];return"<td"+(i.align?' style="text-align:'+i.align+'"':"")+">"},td_close:function(){return"</td>"},strong_open:function(){return"<strong>"},strong_close:function(){return"</strong>"},em_open:function(){return"<em>"},em_close:function(){return"</em>"},del_open:function(){return"<del>"},del_close:function(){return"</del>"},ins_open:function(){return"<ins>"},ins_close:function(){return"</ins>"},mark_open:function(){return"<mark>"},mark_close:function(){return"</mark>"},sub:function(e,t){return"<sub>"+a(e[t].content)+"</sub>"},sup:function(e,t){return"<sup>"+a(e[t].content)+"</sup>"},hardbreak:function(e,t,i){return i.xhtmlOut?"<br />\n":"<br>\n"},softbreak:function(e,t,i){return i.breaks?i.xhtmlOut?"<br />\n":"<br>\n":"\n"},text:function(e,t){return a(e[t].content)},htmlblock:function(e,t){return e[t].content},htmltag:function(e,t){return e[t].content},abbr_open:function(e,t){return'<abbr title="'+a(r(e[t].title))+'">'},abbr_close:function(){return"</abbr>"},footnote_ref:function(e,t){var i=Number(e[t].id+1).toString(),n="fnref"+i;return e[t].subId>0&&(n+=":"+e[t].subId),'<sup class="footnote-ref"><a href="#fn'+i+'" id="'+n+'">['+i+"]</a></sup>"},footnote_block_open:function(e,t,i){return(i.xhtmlOut?'<hr class="footnotes-sep" />\n':'<hr class="footnotes-sep">\n')+'<section class="footnotes">\n<ol class="footnotes-list">\n'},footnote_block_close:function(){return"</ol>\n</section>\n"},footnote_open:function(e,t){return'<li id="fn'+Number(e[t].id+1).toString()+'"  class="footnote-item">'},footnote_close:function(){return"</li>\n"},footnote_anchor:function(e,t){var i="fnref"+Number(e[t].id+1).toString();return e[t].subId>0&&(i+=":"+e[t].subId),' <a href="#'+i+'" class="footnote-backref">\u21a9</a>'},dl_open:function(){return"<dl>\n"},dt_open:function(){return"<dt>"},dd_open:function(){return"<dd>"},dl_close:function(){return"</dl>\n"},dt_close:function(){return"</dt>\n"},dd_close:function(){return"</dd>\n"}},l=o.getBreak=function(e,t){return(t=i(e,t))<e.length&&"list_item_close"===e[t].type?"":"\n"};t.exports=o},{"./common/utils":5}],21:[function(e,t){"use strict";t.exports=function(e,t,i,n){var s,r,a,o,l,c,d,h,u,p,f,m=e.bMarks[t]+e.tShift[t],g=e.eMarks[t];if(m>g)return!1;if(62!==e.src.charCodeAt(m++))return!1;if(e.level>=e.options.maxNesting)return!1;if(n)return!0;for(32===e.src.charCodeAt(m)&&m++,l=e.blkIndent,e.blkIndent=0,o=[e.bMarks[t]],e.bMarks[t]=m,r=(m=m<g?e.skipSpaces(m):m)>=g,a=[e.tShift[t]],e.tShift[t]=m-e.bMarks[t],h=e.parser.ruler.getRules("blockquote"),s=t+1;s<i&&!((m=e.bMarks[s]+e.tShift[s])>=(g=e.eMarks[s]));s++)if(62!==e.src.charCodeAt(m++)){if(r)break;for(f=!1,u=0,p=h.length;u<p;u++)if(h[u](e,s,i,!0)){f=!0;break}if(f)break;o.push(e.bMarks[s]),a.push(e.tShift[s]),e.tShift[s]=-1337}else 32===e.src.charCodeAt(m)&&m++,o.push(e.bMarks[s]),e.bMarks[s]=m,r=(m=m<g?e.skipSpaces(m):m)>=g,a.push(e.tShift[s]),e.tShift[s]=m-e.bMarks[s];for(c=e.parentType,e.parentType="blockquote",e.tokens.push({type:"blockquote_open",lines:d=[t,0],level:e.level++}),e.parser.tokenize(e,t,s),e.tokens.push({type:"blockquote_close",level:--e.level}),e.parentType=c,d[1]=e.line,u=0;u<a.length;u++)e.bMarks[u+t]=o[u],e.tShift[u+t]=a[u];return e.blkIndent=l,!0}},{}],22:[function(e,t){"use strict";t.exports=function(e,t,i){var n,s;if(e.tShift[t]-e.blkIndent<4)return!1;for(s=n=t+1;n<i;)if(e.isEmpty(n))n++;else{if(!(e.tShift[n]-e.blkIndent>=4))break;s=++n}return e.line=n,e.tokens.push({type:"code",content:e.getLines(t,s,4+e.blkIndent,!0),block:!0,lines:[t,e.line],level:e.level}),!0}},{}],23:[function(e,t){"use strict";function i(e,t){var i,n,s=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return s>=r||126!==(n=e.src.charCodeAt(s++))&&58!==n||s===(i=e.skipSpaces(s))||i>=r?-1:i}function n(e,t){var i,n,s=e.level+2;for(i=t+2,n=e.tokens.length-2;i<n;i++)e.tokens[i].level===s&&"paragraph_open"===e.tokens[i].type&&(e.tokens[i+2].tight=!0,e.tokens[i].tight=!0,i+=2)}t.exports=function(e,t,s,r){var a,o,l,c,d,h,u,p,f,m,g,v,y,b;if(r)return!(e.ddIndent<0)&&i(e,t)>=0;if(u=t+1,e.isEmpty(u)&&++u>s)return!1;if(e.tShift[u]<e.blkIndent)return!1;if((a=i(e,u))<0)return!1;if(e.level>=e.options.maxNesting)return!1;h=e.tokens.length,e.tokens.push({type:"dl_open",lines:d=[t,0],level:e.level++}),l=t,o=u;e:for(;;){for(b=!0,y=!1,e.tokens.push({type:"dt_open",lines:[l,l],level:e.level++}),e.tokens.push({type:"inline",content:e.getLines(l,l+1,e.blkIndent,!1).trim(),level:e.level+1,lines:[l,l],children:[]}),e.tokens.push({type:"dt_close",level:--e.level});;){if(e.tokens.push({type:"dd_open",lines:c=[u,0],level:e.level++}),v=e.tight,f=e.ddIndent,p=e.blkIndent,g=e.tShift[o],m=e.parentType,e.blkIndent=e.ddIndent=e.tShift[o]+2,e.tShift[o]=a-e.bMarks[o],e.tight=!0,e.parentType="deflist",e.parser.tokenize(e,o,s,!0),e.tight&&!y||(b=!1),y=e.line-o>1&&e.isEmpty(e.line-1),e.tShift[o]=g,e.tight=v,e.parentType=m,e.blkIndent=p,e.ddIndent=f,e.tokens.push({type:"dd_close",level:--e.level}),c[1]=u=e.line,u>=s)break e;if(e.tShift[u]<e.blkIndent)break e;if((a=i(e,u))<0)break;o=u}if(u>=s)break;if(l=u,e.isEmpty(l))break;if(e.tShift[l]<e.blkIndent)break;if((o=l+1)>=s)break;if(e.isEmpty(o)&&o++,o>=s)break;if(e.tShift[o]<e.blkIndent)break;if((a=i(e,o))<0)break}return e.tokens.push({type:"dl_close",level:--e.level}),d[1]=u,e.line=u,b&&n(e,h),!0}},{}],24:[function(e,t){"use strict";t.exports=function(e,t,i,n){var s,r,a,o,l,c=!1,d=e.bMarks[t]+e.tShift[t],h=e.eMarks[t];if(d+3>h)return!1;if(126!==(s=e.src.charCodeAt(d))&&96!==s)return!1;if(l=d,(r=(d=e.skipChars(d,s))-l)<3)return!1;if((a=e.src.slice(d,h).trim()).indexOf("`")>=0)return!1;if(n)return!0;for(o=t;!(++o>=i)&&!((d=l=e.bMarks[o]+e.tShift[o])<(h=e.eMarks[o])&&e.tShift[o]<e.blkIndent);)if(e.src.charCodeAt(d)===s&&!(e.tShift[o]-e.blkIndent>=4||(d=e.skipChars(d,s))-l<r||(d=e.skipSpaces(d))<h)){c=!0;break}return r=e.tShift[t],e.line=o+(c?1:0),e.tokens.push({type:"fence",params:a,content:e.getLines(t+1,o,r,!0),lines:[t,e.line],level:e.level}),!0}},{}],25:[function(e,t){"use strict";t.exports=function(e,t,i,n){var s,r,a,o,l,c=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(c+4>d)return!1;if(91!==e.src.charCodeAt(c))return!1;if(94!==e.src.charCodeAt(c+1))return!1;if(e.level>=e.options.maxNesting)return!1;for(o=c+2;o<d;o++){if(32===e.src.charCodeAt(o))return!1;if(93===e.src.charCodeAt(o))break}return o!==c+2&&(!(o+1>=d||58!==e.src.charCodeAt(++o))&&(n||(o++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),l=e.src.slice(c+2,o-2),e.env.footnotes.refs[":"+l]=-1,e.tokens.push({type:"footnote_reference_open",label:l,level:e.level++}),s=e.bMarks[t],r=e.tShift[t],a=e.parentType,e.tShift[t]=e.skipSpaces(o)-o,e.bMarks[t]=o,e.blkIndent+=4,e.parentType="footnote",e.tShift[t]<e.blkIndent&&(e.tShift[t]+=e.blkIndent,e.bMarks[t]-=e.blkIndent),e.parser.tokenize(e,t,i,!0),e.parentType=a,e.blkIndent-=4,e.tShift[t]=r,e.bMarks[t]=s,e.tokens.push({type:"footnote_reference_close",level:--e.level})),!0))}},{}],26:[function(e,t){"use strict";t.exports=function(e,t,i,n){var s,r,a,o=e.bMarks[t]+e.tShift[t],l=e.eMarks[t];if(o>=l)return!1;if(35!==(s=e.src.charCodeAt(o))||o>=l)return!1;for(r=1,s=e.src.charCodeAt(++o);35===s&&o<l&&r<=6;)r++,s=e.src.charCodeAt(++o);return!(r>6||o<l&&32!==s)&&(n||(l=e.skipCharsBack(l,32,o),(a=e.skipCharsBack(l,35,o))>o&&32===e.src.charCodeAt(a-1)&&(l=a),e.line=t+1,e.tokens.push({type:"heading_open",hLevel:r,lines:[t,e.line],level:e.level}),o<l&&e.tokens.push({type:"inline",content:e.src.slice(o,l).trim(),level:e.level+1,lines:[t,e.line],children:[]}),e.tokens.push({type:"heading_close",hLevel:r,level:e.level})),!0)}},{}],27:[function(e,t){"use strict";t.exports=function(e,t,i,n){var s,r,a,o=e.bMarks[t],l=e.eMarks[t];if((o+=e.tShift[t])>l)return!1;if(42!==(s=e.src.charCodeAt(o++))&&45!==s&&95!==s)return!1;for(r=1;o<l;){if((a=e.src.charCodeAt(o++))!==s&&32!==a)return!1;a===s&&r++}return!(r<3)&&(n||(e.line=t+1,e.tokens.push({type:"hr",lines:[t,e.line],level:e.level})),!0)}},{}],28:[function(e,t){"use strict";function i(e){var t=32|e;return t>=97&&t<=122}var n=e("../common/html_blocks"),s=/^<([a-zA-Z]{1,15})[\s\/>]/,r=/^<\/([a-zA-Z]{1,15})[\s>]/;t.exports=function(e,t,a,o){var l,c,d,h=e.bMarks[t],u=e.eMarks[t],p=e.tShift[t];if(h+=p,!e.options.html)return!1;if(p>3||h+2>=u)return!1;if(60!==e.src.charCodeAt(h))return!1;if(33===(l=e.src.charCodeAt(h+1))||63===l){if(o)return!0}else{if(47!==l&&!i(l))return!1;if(47===l){if(!(c=e.src.slice(h,u).match(r)))return!1}else if(!(c=e.src.slice(h,u).match(s)))return!1;if(!0!==n[c[1].toLowerCase()])return!1;if(o)return!0}for(d=t+1;d<e.lineMax&&!e.isEmpty(d);)d++;return e.line=d,e.tokens.push({type:"htmlblock",level:e.level,lines:[t,e.line],content:e.getLines(t,d,0,!0)}),!0}},{"../common/html_blocks":2}],29:[function(e,t){"use strict";t.exports=function(e,t,i){var n,s,r,a=t+1;return!(a>=i)&&(!(e.tShift[a]<e.blkIndent)&&(!(e.tShift[a]-e.blkIndent>3)&&(!((s=e.bMarks[a]+e.tShift[a])>=(r=e.eMarks[a]))&&((45===(n=e.src.charCodeAt(s))||61===n)&&(s=e.skipChars(s,n),!((s=e.skipSpaces(s))<r)&&(s=e.bMarks[t]+e.tShift[t],e.line=a+1,e.tokens.push({type:"heading_open",hLevel:61===n?1:2,lines:[t,e.line],level:e.level}),e.tokens.push({type:"inline",content:e.src.slice(s,e.eMarks[t]).trim(),level:e.level+1,lines:[t,e.line-1],children:[]}),e.tokens.push({type:"heading_close",hLevel:61===n?1:2,level:e.level}),!0))))))}},{}],30:[function(e,t){"use strict";function i(e,t){var i,n,s;return(n=e.bMarks[t]+e.tShift[t])>=(s=e.eMarks[t])||42!==(i=e.src.charCodeAt(n++))&&45!==i&&43!==i||n<s&&32!==e.src.charCodeAt(n)?-1:n}function n(e,t){var i,n=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(n+1>=s)return-1;if((i=e.src.charCodeAt(n++))<48||i>57)return-1;for(;;){if(n>=s)return-1;if(!((i=e.src.charCodeAt(n++))>=48&&i<=57)){if(41===i||46===i)break;return-1}}return n<s&&32!==e.src.charCodeAt(n)?-1:n}function s(e,t){var i,n,s=e.level+2;for(i=t+2,n=e.tokens.length-2;i<n;i++)e.tokens[i].level===s&&"paragraph_open"===e.tokens[i].type&&(e.tokens[i+2].tight=!0,e.tokens[i].tight=!0,i+=2)}t.exports=function(e,t,r,a){var o,l,c,d,h,u,p,f,m,g,v,y,b,_,$,k,w,C,x,S,A,P=!0;if((f=n(e,t))>=0)y=!0;else{if(!((f=i(e,t))>=0))return!1;y=!1}if(e.level>=e.options.maxNesting)return!1;if(v=e.src.charCodeAt(f-1),a)return!0;for(_=e.tokens.length,y?(p=e.bMarks[t]+e.tShift[t],g=Number(e.src.substr(p,f-p-1)),e.tokens.push({type:"ordered_list_open",order:g,lines:k=[t,0],level:e.level++})):e.tokens.push({type:"bullet_list_open",lines:k=[t,0],level:e.level++}),o=t,$=!1,C=e.parser.ruler.getRules("list");!(!(o<r)||((m=(b=e.skipSpaces(f))>=e.eMarks[o]?1:b-f)>4&&(m=1),m<1&&(m=1),l=f-e.bMarks[o]+m,e.tokens.push({type:"list_item_open",lines:w=[t,0],level:e.level++}),d=e.blkIndent,h=e.tight,c=e.tShift[t],u=e.parentType,e.tShift[t]=b-e.bMarks[t],e.blkIndent=l,e.tight=!0,e.parentType="list",e.parser.tokenize(e,t,r,!0),e.tight&&!$||(P=!1),$=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=d,e.tShift[t]=c,e.tight=h,e.parentType=u,e.tokens.push({type:"list_item_close",level:--e.level}),o=t=e.line,w[1]=o,b=e.bMarks[t],o>=r)||e.isEmpty(o)||e.tShift[o]<e.blkIndent);){for(A=!1,x=0,S=C.length;x<S;x++)if(C[x](e,o,r,!0)){A=!0;break}if(A)break;if(y){if((f=n(e,o))<0)break}else if((f=i(e,o))<0)break;if(v!==e.src.charCodeAt(f-1))break}return e.tokens.push({type:y?"ordered_list_close":"bullet_list_close",level:--e.level}),k[1]=o,e.line=o,P&&s(e,_),!0}},{}],31:[function(e,t){"use strict";t.exports=function(e,t){var i,n,s,r,a,o,l=t+1;if(l<(i=e.lineMax)&&!e.isEmpty(l))for(o=e.parser.ruler.getRules("paragraph");l<i&&!e.isEmpty(l);l++)if(!(e.tShift[l]-e.blkIndent>3)){for(s=!1,r=0,a=o.length;r<a;r++)if(o[r](e,l,i,!0)){s=!0;break}if(s)break}return n=e.getLines(t,l,e.blkIndent,!1).trim(),e.line=l,n.length&&(e.tokens.push({type:"paragraph_open",tight:!1,lines:[t,e.line],level:e.level}),e.tokens.push({type:"inline",content:n,level:e.level+1,lines:[t,e.line],children:[]}),e.tokens.push({type:"paragraph_close",tight:!1,level:e.level})),!0}},{}],32:[function(e,t){"use strict";function i(e,t,i,n,s){var r,a,o,l,c,d,h;for(this.src=e,this.parser=t,this.options=i,this.env=n,this.tokens=s,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",d=0,h=!1,o=l=d=0,c=(a=this.src).length;l<c;l++){if(r=a.charCodeAt(l),!h){if(32===r){d++;continue}h=!0}10!==r&&l!==c-1||(10!==r&&l++,this.bMarks.push(o),this.eMarks.push(l),this.tShift.push(d),h=!1,d=0,o=l+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}i.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},i.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},i.prototype.skipSpaces=function(e){for(var t=this.src.length;e<t&&32===this.src.charCodeAt(e);e++);return e},i.prototype.skipChars=function(e,t){for(var i=this.src.length;e<i&&this.src.charCodeAt(e)===t;e++);return e},i.prototype.skipCharsBack=function(e,t,i){if(e<=i)return e;for(;e>i;)if(t!==this.src.charCodeAt(--e))return e+1;return e},i.prototype.getLines=function(e,t,i,n){var s,r,a,o,l,c=e;if(e>=t)return"";if(c+1===t)return r=this.bMarks[c]+Math.min(this.tShift[c],i),a=n?this.eMarks[c]+1:this.eMarks[c],this.src.slice(r,a);for(o=new Array(t-e),s=0;c<t;c++,s++)(l=this.tShift[c])>i&&(l=i),l<0&&(l=0),r=this.bMarks[c]+l,a=c+1<t||n?this.eMarks[c]+1:this.eMarks[c],o[s]=this.src.slice(r,a);return o.join("")},t.exports=i},{}],33:[function(e,t){"use strict";function i(e,t){var i=e.bMarks[t]+e.blkIndent,n=e.eMarks[t];return e.src.substr(i,n-i)}t.exports=function(e,t,n,s){var r,a,o,l,c,d,h,u,p,f,m;if(t+2>n)return!1;if(c=t+1,e.tShift[c]<e.blkIndent)return!1;if((o=e.bMarks[c]+e.tShift[c])>=e.eMarks[c])return!1;if(124!==(r=e.src.charCodeAt(o))&&45!==r&&58!==r)return!1;if(a=i(e,t+1),!/^[-:| ]+$/.test(a))return!1;if((d=a.split("|"))<=2)return!1;for(u=[],l=0;l<d.length;l++){if(!(p=d[l].trim())){if(0===l||l===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(p))return!1;58===p.charCodeAt(p.length-1)?u.push(58===p.charCodeAt(0)?"center":"right"):58===p.charCodeAt(0)?u.push("left"):u.push("")}if(-1===(a=i(e,t).trim()).indexOf("|"))return!1;if(d=a.replace(/^\||\|$/g,"").split("|"),u.length!==d.length)return!1;if(s)return!0;for(e.tokens.push({type:"table_open",lines:f=[t,0],level:e.level++}),e.tokens.push({type:"thead_open",lines:[t,t+1],level:e.level++}),e.tokens.push({type:"tr_open",lines:[t,t+1],level:e.level++}),l=0;l<d.length;l++)e.tokens.push({type:"th_open",align:u[l],lines:[t,t+1],level:e.level++}),e.tokens.push({type:"inline",content:d[l].trim(),lines:[t,t+1],level:e.level,children:[]}),e.tokens.push({type:"th_close",level:--e.level});for(e.tokens.push({type:"tr_close",level:--e.level}),e.tokens.push({type:"thead_close",level:--e.level}),e.tokens.push({type:"tbody_open",lines:m=[t+2,0],level:e.level++}),c=t+2;c<n&&!(e.tShift[c]<e.blkIndent)&&-1!==(a=i(e,c).trim()).indexOf("|");c++){for(d=a.replace(/^\||\|$/g,"").split("|"),e.tokens.push({type:"tr_open",level:e.level++}),l=0;l<d.length;l++)e.tokens.push({type:"td_open",align:u[l],level:e.level++}),h=d[l].substring(124===d[l].charCodeAt(0)?1:0,124===d[l].charCodeAt(d[l].length-1)?d[l].length-1:d[l].length).trim(),e.tokens.push({type:"inline",content:h,level:e.level,children:[]}),e.tokens.push({type:"td_close",level:--e.level});e.tokens.push({type:"tr_close",level:--e.level})}return e.tokens.push({type:"tbody_close",level:--e.level}),e.tokens.push({type:"table_close",level:--e.level}),f[1]=m[1]=c,e.line=c,!0}},{}],34:[function(e,t){"use strict";function i(e,t,i,r){var a,o,l,c,d,h;if(42!==e.charCodeAt(0))return-1;if(91!==e.charCodeAt(1))return-1;if(-1===e.indexOf("]:"))return-1;if(a=new n(e,t,i,r,[]),(o=s(a,1))<0||58!==e.charCodeAt(o+1))return-1;for(c=a.posMax,l=o+2;l<c&&10!==a.src.charCodeAt(l);l++);return d=e.slice(2,o),0===(h=e.slice(o+2,l).trim()).length?-1:(r.abbreviations||(r.abbreviations={}),void 0===r.abbreviations[":"+d]&&(r.abbreviations[":"+d]=h),l)}var n=e("../rules_inline/state_inline"),s=e("../helpers/parse_link_label");t.exports=function(e){var t,n,s,r,a=e.tokens;if(!e.inlineMode)for(t=1,n=a.length-1;t<n;t++)if("paragraph_open"===a[t-1].type&&"inline"===a[t].type&&"paragraph_close"===a[t+1].type){for(s=a[t].content;s.length&&!((r=i(s,e.inline,e.options,e.env))<0);)s=s.slice(r).trim();a[t].content=s,s.length||(a[t-1].tight=!0,a[t+1].tight=!0)}}},{"../helpers/parse_link_label":12,"../rules_inline/state_inline":56}],35:[function(e,t){"use strict";function i(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}var n=" \n()[]'\".,!?-";t.exports=function(e){var t,s,r,a,o,l,c,d,h,u,p,f,m=e.tokens;if(e.env.abbreviations)for(e.env.abbrRegExp||(f="(^|["+n.split("").map(i).join("")+"])("+Object.keys(e.env.abbreviations).map((function(e){return e.substr(1)})).sort((function(e,t){return t.length-e.length})).map(i).join("|")+")($|["+n.split("").map(i).join("")+"])",e.env.abbrRegExp=new RegExp(f,"g")),u=e.env.abbrRegExp,s=0,r=m.length;s<r;s++)if("inline"===m[s].type)for(t=(a=m[s].children).length-1;t>=0;t--)if("text"===(o=a[t]).type){for(d=0,l=o.content,u.lastIndex=0,h=o.level,c=[];p=u.exec(l);)u.lastIndex>d&&c.push({type:"text",content:l.slice(d,p.index+p[1].length),level:h}),c.push({type:"abbr_open",title:e.env.abbreviations[":"+p[2]],level:h++}),c.push({type:"text",content:p[2],level:h}),c.push({type:"abbr_close",level:--h}),d=u.lastIndex-p[3].length;c.length&&(d<l.length&&c.push({type:"text",content:l.slice(d),level:h}),m[s].children=a=[].concat(a.slice(0,t),c,a.slice(t+1)))}}},{}],36:[function(e,t){"use strict";t.exports=function(e){e.inlineMode?e.tokens.push({type:"inline",content:e.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):e.block.parse(e.src,e.options,e.env,e.tokens)}},{}],37:[function(e,t){"use strict";t.exports=function(e){var t,i,n,s,r,a,o,l,c,d=0,h=!1,u={};if(e.env.footnotes&&(e.tokens=e.tokens.filter((function(e){return"footnote_reference_open"===e.type?(h=!0,l=[],c=e.label,!1):"footnote_reference_close"===e.type?(h=!1,u[":"+c]=l,!1):(h&&l.push(e),!h)})),e.env.footnotes.list)){for(a=e.env.footnotes.list,e.tokens.push({type:"footnote_block_open",level:d++}),t=0,i=a.length;t<i;t++){for(e.tokens.push({type:"footnote_open",id:t,level:d++}),a[t].tokens?((o=[]).push({type:"paragraph_open",tight:!1,level:d++}),o.push({type:"inline",content:"",level:d,children:a[t].tokens}),o.push({type:"paragraph_close",tight:!1,level:--d})):a[t].label&&(o=u[":"+a[t].label]),e.tokens=e.tokens.concat(o),r="paragraph_close"===e.tokens[e.tokens.length-1].type?e.tokens.pop():null,s=a[t].count>0?a[t].count:1,n=0;n<s;n++)e.tokens.push({type:"footnote_anchor",id:t,subId:n,level:d});r&&e.tokens.push(r),e.tokens.push({type:"footnote_close",level:--d})}e.tokens.push({type:"footnote_block_close",level:--d})}}},{}],38:[function(e,t){"use strict";t.exports=function(e){var t,i,n,s=e.tokens;for(i=0,n=s.length;i<n;i++)"inline"===(t=s[i]).type&&e.inline.parse(t.content,e.options,e.env,t.children)}},{}],39:[function(e,t){"use strict";function i(e){return/^<a[>\s]/i.test(e)}function n(e){return/^<\/a\s*>/i.test(e)}function s(){var e=[],t=new r({stripPrefix:!1,url:!0,email:!0,twitter:!1,replaceFn:function(t,i){switch(i.getType()){case"url":e.push({text:i.matchedText,url:i.getUrl()});break;case"email":e.push({text:i.matchedText,
url:"mailto:"+i.getEmail().replace(/^mailto:/i,"")})}return!1}});return{links:e,autolinker:t}}var r=e("autolinker"),a=/www|@|\:\/\//;t.exports=function(e){var t,r,o,l,c,d,h,u,p,f,m,g,v,y=e.tokens,b=null;if(e.options.linkify)for(r=0,o=y.length;r<o;r++)if("inline"===y[r].type)for(m=0,t=(l=y[r].children).length-1;t>=0;t--)if("link_close"!==(c=l[t]).type){if("htmltag"===c.type&&(i(c.content)&&m>0&&m--,n(c.content)&&m++),!(m>0)&&"text"===c.type&&a.test(c.content)){if(b||(g=(b=s()).links,v=b.autolinker),d=c.content,g.length=0,v.link(d),!g.length)continue;for(h=[],f=c.level,u=0;u<g.length;u++)e.inline.validateLink(g[u].url)&&((p=d.indexOf(g[u].text))&&h.push({type:"text",content:d.slice(0,p),level:f}),h.push({type:"link_open",href:g[u].url,title:"",level:f++}),h.push({type:"text",content:g[u].text,level:f}),h.push({type:"link_close",level:--f}),d=d.slice(p+g[u].text.length));d.length&&h.push({type:"text",content:d,level:f}),y[r].children=l=[].concat(l.slice(0,t),h,l.slice(t+1))}}else for(t--;l[t].level!==c.level&&"link_open"!==l[t].type;)t--}},{autolinker:60}],40:[function(e,t){"use strict";function i(e,t,i,l){var c,d,h,u,p,f,m,g,v;if(91!==e.charCodeAt(0))return-1;if(-1===e.indexOf("]:"))return-1;if(c=new n(e,t,i,l,[]),(d=s(c,0))<0||58!==e.charCodeAt(d+1))return-1;for(u=c.posMax,h=d+2;h<u&&(32===(p=c.src.charCodeAt(h))||10===p);h++);if(!r(c,h))return-1;for(m=c.linkContent,f=h=c.pos,h+=1;h<u&&(32===(p=c.src.charCodeAt(h))||10===p);h++);for(h<u&&f!==h&&a(c,h)?(g=c.linkContent,h=c.pos):(g="",h=f);h<u&&32===c.src.charCodeAt(h);)h++;return h<u&&10!==c.src.charCodeAt(h)?-1:(v=o(e.slice(1,d)),void 0===l.references[v]&&(l.references[v]={title:g,href:m}),h)}var n=e("../rules_inline/state_inline"),s=e("../helpers/parse_link_label"),r=e("../helpers/parse_link_destination"),a=e("../helpers/parse_link_title"),o=e("../helpers/normalize_reference");t.exports=function(e){var t,n,s,r,a=e.tokens;if(e.env.references=e.env.references||{},!e.inlineMode)for(t=1,n=a.length-1;t<n;t++)if("inline"===a[t].type&&"paragraph_open"===a[t-1].type&&"paragraph_close"===a[t+1].type){for(s=a[t].content;s.length&&!((r=i(s,e.inline,e.options,e.env))<0);)s=s.slice(r).trim();a[t].content=s,s.length||(a[t-1].tight=!0,a[t+1].tight=!0)}}},{"../helpers/normalize_reference":10,"../helpers/parse_link_destination":11,"../helpers/parse_link_label":12,"../helpers/parse_link_title":13,"../rules_inline/state_inline":56}],41:[function(e,t){"use strict";function i(e){return e.indexOf("(")<0?e:e.replace(s,(function(e,t){return r[t.toLowerCase()]}))}var n=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,s=/\((c|tm|r|p)\)/gi,r={c:"\xa9",r:"\xae",p:"\xa7",tm:"\u2122"};t.exports=function(e){var t,s,r,a,o;if(e.options.typographer)for(o=e.tokens.length-1;o>=0;o--)if("inline"===e.tokens[o].type)for(t=(a=e.tokens[o].children).length-1;t>=0;t--)"text"===(s=a[t]).type&&(r=i(r=s.content),n.test(r)&&(r=r.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"\u2026").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1\u2014$2").replace(/(^|\s)--(\s|$)/gm,"$1\u2013$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1\u2013$2")),s.content=r)}},{}],42:[function(e,t){"use strict";function i(e,t){return!(t<0||t>=e.length)&&!a.test(e[t])}function n(e,t,i){return e.substr(0,t)+i+e.substr(t+1)}var s=/['"]/,r=/['"]/g,a=/[-\s()\[\]]/,o="\u2019";t.exports=function(e){var t,a,l,c,d,h,u,p,f,m,g,v,y,b,_,$,k;if(e.options.typographer)for(k=[],_=e.tokens.length-1;_>=0;_--)if("inline"===e.tokens[_].type)for($=e.tokens[_].children,k.length=0,t=0;t<$.length;t++)if("text"===(a=$[t]).type&&!s.test(a.text)){for(u=$[t].level,y=k.length-1;y>=0&&!(k[y].level<=u);y--);k.length=y+1,d=0,h=(l=a.content).length;e:for(;d<h&&(r.lastIndex=d,c=r.exec(l));)if(p=!i(l,c.index-1),d=c.index+1,b="'"===c[0],(f=!i(l,d))||p){if(g=!f,v=!p)for(y=k.length-1;y>=0&&(m=k[y],!(k[y].level<u));y--)if(m.single===b&&k[y].level===u){m=k[y],b?($[m.token].content=n($[m.token].content,m.pos,e.options.quotes[2]),a.content=n(a.content,c.index,e.options.quotes[3])):($[m.token].content=n($[m.token].content,m.pos,e.options.quotes[0]),a.content=n(a.content,c.index,e.options.quotes[1])),k.length=y;continue e}g?k.push({token:t,pos:c.index,single:b,level:u}):v&&b&&(a.content=n(a.content,c.index,o))}else b&&(a.content=n(a.content,c.index,o))}}},{}],43:[function(e,t){"use strict";var i=e("../common/url_schemas"),n=e("../helpers/normalize_link"),s=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,r=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;t.exports=function(e,t){var a,o,l,c,d,h=e.pos;return 60===e.src.charCodeAt(h)&&(!((a=e.src.slice(h)).indexOf(">")<0)&&((o=a.match(r))?!(i.indexOf(o[1].toLowerCase())<0)&&(c=o[0].slice(1,-1),d=n(c),!!e.parser.validateLink(c)&&(t||(e.push({type:"link_open",href:d,level:e.level}),e.push({type:"text",content:c,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=o[0].length,!0)):!!(l=a.match(s))&&(c=l[0].slice(1,-1),d=n("mailto:"+c),!!e.parser.validateLink(d)&&(t||(e.push({type:"link_open",href:d,level:e.level}),e.push({type:"text",content:c,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=l[0].length,!0))))}},{"../common/url_schemas":4,"../helpers/normalize_link":9}],44:[function(e,t){"use strict";t.exports=function(e,t){var i,n,s,r,a,o=e.pos;if(96!==e.src.charCodeAt(o))return!1;for(i=o,o++,n=e.posMax;o<n&&96===e.src.charCodeAt(o);)o++;for(s=e.src.slice(i,o),r=a=o;-1!==(r=e.src.indexOf("`",a));){for(a=r+1;a<n&&96===e.src.charCodeAt(a);)a++;if(a-r===s.length)return t||e.push({type:"code",content:e.src.slice(o,r).replace(/[ \n]+/g," ").trim(),block:!1,level:e.level}),e.pos=a,!0}return t||(e.pending+=s),e.pos+=s.length,!0}},{}],45:[function(e,t){"use strict";t.exports=function(e,t){var i,n,s,r,a,o=e.posMax,l=e.pos;if(126!==e.src.charCodeAt(l))return!1;if(t)return!1;if(l+4>=o)return!1;if(126!==e.src.charCodeAt(l+1))return!1;if(e.level>=e.options.maxNesting)return!1;if(r=l>0?e.src.charCodeAt(l-1):-1,a=e.src.charCodeAt(l+2),126===r)return!1;if(126===a)return!1;if(32===a||10===a)return!1;for(n=l+2;n<o&&126===e.src.charCodeAt(n);)n++;if(n>l+3)return e.pos+=n-l,t||(e.pending+=e.src.slice(l,n)),!0;for(e.pos=l+2,s=1;e.pos+1<o;){if(126===e.src.charCodeAt(e.pos)&&126===e.src.charCodeAt(e.pos+1)&&(r=e.src.charCodeAt(e.pos-1),126!==(a=e.pos+2<o?e.src.charCodeAt(e.pos+2):-1)&&126!==r&&(32!==r&&10!==r?s--:32!==a&&10!==a&&s++,s<=0))){i=!0;break}e.parser.skipToken(e)}return i?(e.posMax=e.pos,e.pos=l+2,t||(e.push({type:"del_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"del_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=o,!0):(e.pos=l,!1)}},{}],46:[function(e,t){"use strict";function i(e){return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122}function n(e,t){var n,s,r,a=t,o=!0,l=!0,c=e.posMax,d=e.src.charCodeAt(t);for(n=t>0?e.src.charCodeAt(t-1):-1;a<c&&e.src.charCodeAt(a)===d;)a++;return a>=c&&(o=!1),(r=a-t)>=4?o=l=!1:(32!==(s=a<c?e.src.charCodeAt(a):-1)&&10!==s||(o=!1),32!==n&&10!==n||(l=!1),95===d&&(i(n)&&(o=!1),i(s)&&(l=!1))),{can_open:o,can_close:l,delims:r}}t.exports=function(e,t){var i,s,r,a,o,l,c,d=e.posMax,h=e.pos,u=e.src.charCodeAt(h);if(95!==u&&42!==u)return!1;if(t)return!1;if(i=(c=n(e,h)).delims,!c.can_open)return e.pos+=i,t||(e.pending+=e.src.slice(h,e.pos)),!0;if(e.level>=e.options.maxNesting)return!1;for(e.pos=h+i,l=[i];e.pos<d;)if(e.src.charCodeAt(e.pos)!==u)e.parser.skipToken(e);else{if(s=(c=n(e,e.pos)).delims,c.can_close){for(a=l.pop(),o=s;a!==o;){if(o<a){l.push(a-o);break}if(o-=a,0===l.length)break;e.pos+=a,a=l.pop()}if(0===l.length){i=a,r=!0;break}e.pos+=s;continue}c.can_open&&l.push(s),e.pos+=s}return r?(e.posMax=e.pos,e.pos=h+i,t||(2!==i&&3!==i||e.push({type:"strong_open",level:e.level++}),1!==i&&3!==i||e.push({type:"em_open",level:e.level++}),e.parser.tokenize(e),1!==i&&3!==i||e.push({type:"em_close",level:--e.level}),2!==i&&3!==i||e.push({type:"strong_close",level:--e.level})),e.pos=e.posMax+i,e.posMax=d,!0):(e.pos=h,!1)}},{}],47:[function(e,t){"use strict";var i=e("../common/entities"),n=e("../common/utils").has,s=e("../common/utils").isValidEntityCode,r=e("../common/utils").fromCodePoint,a=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,o=/^&([a-z][a-z0-9]{1,31});/i;t.exports=function(e,t){var l,c,d=e.pos,h=e.posMax;if(38!==e.src.charCodeAt(d))return!1;if(d+1<h)if(35===e.src.charCodeAt(d+1)){if(c=e.src.slice(d).match(a))return t||(l="x"===c[1][0].toLowerCase()?parseInt(c[1].slice(1),16):parseInt(c[1],10),e.pending+=s(l)?r(l):r(65533)),e.pos+=c[0].length,!0}else if((c=e.src.slice(d).match(o))&&n(i,c[1]))return t||(e.pending+=i[c[1]]),e.pos+=c[0].length,!0;return t||(e.pending+="&"),e.pos++,!0}},{"../common/entities":1,"../common/utils":5}],48:[function(e,t){"use strict";for(var i=[],n=0;n<256;n++)i.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(e){i[e.charCodeAt(0)]=1})),t.exports=function(e,t){var n,s=e.pos,r=e.posMax;if(92!==e.src.charCodeAt(s))return!1;if(++s<r){if((n=e.src.charCodeAt(s))<256&&0!==i[n])return t||(e.pending+=e.src[s]),e.pos+=2,!0;if(10===n){for(t||e.push({type:"hardbreak",level:e.level}),s++;s<r&&32===e.src.charCodeAt(s);)s++;return e.pos=s,!0}}return t||(e.pending+="\\"),e.pos++,!0}},{}],49:[function(e,t){"use strict";var i=e("../helpers/parse_link_label");t.exports=function(e,t){var n,s,r,a,o=e.posMax,l=e.pos;return!(l+2>=o)&&(94===e.src.charCodeAt(l)&&(91===e.src.charCodeAt(l+1)&&(!(e.level>=e.options.maxNesting)&&(n=l+2,!((s=i(e,l+1))<0)&&(t||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),r=e.env.footnotes.list.length,e.pos=n,e.posMax=s,e.push({type:"footnote_ref",id:r,level:e.level}),e.linkLevel++,a=e.tokens.length,e.parser.tokenize(e),e.env.footnotes.list[r]={tokens:e.tokens.splice(a)},e.linkLevel--),e.pos=s+1,e.posMax=o,!0)))))}},{"../helpers/parse_link_label":12}],50:[function(e,t){"use strict";t.exports=function(e,t){var i,n,s,r,a=e.posMax,o=e.pos;if(o+3>a)return!1;if(!e.env.footnotes||!e.env.footnotes.refs)return!1;if(91!==e.src.charCodeAt(o))return!1;if(94!==e.src.charCodeAt(o+1))return!1;if(e.level>=e.options.maxNesting)return!1;for(n=o+2;n<a;n++){if(32===e.src.charCodeAt(n))return!1;if(10===e.src.charCodeAt(n))return!1;if(93===e.src.charCodeAt(n))break}return n!==o+2&&(!(n>=a)&&(n++,i=e.src.slice(o+2,n-1),void 0!==e.env.footnotes.refs[":"+i]&&(t||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+i]<0?(s=e.env.footnotes.list.length,e.env.footnotes.list[s]={label:i,count:0},e.env.footnotes.refs[":"+i]=s):s=e.env.footnotes.refs[":"+i],r=e.env.footnotes.list[s].count,e.env.footnotes.list[s].count++,e.push({type:"footnote_ref",id:s,subId:r,level:e.level})),e.pos=n,e.posMax=a,!0)))}},{}],51:[function(e,t){"use strict";function i(e){var t=32|e;return t>=97&&t<=122}var n=e("../common/html_re").HTML_TAG_RE;t.exports=function(e,t){var s,r,a,o=e.pos;return!!e.options.html&&(a=e.posMax,!(60!==e.src.charCodeAt(o)||o+2>=a)&&(!(33!==(s=e.src.charCodeAt(o+1))&&63!==s&&47!==s&&!i(s))&&(!!(r=e.src.slice(o).match(n))&&(t||e.push({type:"htmltag",content:e.src.slice(o,o+r[0].length),level:e.level}),e.pos+=r[0].length,!0))))}},{"../common/html_re":3}],52:[function(e,t){"use strict";t.exports=function(e,t){var i,n,s,r,a,o=e.posMax,l=e.pos;if(43!==e.src.charCodeAt(l))return!1;if(t)return!1;if(l+4>=o)return!1;if(43!==e.src.charCodeAt(l+1))return!1;if(e.level>=e.options.maxNesting)return!1;if(r=l>0?e.src.charCodeAt(l-1):-1,a=e.src.charCodeAt(l+2),43===r)return!1;if(43===a)return!1;if(32===a||10===a)return!1;for(n=l+2;n<o&&43===e.src.charCodeAt(n);)n++;if(n!==l+2)return e.pos+=n-l,t||(e.pending+=e.src.slice(l,n)),!0;for(e.pos=l+2,s=1;e.pos+1<o;){if(43===e.src.charCodeAt(e.pos)&&43===e.src.charCodeAt(e.pos+1)&&(r=e.src.charCodeAt(e.pos-1),43!==(a=e.pos+2<o?e.src.charCodeAt(e.pos+2):-1)&&43!==r&&(32!==r&&10!==r?s--:32!==a&&10!==a&&s++,s<=0))){i=!0;break}e.parser.skipToken(e)}return i?(e.posMax=e.pos,e.pos=l+2,t||(e.push({type:"ins_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"ins_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=o,!0):(e.pos=l,!1)}},{}],53:[function(e,t){"use strict";var i=e("../helpers/parse_link_label"),n=e("../helpers/parse_link_destination"),s=e("../helpers/parse_link_title"),r=e("../helpers/normalize_reference");t.exports=function(e,t){var a,o,l,c,d,h,u,p,f=!1,m=e.pos,g=e.posMax,v=e.pos,y=e.src.charCodeAt(v);if(33===y&&(f=!0,y=e.src.charCodeAt(++v)),91!==y)return!1;if(e.level>=e.options.maxNesting)return!1;if(a=v+1,(o=i(e,v))<0)return!1;if((h=o+1)<g&&40===e.src.charCodeAt(h)){for(h++;h<g&&(32===(p=e.src.charCodeAt(h))||10===p);h++);if(h>=g)return!1;for(v=h,n(e,h)?(c=e.linkContent,h=e.pos):c="",v=h;h<g&&(32===(p=e.src.charCodeAt(h))||10===p);h++);if(h<g&&v!==h&&s(e,h))for(d=e.linkContent,h=e.pos;h<g&&(32===(p=e.src.charCodeAt(h))||10===p);h++);else d="";if(h>=g||41!==e.src.charCodeAt(h))return e.pos=m,!1;h++}else{if(e.linkLevel>0)return!1;for(;h<g&&(32===(p=e.src.charCodeAt(h))||10===p);h++);if(h<g&&91===e.src.charCodeAt(h)&&(v=h+1,(h=i(e,h))>=0?l=e.src.slice(v,h++):h=v-1),l||(void 0===l&&(h=o+1),l=e.src.slice(a,o)),!(u=e.env.references[r(l)]))return e.pos=m,!1;c=u.href,d=u.title}return t||(e.pos=a,e.posMax=o,f?e.push({type:"image",src:c,title:d,alt:e.src.substr(a,o-a),level:e.level}):(e.push({type:"link_open",href:c,title:d,level:e.level++}),e.linkLevel++,e.parser.tokenize(e),e.linkLevel--,e.push({type:"link_close",level:--e.level}))),e.pos=h,e.posMax=g,!0}},{"../helpers/normalize_reference":10,"../helpers/parse_link_destination":11,"../helpers/parse_link_label":12,"../helpers/parse_link_title":13}],54:[function(e,t){"use strict";t.exports=function(e,t){var i,n,s,r,a,o=e.posMax,l=e.pos;if(61!==e.src.charCodeAt(l))return!1;if(t)return!1;if(l+4>=o)return!1;if(61!==e.src.charCodeAt(l+1))return!1;if(e.level>=e.options.maxNesting)return!1;if(r=l>0?e.src.charCodeAt(l-1):-1,a=e.src.charCodeAt(l+2),61===r)return!1;if(61===a)return!1;if(32===a||10===a)return!1;for(n=l+2;n<o&&61===e.src.charCodeAt(n);)n++;if(n!==l+2)return e.pos+=n-l,t||(e.pending+=e.src.slice(l,n)),!0;for(e.pos=l+2,s=1;e.pos+1<o;){if(61===e.src.charCodeAt(e.pos)&&61===e.src.charCodeAt(e.pos+1)&&(r=e.src.charCodeAt(e.pos-1),61!==(a=e.pos+2<o?e.src.charCodeAt(e.pos+2):-1)&&61!==r&&(32!==r&&10!==r?s--:32!==a&&10!==a&&s++,s<=0))){i=!0;break}e.parser.skipToken(e)}return i?(e.posMax=e.pos,e.pos=l+2,t||(e.push({type:"mark_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"mark_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=o,!0):(e.pos=l,!1)}},{}],55:[function(e,t){"use strict";t.exports=function(e,t){var i,n,s=e.pos;if(10!==e.src.charCodeAt(s))return!1;if(i=e.pending.length-1,n=e.posMax,!t)if(i>=0&&32===e.pending.charCodeAt(i))if(i>=1&&32===e.pending.charCodeAt(i-1)){for(var r=i-2;r>=0;r--)if(32!==e.pending.charCodeAt(r)){e.pending=e.pending.substring(0,r+1);break}e.push({type:"hardbreak",level:e.level})}else e.pending=e.pending.slice(0,-1),e.push({type:"softbreak",level:e.level});else e.push({type:"softbreak",level:e.level});for(s++;s<n&&32===e.src.charCodeAt(s);)s++;return e.pos=s,!0}},{}],56:[function(e,t){"use strict";function i(e,t,i,n,s){this.src=e,this.env=n,this.options=i,this.parser=t,this.tokens=s,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}i.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""},i.prototype.push=function(e){this.pending&&this.pushPending(),this.tokens.push(e),this.pendingLevel=this.level},i.prototype.cacheSet=function(e,t){for(var i=this.cache.length;i<=e;i++)this.cache.push(0);this.cache[e]=t},i.prototype.cacheGet=function(e){return e<this.cache.length?this.cache[e]:0},t.exports=i},{}],57:[function(e,t){"use strict";var i=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;t.exports=function(e,t){var n,s,r=e.posMax,a=e.pos;if(126!==e.src.charCodeAt(a))return!1;if(t)return!1;if(a+2>=r)return!1;if(e.level>=e.options.maxNesting)return!1;for(e.pos=a+1;e.pos<r;){if(126===e.src.charCodeAt(e.pos)){n=!0;break}e.parser.skipToken(e)}return n&&a+1!==e.pos?(s=e.src.slice(a+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=a,!1):(e.posMax=e.pos,e.pos=a+1,t||e.push({type:"sub",level:e.level,content:s.replace(i,"$1")}),e.pos=e.posMax+1,e.posMax=r,!0):(e.pos=a,!1)}},{}],58:[function(e,t){"use strict";var i=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;t.exports=function(e,t){var n,s,r=e.posMax,a=e.pos;if(94!==e.src.charCodeAt(a))return!1;if(t)return!1;if(a+2>=r)return!1;if(e.level>=e.options.maxNesting)return!1;for(e.pos=a+1;e.pos<r;){if(94===e.src.charCodeAt(e.pos)){n=!0;break}e.parser.skipToken(e)}return n&&a+1!==e.pos?(s=e.src.slice(a+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=a,!1):(e.posMax=e.pos,e.pos=a+1,t||e.push({type:"sup",level:e.level,content:s.replace(i,"$1")}),e.pos=e.posMax+1,e.posMax=r,!0):(e.pos=a,!1)}},{}],59:[function(e,t){"use strict";function i(e){switch(e){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}t.exports=function(e,t){for(var n=e.pos;n<e.posMax&&!i(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}},{}],60:[function(t,i,n){var s,r;s=this,r=function(){var e,t,i,n,s,r,a,o,l,c=function(e){c.Util.assign(this,e)};return c.prototype={constructor:c,urls:!0,email:!0,twitter:!0,newWindow:!0,stripPrefix:!0,truncate:void 0,className:"",htmlParser:void 0,matchParser:void 0,tagBuilder:void 0,link:function(e){for(var t=this.getHtmlParser().parse(e),i=0,n=[],s=0,r=t.length;s<r;s++){var a=t[s],o=a.getType(),l=a.getText();if("element"===o)"a"===a.getTagName()&&(a.isClosing()?i=Math.max(i-1,0):i++),n.push(l);else if("entity"===o)n.push(l);else if(0===i){var c=this.linkifyStr(l);n.push(c)}else n.push(l)}return n.join("")},linkifyStr:function(e){return this.getMatchParser().replace(e,this.createMatchReturnVal,this)},createMatchReturnVal:function(e){var t;return this.replaceFn&&(t=this.replaceFn.call(this,this,e)),"string"==typeof t?t:!1===t?e.getMatchedText():t instanceof c.HtmlTag?t.toString():this.getTagBuilder().build(e).toString()},getHtmlParser:function(){var e=this.htmlParser;return e||(e=this.htmlParser=new c.htmlParser.HtmlParser),e},getMatchParser:function(){var e=this.matchParser;return e||(e=this.matchParser=new c.matchParser.MatchParser({urls:this.urls,email:this.email,twitter:this.twitter,stripPrefix:this.stripPrefix})),e},getTagBuilder:function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new c.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e}},c.link=function(e,t){return new c(t).link(e)},c.match={},c.htmlParser={},c.matchParser={},c.Util={abstractMethod:function(){throw"abstract"},assign:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},extend:function(e,t){var i,n=e.prototype,s=function(){};s.prototype=n,i=t.hasOwnProperty("constructor")?t.constructor:function(){n.constructor.apply(this,arguments)};var r=i.prototype=new s;return r.constructor=i,r.superclass=n,delete t.constructor,c.Util.assign(r,t),i},ellipsis:function(e,t,i){return e.length>t&&(i=null==i?"..":i,e=e.substring(0,t-i.length)+i),e},indexOf:function(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},splitAndCapture:function(e,t){if(!t.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var i,n=[],s=0;i=t.exec(e);)n.push(e.substring(s,i.index)),n.push(i[0]),s=i.index+i[0].length;return n.push(e.substring(s)),n}},c.HtmlTag=c.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(e){c.Util.assign(this,e),this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(e){return this.tagName=e,this},getTagName:function(){return this.tagName||""},setAttr:function(e,t){return this.getAttrs()[e]=t,this},getAttr:function(e){return this.getAttrs()[e]},setAttrs:function(e){var t=this.getAttrs();return c.Util.assign(t,e),this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(e){return this.setAttr("class",e)},addClass:function(e){for(var t,i=this.getClass(),n=this.whitespaceRegex,s=c.Util.indexOf,r=i?i.split(n):[],a=e.split(n);t=a.shift();)-1===s(r,t)&&r.push(t);return this.getAttrs().class=r.join(" "),this},removeClass:function(e){for(var t,i=this.getClass(),n=this.whitespaceRegex,s=c.Util.indexOf,r=i?i.split(n):[],a=e.split(n);r.length&&(t=a.shift());){var o=s(r,t);-1!==o&&r.splice(o,1)}return this.getAttrs().class=r.join(" "),this},getClass:function(){return this.getAttrs().class||""},hasClass:function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},setInnerHtml:function(e){return this.innerHtml=e,this},getInnerHtml:function(){return this.innerHtml||""},toString:function(){var e=this.getTagName(),t=this.buildAttrsStr();return["<",e,t=t?" "+t:"",">",this.getInnerHtml(),"</",e,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var e=this.getAttrs(),t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+'="'+e[i]+'"');return t.join(" ")}}),c.AnchorTagBuilder=c.Util.extend(Object,{constructor:function(e){c.Util.assign(this,e)},build:function(e){return new c.HtmlTag({tagName:"a",attrs:this.createAttrs(e.getType(),e.getAnchorHref()),innerHtml:this.processAnchorText(e.getAnchorText())})},createAttrs:function(e,t){var i={href:t},n=this.createCssClass(e);return n&&(i.class=n),this.newWindow&&(i.target="_blank"),i},createCssClass:function(e){var t=this.className;return t?t+" "+t+"-"+e:""},processAnchorText:function(e){return e=this.doTruncate(e)},doTruncate:function(e){return c.Util.ellipsis(e,this.truncate||Number.POSITIVE_INFINITY)}}),c.htmlParser.HtmlParser=c.Util.extend(Object,{htmlRegex:(e=/[0-9a-zA-Z][0-9a-zA-Z:]*/,t=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,i=/[^\s\0"'>\/=\x01-\x1F\x7F]+/.source+"(?:\\s*=\\s*"+t.source+")?",new RegExp(["(?:","<(!DOCTYPE)","(?:","\\s+","(?:",i,"|",t.source+")",")*",">",")","|","(?:","<(/)?","("+e.source+")","(?:","\\s+",i,")*","\\s*/?",">",")"].join(""),"gi")),htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,parse:function(e){for(var t,i,n=this.htmlRegex,s=0,r=[];null!==(t=n.exec(e));){var a=t[0],o=t[1]||t[3],l=!!t[2],c=e.substring(s,t.index);c&&(i=this.parseTextAndEntityNodes(c),r.push.apply(r,i)),r.push(this.createElementNode(a,o,l)),s=t.index+a.length}if(s<e.length){var d=e.substring(s);d&&(i=this.parseTextAndEntityNodes(d),r.push.apply(r,i))}return r},parseTextAndEntityNodes:function(e){for(var t=[],i=c.Util.splitAndCapture(e,this.htmlCharacterEntitiesRegex),n=0,s=i.length;n<s;n+=2){var r=i[n],a=i[n+1];r&&t.push(this.createTextNode(r)),a&&t.push(this.createEntityNode(a))}return t},createElementNode:function(e,t,i){return new c.htmlParser.ElementNode({text:e,tagName:t.toLowerCase(),closing:i})},createEntityNode:function(e){return new c.htmlParser.EntityNode({text:e})},createTextNode:function(e){return new c.htmlParser.TextNode({text:e})}}),c.htmlParser.HtmlNode=c.Util.extend(Object,{text:"",constructor:function(e){c.Util.assign(this,e)},getType:c.Util.abstractMethod,getText:function(){return this.text}}),c.htmlParser.ElementNode=c.Util.extend(c.htmlParser.HtmlNode,{tagName:"",closing:!1,getType:function(){return"element"},getTagName:function(){return this.tagName},isClosing:function(){return this.closing}}),c.htmlParser.EntityNode=c.Util.extend(c.htmlParser.HtmlNode,{getType:function(){return"entity"}}),c.htmlParser.TextNode=c.Util.extend(c.htmlParser.HtmlNode,{getType:function(){return"text"}}),c.matchParser.MatchParser=c.Util.extend(Object,{urls:!0,email:!0,twitter:!0,stripPrefix:!0,matcherRegex:(n=/(?:[\-;:&=\+\$,\w\.]+@)/,s=/(?:[A-Za-z][-.+A-Za-z0-9]+:(?![A-Za-z][-.+A-Za-z0-9]+:\/\/)(?!\d+\/?)(?:\/\/)?)/,r=/(?:www\.)/,a=/[A-Za-z0-9\.\-]*[A-Za-z0-9\-]/,o=/\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b/,l=/[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]?!:,.;]*[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]]/,new RegExp(["(",/(^|[^\w])@(\w{1,15})/.source,")","|","(",n.source,a.source,o.source,")","|","(","(?:","(",s.source,a.source,")","|","(?:","(.?//)?",r.source,a.source,")","|","(?:","(.?//)?",a.source,o.source,")",")","(?:"+l.source+")?",")"].join(""),"gi")),charBeforeProtocolRelMatchRegex:/^(.)?\/\//,constructor:function(e){c.Util.assign(this,e),this.matchValidator=new c.MatchValidator},replace:function(e,t,i){var n=this;return e.replace(this.matcherRegex,(function(e,s,r,a,o,l,c,d,h){var u=n.processCandidateMatch(e,s,r,a,o,l,c,d,h);if(u){var p=t.call(i,u.match);return u.prefixStr+p+u.suffixStr}return e}))},processCandidateMatch:function(e,t,i,n,s,r,a,o,l){var d,h=o||l,u="",p="";if(t&&!this.twitter||s&&!this.email||r&&!this.urls||!this.matchValidator.isValidMatch(r,a,h))return null;if(this.matchHasUnbalancedClosingParen(e)&&(e=e.substr(0,e.length-1),p=")"),s)d=new c.match.Email({matchedText:e,email:s});else if(t)i&&(u=i,e=e.slice(1)),d=new c.match.Twitter({matchedText:e,twitterHandle:n});else{if(h){var f=h.match(this.charBeforeProtocolRelMatchRegex)[1]||"";f&&(u=f,e=e.slice(1))}d=new c.match.Url({matchedText:e,url:e,protocolUrlMatch:!!a,protocolRelativeMatch:!!h,stripPrefix:this.stripPrefix})}return{prefixStr:u,suffixStr:p,match:d}},matchHasUnbalancedClosingParen:function(e){if(")"===e.charAt(e.length-1)){var t=e.match(/\(/g),i=e.match(/\)/g);if((t&&t.length||0)<(i&&i.length||0))return!0}return!1}}),c.MatchValidator=c.Util.extend(Object,{invalidProtocolRelMatchRegex:/^[\w]\/\//,hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]+:\/\//,uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]+:/,hasWordCharAfterProtocolRegex:/:[^\s]*?[A-Za-z]/,isValidMatch:function(e,t,i){return!(t&&!this.isValidUriScheme(t)||this.urlMatchDoesNotHaveProtocolOrDot(e,t)||this.urlMatchDoesNotHaveAtLeastOneWordChar(e,t)||this.isInvalidProtocolRelativeMatch(i))},isValidUriScheme:function(e){var t=e.match(this.uriSchemeRegex)[0].toLowerCase();return"javascript:"!==t&&"vbscript:"!==t},urlMatchDoesNotHaveProtocolOrDot:function(e,t){return!(!e||t&&this.hasFullProtocolRegex.test(t)||-1!==e.indexOf("."))},urlMatchDoesNotHaveAtLeastOneWordChar:function(e,t){return!(!e||!t||this.hasWordCharAfterProtocolRegex.test(e))},isInvalidProtocolRelativeMatch:function(e){return!!e&&this.invalidProtocolRelMatchRegex.test(e)}}),c.match.Match=c.Util.extend(Object,{constructor:function(e){c.Util.assign(this,e)},getType:c.Util.abstractMethod,getMatchedText:function(){return this.matchedText},getAnchorHref:c.Util.abstractMethod,getAnchorText:c.Util.abstractMethod}),c.match.Email=c.Util.extend(c.match.Match,{getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+this.email},getAnchorText:function(){return this.email}}),c.match.Twitter=c.Util.extend(c.match.Match,{getType:function(){return"twitter"},getTwitterHandle:function(){return this.twitterHandle},getAnchorHref:function(){return"https://twitter.com/"+this.twitterHandle},getAnchorText:function(){return"@"+this.twitterHandle}}),c.match.Url=c.Util.extend(c.match.Match,{urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrl:function(){var e=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},getAnchorHref:function(){return this.getUrl().replace(/&amp;/g,"&")},getAnchorText:function(){var e=this.getUrl();return this.protocolRelativeMatch&&(e=this.stripProtocolRelativePrefix(e)),this.stripPrefix&&(e=this.stripUrlPrefix(e)),e=this.removeTrailingSlash(e)},stripUrlPrefix:function(e){return e.replace(this.urlPrefixRegex,"")},stripProtocolRelativePrefix:function(e){return e.replace(this.protocolRelativeRegex,"")},removeTrailingSlash:function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e}}),c},"function"==typeof e&&e.amd?e([],(function(){return s.Autolinker=r()})):"object"==typeof n?i.exports=r():s.Autolinker=r()},{}],"/":[function(e,t){"use strict";t.exports=e("./lib/")},{"./lib/":14}]},{},[])("/")})),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.MarkdownPreview=function(){function t(t){this.handleControlsChange=e(this.handleControlsChange,this),this._updateOutput=e(this._updateOutput,this),this.handleInputChange=e(this.handleInputChange,this),this.$input=t.find("."+t.data("input")),this.$output=t.find("."+t.data("output")),this.$radioControls=t.find("input[type=radio][name="+t.data("radio-controls")+"]"),this.remarkableParser=this._setupRemarkable(),this.$input.on("change",this.handleInputChange),this.$radioControls.on("change",this.handleControlsChange)}return t.prototype._setupRemarkable=function(){var e;return(e=new Remarkable({html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!0,quotes:"\u201c\u201d\u2018\u2019"})).block.ruler.disable(["code","fences","blockquote","hr","list","footnote","heading","lheading","htmlblock","table","deflist","paragraph"]),e.inline.ruler.disable(["text","newline","escape","backticks","del","ins","mark","emphasis","sub","sup","links","footnote_inline","footnote_ref","autolink","htmltag","entity"]),e.block.ruler.enable(["list","paragraph"]),e.inline.ruler.enable(["text","newline","escape","emphasis"]),e},t.prototype.handleInputChange=function(e){return this._updateOutput(e.target.value)},t.prototype._updateOutput=function(e){var t;return t=this.remarkableParser.render(e),this.$output.html(t)},t.prototype.handleControlsChange=function(e){var t;return t="is-visually-hidden","Preview"===e.target.value?(this.$input.addClass(t),this.$output.removeClass(t)):(this.$input.removeClass(t),this.$output.addClass(t))},t}()}.call(this),function(){Views.NewMailout=function(){function e(){var e,t;t=this,$(".js-mailout-toggle").click((function(){return $(".js-list-modal").hide(),t.toggleMailoutType($(this).data().builder_key)})),$(".js-upload-csv-button").click((function(e){return e.preventDefault(),$(".js-list-modal").hide(),$(".js-mailout-builder-key").val("csv"),t.toggleMailoutType("csv")})),$(".js-generate-list-button").click((function(e){return e.preventDefault(),$(".js-mailout").hide(),$(".js-list-modal").show()})),(e=$(".js-mailout-builder-key").val())&&this.toggleMailoutType(e)}return e.prototype.toggleMailoutType=function(e){return $(".js-mailout-review-button").show(),$(".js-mailout").hide(),$(".js-mailout-"+e).show(),$(".js-mailout-builder-key").val(e)},e}()}.call(this),function(){Market.Validations.payoutAccount=function(){var e,t,i,n;return e=function(e){return $(e).is(":visible")},t=function(){return $("#intermediary_bank_details input").filter((function(){return $(this).val()})).length>0},n=function(e,t,i){
return{url:"/accounts/payout/validate_swift",type:"post",data:{"payout_account[service]":function(){return $('input[name="payout_account[service]"]:checked').val()},"payout_account[swift_detail][existing_swift_detail]":function(){return $('input[name="payout_account[swift_detail][existing_swift_detail]"]:checked').val()},attribute:i||e,value:function(){return t.val()}},beforeSend:function(){return t.addClass("validating")},complete:function(){return t.removeClass("validating")}}},(i=function(){return $("#intermediary_bank_details input, #intermediary_bank_details select")})().blur((function(){return i().valid()})),$("#payment_form").validate({errorElement:"span",errorClass:"form__error",validClass:"valid",errorPlacement:function(e,t){return"payout_account[service]"===$(t).attr("name")?$(e).appendTo($(".js-withdrawal-service")):"payout_account[swift_detail][swift_detail_id]"===$(t).attr("name")?$(e).appendTo($("#existing-swift .payout-account__step-heading")):$(t).after(e)},highlight:function(e){return $(e).addClass("is-invalid")},unhighlight:function(e){return $(e).removeClass("is-invalid")},rules:{"payout_account[service]":{required:!0},"payout_account[paypal_email_address]":{required:e,email:!0},"payout_account[paypal_email_address_confirmation]":{required:e,email:!0,equalTo:"#payout_account_paypal_email_address"},"payout_account[skrill_email_address]":{required:e,email:!0},"payout_account[swift_detail][swift_detail_id]":{required:function(){return $("#payout_account_swift_detail_existing_swift_detail_true").is(":checked")}},"payout_account[skrill_email_address_confirmation]":{required:e,email:!0,equalTo:"#payout_account_skrill_email_address"},"payout_account[swift_detail][full_address]":{required:e,remote:{depends:e,param:n("full_address",$("#payout_account_swift_detail_full_address"))}},"payout_account[swift_detail][full_address_line2]":{remote:{depends:e,param:n("full_address_line2",$("#payout_account_swift_detail_full_address_line2"))}},"payout_account[swift_detail][full_address_line3]":{remote:{depends:e,param:n("full_address_line3",$("#payout_account_swift_detail_full_address_line3"))}},"payout_account[swift_detail][address_state]":{remote:{depends:e,param:n("address_state",$("#payout_account_swift_detail_address_state"))}},"payout_account[swift_detail][address_city]":{required:e,remote:{depends:e,param:n("address_city",$("#payout_account_swift_detail_address_city"))}},"payout_account[swift_detail][address_postcode]":{required:e,remote:{depends:e,param:n("address_postcode",$("#payout_account_swift_detail_address_postcode"))}},"payout_account[swift_detail][address_country_code]":{required:e},"payout_account[swift_detail][bank_account_name]":{required:e,remote:{depends:e,param:n("bank_account_name",$("#payout_account_swift_detail_bank_account_name"))}},"payout_account[swift_detail][bank_account_number]":{required:e,remote:{depends:e,param:n("bank_account_number",$("#payout_account_swift_detail_bank_account_number"))}},"payout_account[swift_detail][swift_code]":{required:e,remote:{depends:e,param:n("swift_code",$("#payout_account_swift_detail_swift_code"))}},"payout_account[swift_detail][bank_name]":{required:e,remote:{depends:e,param:n("bank_name",$("#payout_account_swift_detail_bank_name"))}},"payout_account[swift_detail][bank_branch_country_code]":{required:e},"payout_account[swift_detail][bank_branch_city]":{required:e,remote:{depends:e,param:n("bank_branch_city",$("#payout_account_swift_detail_bank_branch_city"))}},"payout_account[swift_detail][intermediary_bank_code]":{required:t,remote:{depends:e,param:n("intermediary_bank_code",$("#payout_account_swift_detail_intermediary_bank_code"))}},"payout_account[swift_detail][intermediary_bank_name]":{required:t,remote:{depends:e,param:n("intermediary_bank_name",$("#payout_account_swift_detail_intermediary_bank_name"))}},"payout_account[swift_detail][intermediary_bank_city]":{required:t,remote:{depends:e,param:n("intermediary_bank_city",$("#payout_account_swift_detail_intermediary_bank_city"))}},"payout_account[swift_detail][intermediary_bank_country_code]":{required:t,remote:{depends:e,param:n("intermediary_bank_country_code",$("#payout_account_swift_detail_intermediary_bank_country_code"))}},"payout_account[swift_detail][instructions_from_author]":{remote:{depends:e,param:n("instructions_from_author",$("#payout_account_swift_detail_instructions_from_author"),"additional_instructions")}}},messages:{"payout_account[swift_detail][swift_detail_id]":{required:"Please select a SWIFT account"}}})}}.call(this),Views.PayoutAccount=class{constructor(e){this.$el=e,this.dom={$dependentFields:$(".js-dependent-fields"),$paymentMethodForm:$(".js-payout-method__form"),$differentAccountLink:$(".js-payout-method__different-account-link"),$currentDefaultAccount:$(".js-payout-method__current-default-account")};const t=$(".payout-account").data("validator");Market.Validations[null!=t?t:"payoutAccount"](),Market.DOMUtils.DependentFields.bind(),this.bindEvents(),this.$el.addClass("is-initialized")}bindEvents(){this.dom.$differentAccountLink.on("click",this.showPaymentMethodForm.bind(this))}showPaymentMethodForm(e){e.preventDefault(),this.dom.$currentDefaultAccount.remove(),this.dom.$paymentMethodForm.find("input:text:first").focus()}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.PerformingRightsOrganization=function(){function t(t){var i;this.isProSelected=e(this.isProSelected,this),this.hideProToggleContent=e(this.hideProToggleContent,this),this.showProToggleContent=e(this.showProToggleContent,this),this.handleProConfirmRadioChange=e(this.handleProConfirmRadioChange,this),this.dom={$form:t.find("form"),$errorMessages:t.find(".error-messages"),$proToggleContent:t.find(".js-performing-rights-organization__select, .js-performing-rights-organization__attributes_copy"),$proConfirmRadios:t.find(".js-.performing-rights-organization__affiliation").find("input:radio")},this.dom.$form.validate({errorElement:"p",errorLabelContainer:".error-messages",rules:{"user_performing_rights_organization_form[affiliated]":{required:!0},"user_performing_rights_organization_form[affiliated_organization]":{required:(i=this,function(){return i.isProSelected()})}}}),this.dom.$proConfirmRadios.on("change",this.handleProConfirmRadioChange),this.dom.$proConfirmRadios.each(function(e){return function(t,i){if("true"===i.value&&i.checked)return e.showProToggleContent()}}(this))}return t.prototype.handleProConfirmRadioChange=function(e){return"true"===e.currentTarget.value?this.showProToggleContent():this.hideProToggleContent()},t.prototype.showProToggleContent=function(){return this.dom.$proToggleContent.removeClass("is-hidden")},t.prototype.hideProToggleContent=function(){return this.dom.$proToggleContent.addClass("is-hidden")},t.prototype.isProSelected=function(){return 0!==this.dom.$proConfirmRadios.filter('[value="true"]:checked').length},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.PersonalInformation=function(){function t(t){var i;this.$el=t,this._getCountrySubdivisionData=e(this._getCountrySubdivisionData,this),this._getCountryData=e(this._getCountryData,this),this._salesTaxNumberEnabled=e(this._salesTaxNumberEnabled,this),this._isCountryBasedSalesTaxNumber=e(this._isCountryBasedSalesTaxNumber,this),this.updateJurisdictionTaxCode=e(this.updateJurisdictionTaxCode,this),this.updateSalesTax=e(this.updateSalesTax,this),this.updateCompanyNumberLabel=e(this.updateCompanyNumberLabel,this),this.updateCountrySubdivisionField=e(this.updateCountrySubdivisionField,this),this.updateCountrySubdivisions=e(this.updateCountrySubdivisions,this),this.toggleTaxHint=e(this.toggleTaxHint,this),this.handleCountrySubdivisionChange=e(this.handleCountrySubdivisionChange,this),this.handleCountryChange=e(this.handleCountryChange,this),Market.DOMUtils.DependentFields.bind(),this.dom={$salesTaxCountryHint:this.$el.find(".js-callout-hint.sales-tax-country-callout-hint"),$salesTaxRegionHint:this.$el.find(".js-callout-hint.sales-tax-region-callout-hint"),$countryCode:this.$el.find(".js-personal-info__country-selector"),$countrySubdivision:this.$el.find(".js-personal-info__country-subdivision"),$subdivisions:this.$el.find(".js-personal-info__subdivisions"),$subdivisionField:this.$el.find(".js-personal-info__subdivision-code"),$companyNumberLabel:this.$el.find(".js-personal-info__company_number_label"),$companyNumberField:this.$el.find(".js-personal-info__company_number"),$salesTaxGroup:this.$el.find(".js-personal-info__sales_tax_number-input-group"),$salesTaxInput:this.$el.find(".js-personal-info__sales_tax_number-input"),$jurisdictionTaxCode:this.$el.find(".js-personal-info__jurisdiction_tax_code"),$salesTaxExample:this.$el.find(".js-personal-info__sales_tax_number-example"),$salesTaxLabel:this.$el.find(".js-personal-info__sales_tax_number-local-lang")},this.dom.$countryCode.on("change.handleCountryChange",(i=this,function(){return i.handleCountryChange()})),this.dom.$countrySubdivision.on("change",function(e){return function(){return e.handleCountrySubdivisionChange(),e.updateCountrySubdivisionField()}}(this)),this.dom.$salesTaxInput.on("change",function(e){return function(){return e.updateJurisdictionTaxCode()}}(this)),this.dom.$subdivisions.removeClass("is-hidden--js"),this.updateCountrySubdivisions(),this.updateSalesTax(),this.updateCompanyNumberLabel()}return t.prototype.handleCountryChange=function(){var e;if(this.updateCountrySubdivisions(),this.handleCountrySubdivisionChange(),this.updateCountrySubdivisionField(),this.updateSalesTax(),e=this.dom.$companyNumberLabel.text(),this.updateCompanyNumberLabel(),this.dom.$companyNumberLabel.text()!==e)return this.dom.$companyNumberField.val("")},t.prototype.handleCountrySubdivisionChange=function(){return this.updateSalesTax()},t.prototype.toggleTaxHint=function(){var e,t,i;return i=this._salesTaxNumberEnabled(),e=this._isCountryBasedSalesTaxNumber(),t=i&&!e,this.dom.$salesTaxCountryHint.toggleClass("is-visible",e),this.dom.$salesTaxRegionHint.toggleClass("is-visible",t)},t.prototype.updateCountrySubdivisions=function(){var e,t;return t=this.dom.$countryCode.val(),e=this.dom.$countrySubdivision.filter("[data-show-for='"+t+"']"),this.dom.$countrySubdivision.hide(),this.dom.$subdivisionField.hide(),0===e.length?this.dom.$subdivisionField.show():e.show()},t.prototype.updateCountrySubdivisionField=function(){var e,t;return t=this.dom.$countryCode.val(),e=this.dom.$countrySubdivision.filter("[data-show-for='"+t+"']").find(":selected"),this.dom.$subdivisionField.val(e.val())},t.prototype.updateCompanyNumberLabel=function(){var e;return e="Company No.","AU"===this.dom.$countryCode.val()&&(e="ABN"),this.dom.$companyNumberLabel.html(e)},t.prototype.updateSalesTax=function(){var e;return this._getCountrySubdivisionData(),e=this._salesTaxNumberEnabled(),this.dom.$salesTaxGroup.toggleClass("is-hidden--js",!e),e?(this.dom.$jurisdictionTaxCode.val(this.countrySubdivisionData.jurisdictionTaxCode),this.dom.$salesTaxExample.text(this.countrySubdivisionData.salesTaxNumberExample),this.dom.$salesTaxLabel.text(this.countrySubdivisionData.salesTaxNumberLabel)):this.dom.$salesTaxInput.val(""),this.updateJurisdictionTaxCode(),this.toggleTaxHint()},t.prototype.updateJurisdictionTaxCode=function(){var e,t;return this._getCountrySubdivisionData(),e=this._salesTaxNumberEnabled(),t=!!this.dom.$salesTaxInput.val(),e&&t?this.dom.$jurisdictionTaxCode.val(this.countrySubdivisionData.jurisdictionTaxCode):this.dom.$jurisdictionTaxCode.val("")},t.prototype._isCountryBasedSalesTaxNumber=function(){return this._getCountryData(),null!=this.countryData&&!0===this.countryData.enableSalesTaxNumber},t.prototype._salesTaxNumberEnabled=function(){return null!=this.countrySubdivisionData&&!0===this.countrySubdivisionData.enableSalesTaxNumber},t.prototype._getCountryData=function(){return this.countryData=$("option:selected",this.dom.$countryCode).data()},t.prototype._getCountrySubdivisionData=function(){var e,t;return this._getCountryData(),e=this.dom.$countryCode.val(),t=this.dom.$countrySubdivision.filter("[data-show-for='"+e+"']"),this.countrySubdivisionData=$.extend({},this.countryData,t.find("option:selected").data())},t}()}.call(this),Views.RadioCombo=class{constructor(e){this.$el=e,this.$radios=this.$el.find(":radio"),this.$radioWithText=this.$radios.filter(".js-radio-with-text"),this.$text=this.$el.find(":input.js-text-with-radio").not(this.$radioWithText),this.$radios.on("change.radioCombo",(()=>this.changed())),this.changed()}changed(){this.$radioWithText.prop("checked")?this.$text.prop("disabled",!1).removeClass("disabled"):(this.$text.prop("disabled",!0).addClass("disabled"),this.$text.parent().find("label.invalid").remove())}},function(){Views.RatingBasic=function(){function e(e){this.starOnUrl=e.data("imagePaths").on,this.starOffUrl=e.data("imagePaths").off,this.initEvents(e),e.find("a").data("viewInstance",this)}return e.prototype.initEvents=function(e){return e.on("mouseleave",(t=this,function(e){var i;return i=$(e.currentTarget),t.reset_stars(i.attr("data-star-set-id"),i.attr("data-rating"))})).on("ajax:success",(function(e,t){return $("#js-rating").html(t),viewloader.execute(Views,this.$el)})).find("a").on("click",(function(){var e;return(e=$(this)).parent().attr("data-rating",e.index()+1)}));var t},e.prototype.toggle_stars=function(e,t){var i,n,s,r;for(s=[],r=i=1;i<=5;r=++i)n=e+"_"+r,r>t?s.push(this.turn_off_star(n)):s.push(this.turn_on_star(n));return s},e.prototype.turn_on_star=function(e){return $("#"+e).attr("src",this.starOnUrl)},e.prototype.turn_off_star=function(e){return $("#"+e).attr("src",this.starOffUrl)},e.prototype.reset_stars=function(e,t){return this.toggle_stars(e,t)},e}()}.call(this),Views.RatingBreakdown=class{constructor(){this.$toggle=$(".js-rating-exposer"),this.$breakdown=$(".js-rating-breakdown"),this.$toggle.on("click",this.toggleBreakdown.bind(this)),this.$showLabel=this.$breakdown.data("show-label"),this.$hideLabel=this.$breakdown.data("hide-label")}toggleBreakdown(e){e.preventDefault(),this.$breakdown.toggleClass("hidden"),this.$breakdown.hasClass("hidden")?e.target.innerHTML=this.$showLabel:e.target.innerHTML=this.$hideLabel}},Views.RecommendedItems=class{constructor(e){$.get(e.data("url"),(function(t){e.html(t),viewloader.execute(Views,e)}))}},Views.RefundDispatcher=class{constructor(e){this.$el=e,this.dom={$actionButtons:this.$el.find(".js-refund-dispatcher__action-button")},this.dom.$actionButtons.on("click",this.handleAction.bind(this)),this.dom.$actionButtons.attr("data-ready","true")}handleAction(e){e.preventDefault();const t=$(e.currentTarget).data("action");this.$el.attr("data-refund-dispatcher-status",t)}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.UserRefundRequest=function(){function t(t){this.toggleRecipientText=e(this.toggleRecipientText,this),this.handleItemOrReasonChange=e(this.handleItemOrReasonChange,this),this.togglePurchaseCodeInput=e(this.togglePurchaseCodeInput,this),this.initialize=e(this.initialize,this),this.PAYMENT_REASON="I have a problem with my payment",this.dom={$purchaseCodeSelectContainer:t.find(".js-refund__purchase-code-select-container"),$purchaseCodeInput:t.find(".js-refund__purchase-code-field"),$togglePurchaseCodeSelect:t.find(".js-refund__toggle-purchase-code-select"),$togglePurchaseCodeField:t.find(".js-refund__toggle-purchase-code-field"),$itemSelect:t.find(".js-refund__purchase-code-select"),$reasonDropdown:t.find(".js-refund__reason-select"),$refundRecipient:t.find("[class*=js-refund__recipient-copy]"),$refundRecipientAuthor:t.find(".js-refund__recipient-copy-author"),$refundRecipientEnvato:t.find(".js-refund__recipient-copy-envato")},this.initialize()}return t.prototype.initialize=function(){return this.dom.$togglePurchaseCodeSelect.on("click",this.togglePurchaseCodeInput),this.dom.$togglePurchaseCodeField.on("click",this.togglePurchaseCodeInput),this.dom.$itemSelect.on("change",this.handleItemOrReasonChange),this.dom.$reasonDropdown.on("change",this.handleItemOrReasonChange),this.dom.$refundRecipient.hide()},t.prototype.togglePurchaseCodeInput=function(e){return e.preventDefault(),this.dom.$purchaseCodeInput.toggleClass("is-hidden"),this.dom.$purchaseCodeSelectContainer.toggleClass("is-hidden")},t.prototype.handleItemOrReasonChange=function(){if(this.dom.$itemSelect.find("option:selected").data("creativeStock"))return this.toggleRecipientText("envato");switch(this.dom.$reasonDropdown.find("option:selected").val()){case"":return this.dom.$refundRecipient.hide();case this.PAYMENT_REASON:return this.toggleRecipientText("envato");default:return this.toggleRecipientText("author")}},t.prototype.toggleRecipientText=function(e){switch(this.dom.$refundRecipient.hide(),e){case"envato":return this.dom.$refundRecipientEnvato.show();case"author":return this.dom.$refundRecipientAuthor.show()}},t}()}.call(this),Views.RefundRequestsLists=class{constructor(e){this.dom={$selectToggle:e.find(".js-refund-requests__toggle")},this.dom.$selectToggle.on("change",this.toggleRefundURL.bind(this))}toggleRefundURL(e){const t=this.dom.$selectToggle.find("option:selected").data("url");window.location.pathname=t}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Market.DOMUtils.Revealer=function(){function t(t){var i;null==t&&(t={}),this.toggle=e(this.toggle,this),i={defaultText:"Show more",toggledText:"Show less",state:"closed"},this.options=$.extend(i,t),this.$el=this.options.$el,this.dom={$revealerContent:this.$el.find(".js-revealer__content"),$revealerInner:this.$el.find(".js-revealer__inner"),$revealerButton:this.$el.find(".js-revealer__button"),$revealerButtonText:this.$el.find(".js-revealer__text")},this.innerHeight=this.dom.$revealerInner.height(),this.dom.$revealerButton.on("click.revealer",this.toggle),"opened"===this.options.state&&this.toggle()}return t.prototype.toggle=function(e){var t,i,n;return e&&e.preventDefault(),this.$el.hasClass("is-open")?(n=0,t=this.options.defaultText,i="closed"):(n="none",t=this.options.toggledText,i="opened",Market.Helpers.GoogleAnalytics.sendEvent("event","Content","click",{label:"Show more: "+window.location.pathname})),this.$el.toggleClass("is-open"),this.dom.$revealerContent.css({maxHeight:n}),this.dom.$revealerButtonText.text(t),this.$el.trigger("revealer:"+i)},t}()}.call(this),Views.Revealer=class{constructor(e){new Market.DOMUtils.Revealer({$el:e})}},function(){var e;e={humanFormat:"MMMM DD, YYYY",serverFormat:"YYYY-MM-DD"},Views.RomeDateRange=function(){function t(t){var i;this.settings=$.extend({},e,t.data("props")),this.dom={humanFrom:t.find(".js-human-from")[0],humanTo:t.find(".js-human-to")[0],serverFrom:t.find(".js-server-from")[0],serverTo:t.find(".js-server-to")[0]},Market.Helpers.loadOnce([this.settings.jsPath,this.settings.cssPath]).done((i=this,function(){return i.setupFields()}))}return t.prototype.setupFields=function(){var e,t,i,n;return this.dom.humanFrom.disabled=!1,this.dom.humanTo.disabled=!1,t={dayFormat:"D",time:!1,inputFormat:this.settings.humanFormat},e=$.extend({},t),this.settings.min&&(e.min=moment(this.settings.min)),this.settings.max&&(e.max=moment(this.settings.max)),this.from=rome(this.dom.humanFrom,e),i=$.extend({},t,{dateValidator:rome.val.afterEq(this.dom.humanFrom)}),this.settings.max&&(i.max=moment(this.settings.max)),this.to=rome(this.dom.humanTo,i),this.from.on("ready",(n=this,function(){return n.oldFromMoment=n.from.getMoment()})),this.from.on("data",function(e){return function(){var t;if(!e.settings.doNotAutoUpdateTo)return t=e.from.getMoment(),e.oldFromMoment.isSame(t)?void 0:(e.updateToFieldWhenFromChanged(e.oldFromMoment,t),e.oldFromMoment=t)}}(this)),this.from.on("data",function(e){return function(t){return e.updateServerField(t,"From")}}(this)),this.to.on("data",function(e){return function(t){return e.updateServerField(t,"To")}}(this))},t.prototype.updateToFieldWhenFromChanged=function(e,t){var i,n;return i=t.diff(e),n=this.to.getMoment().add(i),this.to.setValue(n),this.to.emitValues()},t.prototype.updateServerField=function(e,t){var i;return i=moment(e).format(this.settings.serverFormat),this.dom["server"+t].value=i},t}()}.call(this),Views.SendMessageForm=class{constructor(e){this.$form=e,this.$form.on("submit",(()=>{const e=this.$form.find("#message");Market.Helpers.FormEscaping.escapeInHiddenCopyAndDisable(this.$form,e,"message_base64")}))}},Views.ShowMailout=class{constructor(e){$(".js-toggle-template-preview").click((function(e){e.preventDefault(),$(".js-toggle-template-preview").toggleClass("-color-light"),$(".js-toggle-recipients").addClass("-color-light"),$(".js-template-preview").toggleClass("is-hidden--js"),$(".js-recipients-list").addClass("is-hidden--js")})),$(".js-toggle-recipients").click((function(e){e.preventDefault(),$(".js-toggle-recipients").toggleClass("-color-light"),$(".js-toggle-template-preview").addClass("-color-light"),$(".js-recipients-list").toggleClass("is-hidden--js"),$(".js-template-preview").addClass("is-hidden--js")}))}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.StarRating=function(){function t(t){this.$ratingWidget=t,this.triggerChangeRating=e(this.triggerChangeRating,this),this.handleClick=e(this.handleClick,this),this.saveRating=e(this.saveRating,this),this.updateStars=e(this.updateStars,this),this.resetStars=e(this.resetStars,this),this.$stars=this.$ratingWidget.find("a"),this.item_id=this.$ratingWidget.data("item-id"),this.$ratingWidget.on({"starRating:change":this.updateStars,"starRating:reset":this.resetStars,"starRating:save":this.saveRating}),this.$stars.on({mouseenter:this.handleMouseEnter,mouseleave:this.handleMouseLeave,click:this.handleClick})}return t.prototype.resetStars=function(){var e;return e=this.$ratingWidget.data("rating-original"),this.triggerChangeRating(e)},t.prototype.updateStars=function(e,t){var i;return 0===t?this.$stars.removeClass().addClass("star-rating__star"):((i=this.$ratingWidget.find("[data-star='"+t+"']")).prevAll().andSelf().removeClass().addClass("star-rating__star--full"),i.nextAll().removeClass().addClass("star-rating__star--empty"))},t.prototype.saveRating=function(e,t){if(!_.isUndefined(this.$ratingWidget.data("rating-original")))return this.$ratingWidget.data("rating-original",t)},t.prototype.handleMouseEnter=function(e){var t;return(t=$(e.delegateTarget)).prevAll().andSelf().addClass("is-on"),t.nextAll().addClass("is-off")},t.prototype.handleMouseLeave=function(e){var t;return(t=$(e.delegateTarget)).prevAll().andSelf().removeClass("is-on"),t.nextAll().removeClass("is-off")},t.prototype.handleClick=function(e){var t;if(e.preventDefault(),t=$(e.delegateTarget).data("star"),this.triggerChangeRating(t),t>3)return this.$ratingWidget.trigger("starRating:save",t)},t.prototype.triggerChangeRating=function(e){return $("[data-bind='item-star-rating:"+this.item_id+"']").trigger("starRating:change",e)},t}()}.call(this),Views.StatementDownloadDisabler=class{constructor(e){this.$el=e,this.select=this.$el.find(".js-statement__download-select"),this.button=this.$el.find(".js-statement__download-btn"),this.select.on({change:()=>this.checkSelectValue()}),this.checkSelectValue()}checkSelectValue(){this.button.prop("disabled",0===this.select.val().length)}},function(){Views.StatementSearch=function(){function e(e){var t;this.$el=e,this.$activePreset=this.$el.find(".statement-search__presets_links a.is-active"),this.$advancedToggle=this.$el.find(".statement-search__presets_toggle"),this.$advancedForm=this.$el.find(".statement-search__advanced-form"),this.$advancedTypes=this.$el.find(".statement-search__advanced-types input"),this.$typeSelectors=this.$el.find(".statement-search__advanced-type-btn label"),this.$fieldsForFilter=this.$el.find(".statement-search__advanced-type__filter"),this.$fieldsForRange=this.$el.find(".statement-search__advanced-type__range"),this.$fieldsForPeriod=this.$el.find(".statement-search__advanced-type__period"),this.$fieldsForDocumentNumber=this.$el.find(".statement-search__advanced-type__document-number"),this.$advancedToggle.on("click",(t=this,function(e){return e.preventDefault(),t.$activePreset.toggleClass("is-active"),t.$advancedToggle.toggleClass("is-active"),t.$advancedForm.toggleClass("is-hidden")})),this.$advancedTypes.on("change",function(e){return function(t){var i;if($(t.target).prop("checked",!0))switch(i=$(t.target).attr("value"),e.$typeSelectors.removeClass("is-active"),e.$el.find('label[for="search_type_'+i+'"]').addClass("is-active"),e.hideAdvancedFilters(),i){case"range":return e.$fieldsForRange.removeClass("is-hidden"),e.$fieldsForFilter.removeClass("is-hidden");case"period":return e.$fieldsForPeriod.removeClass("is-hidden"),e.$fieldsForFilter.removeClass("is-hidden");case"document_number":return e.$fieldsForDocumentNumber.removeClass("is-hidden")}}}(this))}return e.prototype.hideAdvancedFilters=function(){return this.$fieldsForFilter.addClass("is-hidden"),this.$fieldsForPeriod.addClass("is-hidden"),this.$fieldsForDocumentNumber.addClass("is-hidden"),this.$fieldsForRange.addClass("is-hidden")},e}()}.call(this),Market.GoogleAnalytics.ItemSupportPage=class{static init(){return this._instance||(this._instance=new this)}constructor(){$(document).on({"googleAnalytics:itemSupportContact":this.handleSupportContact.bind(this)})}handleSupportContact(e,t){try{Market.Helpers.GoogleAnalytics.sendEvent("event","Item Support Contact","click",{label:`contact method: ${t}`})}catch(t){console.warn(`Could not fetch payload for '${e.type}'. Item Support Contact event not sent.`)}}},Views.SupportContact=class{constructor(e){this.contactMethod=e.data("contactMethod"),this.dom={$contactButton:e.find(".js-support-contact__button")},Market.GoogleAnalytics.ItemSupportPage.init(),this.dom.$contactButton.on("click",this.handleContact.bind(this))}handleContact(e){$(document).trigger("googleAnalytics:itemSupportContact",this.contactMethod)}},function(){Views.SwiftForm=function(){function e(){var e;this.$newSwiftForm=$("#new-swift"),this.$hiddenSwiftExisting=$("#payout_swift_detail_existing_swift_detail_true, #payout_account_swift_detail_existing_swift_detail_true"),this.$hiddenSwiftNew=$("#payout_swift_detail_existing_swift_detail_false, #payout_account_swift_detail_existing_swift_detail_false"),this.$existingAccountRadio=$(".js-swift-existing-account-radio"),this.$newAccountButton=$(".js-swift-new-account-button"),this.$hiddenSwiftExisting.prop("checked",!0),this.$existingAccountRadio.change((e=this,function(t){return e.$hiddenSwiftExisting.prop("checked",!0),e.$newSwiftForm.addClass("is-hidden"),e.$newAccountButton.removeClass("is-hidden"),$(".js-account-manager-account").removeClass("is-selected"),$(t.target).closest(".js-account-manager-account").addClass("is-selected")})),this.$newAccountButton.on("click",function(e){return function(t){return t.preventDefault(),e.$hiddenSwiftNew.prop("checked",!0),e.$existingAccountRadio.prop("checked",!1),$(".js-account-manager-account").removeClass("is-selected"),e.$newSwiftForm.removeClass("is-hidden"),e.$newAccountButton.addClass("is-hidden")}}(this))}return e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.TableHighlightColumn=function(){function t(t){this.$el=t,this.handleColumnHover=e(this.handleColumnHover,this),this.highlightClass="js-highlight-column",this.$bodyCells=this.$el.find("td"),this.disableFirstColumn=this.$el.data("disable-first-column"),this.selectedColumn=this.$el.data("selected-column"),this.selectedColumnIndex=this.getSelectedColumnIndex(this.selectedColumn),this.$selectedColumnCells=this.$bodyCells.filter(":nth-child("+this.selectedColumnIndex+")"),this.$el.on("mouseenter mouseleave","th, td",this.handleColumnHover),this.highlightSelectedColumn()}return t.prototype.handleColumnHover=function(e){var t;if(t=$(e.currentTarget).index()+1,!this.disableFirstColumn||1!==t)return t!==this.selectedColumnIndex?this.$bodyCells.filter(":nth-child("+t+")").toggleClass(this.highlightClass,"mouseenter"===e.type):void 0},t.prototype.getSelectedColumnIndex=function(e){return this.$el.find("."+e).index()+1},t.prototype.highlightSelectedColumn=function(){return this.$selectedColumnCells.addClass(this.highlightClass)},t}()}.call(this),function(){function e(e){this._value=e}function t(e,t,i,n){var s,r,a=Math.pow(10,t);return r=(i(e*a)/a).toFixed(t),n&&(s=new RegExp("0{1,"+n+"}$"),r=r.replace(s,"")),r}function i(e,t,i){return t.indexOf("$")>-1?s(e,t,i):t.indexOf("%")>-1?r(e,t,i):t.indexOf(":")>-1?a(e,t):l(e._value,t,i)}function n(e,t){var i,n,s,r,a,l=t,c=["KB","MB","GB","TB","PB","EB","ZB","YB"],d=!1;if(t.indexOf(":")>-1)e._value=o(t);else if(t===g)e._value=0;else{for("."!==f[m].delimiters.decimal&&(t=t.replace(/\./g,"").replace(f[m].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+f[m].abbreviations.thousand+"(?:\\)|(\\"+f[m].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+f[m].abbreviations.million+"(?:\\)|(\\"+f[m].currency.symbol+")?(?:\\))?)?$"),s=new RegExp("[^a-zA-Z]"+f[m].abbreviations.billion+"(?:\\)|(\\"+f[m].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+f[m].abbreviations.trillion+"(?:\\)|(\\"+f[m].currency.symbol+")?(?:\\))?)?$"),a=0;a<=c.length&&!(d=t.indexOf(c[a])>-1&&Math.pow(1024,a+1));a++);e._value=(d||1)*(l.match(i)?Math.pow(10,3):1)*(l.match(n)?Math.pow(10,6):1)*(l.match(s)?Math.pow(10,9):1)*(l.match(r)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=d?Math.ceil(e._value):e._value}return e._value}function s(e,t,i){var n,s,r=t.indexOf("$"),a=t.indexOf("("),o=t.indexOf("-"),c="";return t.indexOf(" $")>-1?(c=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(c=" ",t=t.replace("$ ","")):t=t.replace("$",""),s=l(e._value,t,i),r<=1?s.indexOf("(")>-1||s.indexOf("-")>-1?(n=1,(r<a||r<o)&&(n=0),(s=s.split("")).splice(n,0,f[m].currency.symbol+c),s=s.join("")):s=f[m].currency.symbol+c+s:s.indexOf(")")>-1?((s=s.split("")).splice(-1,0,c+f[m].currency.symbol),s=s.join("")):s=s+c+f[m].currency.symbol,s}function r(e,t,i){var n,s="",r=100*e._value;return t.indexOf(" %")>-1?(s=" ",t=t.replace(" %","")):t=t.replace("%",""),(n=l(r,t,i)).indexOf(")")>-1?((n=n.split("")).splice(-1,0,s+"%"),n=n.join("")):n=n+s+"%",n}function a(e){var t=Math.floor(e._value/60/60),i=Math.floor((e._value-60*t*60)/60),n=Math.round(e._value-60*t*60-60*i);return t+":"+(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)}function o(e){var t=e.split(":"),i=0;return 3===t.length?(i+=60*Number(t[0])*60,i+=60*Number(t[1]),i+=Number(t[2])):2===t.length&&(i+=60*Number(t[0]),i+=Number(t[1])),Number(i)}function l(e,i,n){var s,r,a,o,l,c,d=!1,h=!1,u=!1,p="",v=!1,y=!1,b=!1,_=!1,$=!1,k="",w="",C=Math.abs(e),x=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],S="",A=!1;if(0===e&&null!==g)return g;if(i.indexOf("(")>-1?(d=!0,i=i.slice(1,-1)):i.indexOf("+")>-1&&(h=!0,i=i.replace(/\+/g,"")),i.indexOf("a")>-1&&(v=i.indexOf("aK")>=0,y=i.indexOf("aM")>=0,b=i.indexOf("aB")>=0,_=i.indexOf("aT")>=0,$=v||y||b||_,i.indexOf(" a")>-1?(p=" ",i=i.replace(" a","")):i=i.replace("a",""),C>=Math.pow(10,12)&&!$||_?(p+=f[m].abbreviations.trillion,e/=Math.pow(10,12)):C<Math.pow(10,12)&&C>=Math.pow(10,9)&&!$||b?(p+=f[m].abbreviations.billion,e/=Math.pow(10,9)):C<Math.pow(10,9)&&C>=Math.pow(10,6)&&!$||y?(p+=f[m].abbreviations.million,e/=Math.pow(10,6)):(C<Math.pow(10,6)&&C>=Math.pow(10,3)&&!$||v)&&(p+=f[m].abbreviations.thousand,e/=Math.pow(10,3))),i.indexOf("b")>-1)for(i.indexOf(" b")>-1?(k=" ",i=i.replace(" b","")):i=i.replace("b",""),a=0;a<=x.length;a++)if(s=Math.pow(1024,a),r=Math.pow(1024,a+1),e>=s&&e<r){k+=x[a],s>0&&(e/=s);break}return i.indexOf("o")>-1&&(i.indexOf(" o")>-1?(w=" ",i=i.replace(" o","")):i=i.replace("o",""),w+=f[m].ordinal(e)),i.indexOf("[.]")>-1&&(u=!0,i=i.replace("[.]",".")),o=e.toString().split(".")[0],l=i.split(".")[1],c=i.indexOf(","),l?(o=(S=l.indexOf("[")>-1?t(e,(l=(l=l.replace("]","")).split("["))[0].length+l[1].length,n,l[1].length):t(e,l.length,n)).split(".")[0],S=S.split(".")[1].length?f[m].delimiters.decimal+S.split(".")[1]:"",u&&0===Number(S.slice(1))&&(S="")):o=t(e,null,n),o.indexOf("-")>-1&&(o=o.slice(1),A=!0),c>-1&&(o=o.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f[m].delimiters.thousands)),0===i.indexOf(".")&&(o=""),(d&&A?"(":"")+(!d&&A?"-":"")+(!A&&h?"+":"")+o+S+(w||"")+(p||"")+(k||"")+(d&&A?")":"")}function c(e,t){f[e]=t}function d(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function h(){return Array.prototype.slice.call(arguments).reduce((function(e,t){var i=d(e),n=d(t);return i>n?i:n}),-1/0)}var u,p="1.5.3",f={},m="en",g=null,v="0,0",y="undefined"!=typeof module&&module.exports;(u=function(t){
return u.isNumeral(t)?t=t.value():0===t||void 0===t?t=0:Number(t)||(t=u.fn.unformat(t)),new e(Number(t))}).version=p,u.isNumeral=function(t){return t instanceof e},u.language=function(e,t){if(!e)return m;if(e&&!t){if(!f[e])throw new Error("Unknown language : "+e);m=e}return!t&&f[e]||c(e,t),u},u.languageData=function(e){if(!e)return f[m];if(!f[e])throw new Error("Unknown language : "+e);return f[e]},u.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),u.zeroFormat=function(e){g="string"==typeof e?e:null},u.defaultFormat=function(e){v="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var i,n,s=this.length>>>0,r=!1;for(1<arguments.length&&(n=t,r=!0),i=0;s>i;++i)this.hasOwnProperty(i)&&(r?n=e(n,this[i],i,this):(n=this[i],r=!0));if(!r)throw new TypeError("Reduce of empty array with no initial value");return n}),u.fn=e.prototype={clone:function(){return u(this)},format:function(e,t){return i(this,e||v,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:n(this,e||v)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t){return e+i*t}var i=h.call(null,this._value,e);return this._value=[this._value,e].reduce(t,0)/i,this},subtract:function(e){function t(e,t){return e-i*t}var i=h.call(null,this._value,e);return this._value=[e].reduce(t,this._value*i)/i,this},multiply:function(e){function t(e,t){var i=h(e,t);return e*i*(t*i)/(i*i)}return this._value=[this._value,e].reduce(t,1),this},divide:function(e){function t(e,t){var i=h(e,t);return e*i/(t*i)}return this._value=[this._value,e].reduce(t),this},difference:function(e){return Math.abs(u(this._value).subtract(e).value())}},y&&(module.exports=u),"undefined"==typeof ender&&(this.numeral=u),"function"==typeof define&&define.amd&&define([],(function(){return u}))}.call(this),function(){Views.TaxInformation=function(){function e(e){var t;this.$el=e,Market.DOMUtils.DependentFields.bind(),this.treatyCountries=this.$el.data("tax-treaty-countries"),this.formType=this.$el.data("form-type"),this.dom={$firstNameInput:this.$el.find(".js-tax__first-name-input"),$lastNameInput:this.$el.find(".js-tax__last-name-input"),$taxClassificationInput:this.$el.find(".js-tax__tax-classification-input"),$taxClassificationSelect:this.$el.find(".js-tax__tax-classification-select"),$taxIdRadio:this.$el.find(".js-tax__tax-id-number-radio"),$taxIdInput:this.$el.find(".js-tax__tax-id-number-input"),$taxIdField:this.$el.find(".js-tax__tax-id-number-field"),$dateOfBirthInput:this.$el.find(".js-tax__date_of_birth-input"),$dateOfBirthField:this.$el.find(".js-tax__date_of_birth-field"),$countrySelect:this.$el.find(".js-tax__country-select"),$stateInput:this.$el.find(".js-tax__state-input"),$zipCodeInput:this.$el.find(".js-tax__zip-code-input"),$chapter3StatusSelect:this.$el.find(".js-tax__chapter-3-status-select"),$hybridEntitySelect:this.$el.find(".js-tax__hybrid-entity-select"),$ssnRadio:this.$el.find("#tax_information_tax_id_type_ssn"),$einRadio:this.$el.find("#tax_information_tax_id_type_ein"),$ftinRadio:this.$el.find("#tax_information_tax_id_type_ftin"),$naRadio:this.$el.find("#tax_information_tax_id_type_na"),$notProvidedTaxNumberBox:this.$el.find(".js-tax__w8-ben-not-provided-tax-number-box"),$claimOfTaxTreatyBenefitsBox:this.$el.find(".js-tax__w8-ben-tax-treaty-benefits-box"),$countrySpan:this.$el.find(".js-tax__country-of-residence-span"),$fullNameSpan:this.$el.find(".js-tax__full-name-span"),$limitationOnBenefitsSelect:this.$el.find("#tax_information_limitation_on_benefits"),$limitationOnBenefitsOtherBox:this.$el.find(".js-tax__limitation-on-benefits-other-text-box"),$mailingAddressInput:this.$el.find(".js-tax__mailing-address-input"),$mailingCityInput:this.$el.find(".js-tax__mailing-city-input"),$mailingStateInput:this.$el.find(".js-tax__mailing-state-input"),$mailingZipCodeInput:this.$el.find(".js-tax__mailing-zip-code-input"),$mailingCountrySelect:this.$el.find(".js-tax__mailing-country-select"),$mailingAddressCheckbox:this.$el.find("#tax_information_mailing_address_same_as_residence"),$mailingAddressWrapper:this.$el.find(".js-tax__mailing_address_wrapper")},yepnope({load:"/assets/market/pages/default/additional_scripts/masked_input/index-725342fdaf14373b007b700bfc0136cb5d352b41be116a4bc23286784aaa0a38.js",complete:(t=this,function(){return t.updateTaxFields(),t.changeStateInputLabel(),t.changeMailingStateInputLabel(),t.changeZipCodeInputRequirement(),t.changeMailingZipCodeInputRequirement(),t.toggleMailingAddressFields(),t.changeHybridEntitySelect(),t.changeClassificationPlaceholder(),"W8-BEN"===t.formType&&t.updateName(),"W8-BEN"===t.formType&&t.updateDateOfBirthField(),t.dom.$claimOfTaxTreatyBenefitsBox.length&&t.toggleClaimOfTaxTreatyBenefitsBox(),t.toggleNotProvidedTaxNumberBox(),t.toggleLimitationOnBenefitsOtherBox()})}),this.dom.$firstNameInput.on("change",function(e){return function(){if(e.dom.$claimOfTaxTreatyBenefitsBox.length)return e.updateName()}}(this)),this.dom.$lastNameInput.on("change",function(e){return function(){if(e.dom.$claimOfTaxTreatyBenefitsBox.length)return e.updateName()}}(this)),this.dom.$countrySelect.on("change",function(e){return function(){if(e.changeStateInputLabel(),e.changeZipCodeInputRequirement(),e.dom.$claimOfTaxTreatyBenefitsBox.length)return e.toggleClaimOfTaxTreatyBenefitsBox()}}(this)),this.dom.$mailingCountrySelect.on("change",function(e){return function(){return e.changeMailingStateInputLabel(),e.changeMailingZipCodeInputRequirement()}}(this)),this.dom.$taxClassificationSelect.on("change",function(e){return function(){return e.changeClassificationPlaceholder(),e.changeTaxIdRadio()}}(this)),this.dom.$taxIdRadio.on("change",function(e){return function(){if(e.updateTaxFields(),e.toggleNotProvidedTaxNumberBox(),e.dom.$claimOfTaxTreatyBenefitsBox.length)return e.toggleClaimOfTaxTreatyBenefitsBox()}}(this)),this.dom.$chapter3StatusSelect.on("change",function(e){return function(){return e.changeHybridEntitySelect()}}(this)),this.dom.$limitationOnBenefitsSelect.on("change",function(e){return function(){return e.toggleLimitationOnBenefitsOtherBox()}}(this)),this.dom.$mailingAddressCheckbox.on("change",function(e){return function(){return e.toggleMailingAddressFields()}}(this))}return e.prototype.changeStateInputLabel=function(){switch(this.dom.$countrySelect.val()){case"AU":case"CA":case"ES":case"US":return this.dom.$stateInput.find("abbr").prop("hidden",!1);default:return this.dom.$stateInput.find("abbr").prop("hidden",!0)}},e.prototype.changeMailingStateInputLabel=function(){switch(this.dom.$mailingCountrySelect.val()){case"AU":case"CA":case"ES":case"US":return this.dom.$mailingStateInput.find("abbr").prop("hidden",!1);default:return this.dom.$mailingStateInput.find("abbr").prop("hidden",!0)}},e.prototype.changeZipCodeInputRequirement=function(){switch(this.dom.$countrySelect.val()){case"AU":case"CA":case"US":return this.dom.$zipCodeInput.find("abbr").prop("hidden",!1);default:return this.dom.$zipCodeInput.find("abbr").prop("hidden",!0)}},e.prototype.changeMailingZipCodeInputRequirement=function(){switch(this.dom.$mailingCountrySelect.val()){case"AU":case"CA":case"US":return this.dom.$mailingZipCodeInput.find("abbr").prop("hidden",!1);default:return this.dom.$mailingZipCodeInput.find("abbr").prop("hidden",!0)}},e.prototype.resetMailingAddressFields=function(){return this.dom.$mailingAddressInput.val(""),this.dom.$mailingCityInput.val(""),this.dom.$mailingStateInput.find("select, input").val(""),this.dom.$mailingZipCodeInput.find("input").val(""),this.dom.$mailingCountrySelect.val(""),this.dom.$mailingCountrySelect.trigger("change")},e.prototype.toggleMailingAddressFields=function(){return this.dom.$mailingAddressCheckbox.prop("checked")?(this.dom.$mailingAddressWrapper.hide(),this.resetMailingAddressFields()):this.dom.$mailingAddressWrapper.show()},e.prototype.changeClassificationPlaceholder=function(){switch(this.dom.$taxClassificationSelect.val()){case"Exempt Payee":return this.dom.$taxClassificationInput.attr("placeholder","Exempt Payee Code"),this.dom.$taxClassificationInput.show();case"Other":return this.dom.$taxClassificationInput.attr("placeholder","Enter your tax classification"),this.dom.$taxClassificationInput.show();default:return this.dom.$taxClassificationInput.removeAttr("placeholder"),this.dom.$taxClassificationInput.hide()}},e.prototype.changeTaxIdRadio=function(){switch(this.dom.$taxClassificationSelect.val()){case"Individual/Sole Proprietor or single-member LLC":case"Limited Liability Company - C":case"Limited Liability Company - S":case"Limited Liability Company - P":case"":return this.dom.$ssnRadio.prop("disabled",!1).parent().show();default:return this.dom.$ssnRadio.prop("disabled",!0).parent().hide()}},e.prototype.updateTaxFields=function(){switch(this.dom.$taxIdRadio.find(":checked").val()){case"SSN":case"ITIN":return this.dom.$taxIdField.show(),this.dom.$taxIdInput.val(""),this.dom.$taxIdInput.attr("placeholder","XXX-XX-XXXX"),this.dom.$taxIdInput.mask("?999-99-9999");case"EIN":return this.dom.$taxIdField.show(),this.dom.$taxIdInput.val(""),this.dom.$taxIdInput.attr("placeholder","XX-XXXXXXX"),this.dom.$taxIdInput.mask("?99-9999999");case"GIIN":return this.dom.$taxIdField.show(),this.dom.$taxIdInput.val(""),this.dom.$taxIdInput.attr("placeholder","XXXXXX.XXXXX.XX.XXX"),this.dom.$taxIdInput.mask("******.*****.aa.999");case"FTIN":return this.dom.$taxIdField.show(),this.dom.$taxIdInput.val(""),this.dom.$taxIdInput.attr("placeholder",""),this.dom.$taxIdInput.unmask();case"NA":return this.dom.$taxIdInput.val(""),this.dom.$taxIdField.hide()}},e.prototype.updateDateOfBirthField=function(){return this.dom.$dateOfBirthField.show(),this.dom.$dateOfBirthInput.val(""),this.dom.$dateOfBirthInput.attr("placeholder","MM-DD-YYYY"),this.dom.$dateOfBirthInput.mask("?99-99-9999")},e.prototype.changeHybridEntitySelect=function(){switch(this.dom.$chapter3StatusSelect.val()){case"Disregarded entity":case"Partnership":case"Simple trust":case"Grantor trust":return this.dom.$hybridEntitySelect.show().find("select").prop("disabled",!1);default:return this.dom.$hybridEntitySelect.hide().find("select").prop("disabled",!0)}},e.prototype.updateName=function(){if(this.dom.$firstNameInput.val().length&&this.dom.$lastNameInput.val().length)return this.dom.$fullNameSpan.text(this.dom.$firstNameInput.val()+" "+this.dom.$lastNameInput.val())},e.prototype.toggleClaimOfTaxTreatyBenefitsBox=function(){return this.dom.$countrySelect.val().length&&this.countryHasCountryTreatyBenefits()&&!this.isNotProvidingTaxNumber()?(this.dom.$claimOfTaxTreatyBenefitsBox.show(),this.updateCountrySpan(),this.dom.$claimOfTaxTreatyBenefitsBox.find("input").prop("required",!0),this.dom.$claimOfTaxTreatyBenefitsBox.find("select").prop("required",!0)):(this.dom.$claimOfTaxTreatyBenefitsBox.find("input").prop("checked",!1),this.dom.$claimOfTaxTreatyBenefitsBox.find("input").prop("required",!1),this.dom.$claimOfTaxTreatyBenefitsBox.find("select").prop("required",!1),this.dom.$claimOfTaxTreatyBenefitsBox.hide())},e.prototype.toggleNotProvidedTaxNumberBox=function(){return this.isNotProvidingTaxNumber()?this.dom.$notProvidedTaxNumberBox.show():this.dom.$notProvidedTaxNumberBox.hide()},e.prototype.toggleLimitationOnBenefitsOtherBox=function(){return"Other"===this.dom.$limitationOnBenefitsSelect.val()?this.dom.$limitationOnBenefitsOtherBox.show().find("input").prop("disabled",!1):this.dom.$limitationOnBenefitsOtherBox.hide().find("input").prop("disabled",!0)},e.prototype.isNotProvidingTaxNumber=function(){return"NA"===this.dom.$taxIdRadio.find(":checked").val()},e.prototype.countryHasCountryTreatyBenefits=function(){return void 0!==this.treatyCountries[this.dom.$countrySelect.val()]},e.prototype.updateCountrySpan=function(){return this.dom.$countrySpan.text(this.dom.$countrySelect.find(":selected").text())},e}()}.call(this),Views.ToggleItemDescription=class{constructor(e){let t;const i=400,n=e.find(".js-item-togglable-content"),s=e.find(".js-item-description-toggle"),r=s.find("a");n.height()>i&&(n.addClass("has-toggle"),r.removeClass("is-hidden"),t=s.offset().top-140),r.on("click.toggleItemDescription",(e=>{e.preventDefault(),n.toggleClass("is-expanded"),s.toggleClass("is-expanded"),n.hasClass("is-expanded")||window.scrollTo(0,t)}))}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Views.TooltipAlpha=function(){function t(t){this.$el=t,this.tooltipMouseLeave=e(this.tooltipMouseLeave,this),this.tooltipMouseEnter=e(this.tooltipMouseEnter,this),this.tooltipClick=e(this.tooltipClick,this),this.tooltipHover=e(this.tooltipHover,this),this.orientationChange=e(this.orientationChange,this),this.cancelDelayTimeout=e(this.cancelDelayTimeout,this),this.hideTooltipAfterDelay=e(this.hideTooltipAfterDelay,this),this.hideTooltip=e(this.hideTooltip,this),this.showTooltip=e(this.showTooltip,this),this.updateVisibility=e(this.updateVisibility,this),this.updatePosition=e(this.updatePosition,this),this.currentlyVisible=!1,this.delayTimeout=null,this.isTouch=Modernizr.touch,this.sticky=this.$el.data("sticky"),this.dom={$tooltipBody:this.$el.find(".js-tooltip-alpha__body").clone().appendTo($(document.body))},this.isTouch?(this.$el.on("click",this.tooltipClick),this.dom.$tooltipBody.on("click",this.tooltipClick),$(window).on("orientationchange",this.orientationChange)):(this.$el.hover(this.tooltipHover),this.sticky&&(this.dom.$tooltipBody.on("mouseenter",this.tooltipMouseEnter),this.dom.$tooltipBody.on("mouseleave",this.tooltipMouseLeave)))}return t.prototype.updatePosition=function(e){return this.dom.$tooltipBody.css(e)},t.prototype.updateVisibility=function(){return this.currentlyVisible?this.sticky&&!this.isTouch?this.hideTooltipAfterDelay():this.hideTooltip():this.showTooltip()},t.prototype.showTooltip=function(){return this.cancelDelayTimeout(),this.currentlyVisible=!0,this.dom.$tooltipBody.attr("data-show",this.currentlyVisible)},t.prototype.hideTooltip=function(){return this.cancelDelayTimeout(),this.currentlyVisible=!1,this.dom.$tooltipBody.attr("data-show",this.currentlyVisible)},t.prototype.hideTooltipAfterDelay=function(){return this.cancelDelayTimeout(),this.delayTimeout=setTimeout(this.hideTooltip,2e3)},t.prototype.cancelDelayTimeout=function(){if(this.delayTimeout)return clearTimeout(this.delayTimeout),this.delayTimeout=null},t.prototype.orientationChange=function(){var e;return e={top:this.$el.offset().top},this.updatePosition(e)},t.prototype.tooltipHover=function(){var e,t;return e={left:(t=this.$el.offset()).left,top:t.top},this.updatePosition(e),this.updateVisibility()},t.prototype.tooltipClick=function(){var e;return e={top:this.$el.offset().top},this.updatePosition(e),this.updateVisibility()},t.prototype.tooltipMouseEnter=function(){return this.cancelDelayTimeout()},t.prototype.tooltipMouseLeave=function(){return this.hideTooltipAfterDelay()},t}()}.call(this),Views.TransactionTypeFilter=class{constructor(e){this.$el=e,this.$marketplaceOptions=$(".js-statement-search__marketplace"),this.canSearchByMarketplace=this.$marketplaceOptions.data("transaction-types-with-marketplaces").split(","),this.ALL_TRANSACTIONS="",this.$marketplaceOptions.length&&(this.$el.on("change",this.changeMarketplaceSelectStatus.bind(this)),this.changeMarketplaceSelectStatus())}changeMarketplaceSelectStatus(){const e=this.$el.find(":selected").attr("value").toLowerCase();this.canSearchByMarketplace.includes(e)||e===this.ALL_TRANSACTIONS?this.$marketplaceOptions.prop("disabled",!1):this.$marketplaceOptions.prop("disabled",!0).val("")}},function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1};Views.TypeSelectWatcher=function(){function i(t){this.canSubmit=e(this.canSubmit,this),this.toggleDefaultMessage=e(this.toggleDefaultMessage,this),this.handleSelectChanged=e(this.handleSelectChanged,this),this.dom={$label:t.find(".js-category-message"),$defaultMessage:t.find(".js-category-default-message"),$select:t.find(".js-item-type"),$form:$("form#begin-upload"),$submitButton:$(".upload-category-selector__btn > button")},this.dom.$select.on("change",this.handleSelectChanged),this.defaultUrl=this.dom.$form.attr("action"),this.dom.$select.trigger("change")}return i.prototype.handleSelectChanged=function(){var e,t,i,n;return i=this.dom.$select.val(),t=this.dom.$select.data("messages")[i]||"",n=this.dom.$select.data("actions")[i]||this.defaultUrl,e=this.dom.$select.data("disabled-categories")||[],this.toggleDefaultMessage(t),this.dom.$label.html(t),this.dom.$form.attr("action",n),this.dom.$submitButton.prop("disabled",!this.canSubmit(i,e))},i.prototype.toggleDefaultMessage=function(e){return 0===e.length?this.dom.$defaultMessage.removeClass("is-hidden"):this.dom.$defaultMessage.addClass("is-hidden")},i.prototype.canSubmit=function(e,i){return e&&!(t.call(i,e)>=0)},i}()}.call(this),Views.Uploader=class{constructor(e){yepnope({load:e.data("script"),complete:()=>viewloader.execute(Views,e)})}},Views.UserEditTabSelector=class{constructor(){$("#user-edit-tab").addClass("selected")}},Views.AjaxPlaceholder=class{constructor(e){e.on("click",(e=>e.preventDefault()))}},Market.GoogleAnalytics.Promos=class{static init(){return this._instance||(this._instance=new this)}constructor(){$(document).on({"googleAnalytics:promoBannerClick":this.handlePromoBannerClick.bind(this),"googleAnalytics:bannerView":this.handleBannerView.bind(this),"googleAnalytics:bannerClose":this.handleBannerClose.bind(this)})}handlePromoBannerClick(e,t){const i=t.payload.productsArray?t.payload.productsArray[0]:t.payload;Market.Helpers.GoogleAnalytics.addPromo(i),Market.Helpers.GoogleAnalytics.setAction("promo_click"),Market.Helpers.GoogleAnalytics.sendEvent("event","Internal Promotions","click",{label:t.payload.name})}handleBannerView(e,t){const i=t.payload.productsArray?t.payload.productsArray[0]:t.payload;Market.Helpers.GoogleAnalytics.addPromo(i),Market.Helpers.GoogleAnalytics.sendEvent("event","Banner Impression","view",{label:t.payload.name})}handleBannerClose(e,t){const i=t.payload.productsArray?t.payload.productsArray[0]:t.payload;Market.Helpers.GoogleAnalytics.addPromo(i),Market.Helpers.GoogleAnalytics.sendEvent("event","Banner Impression","close",{label:t.payload.name})}},Views.Banner=class{constructor(e){this.dom={banner:e,close:e.find(".js-banner__dismiss"),link:e.find(".js-banner__link")},this.bannerData=this.dom.banner.data(),this.bannerKey=this.bannerData.cacheKey,this.cookiebotEnabled=this.bannerData.cookiebotEnabled,this.consentGiven=Market.Helpers.CookieConsent.given,this.consentType="preferences",this.sentClickEvent=!1,this.sentBannerViewEvent=!1,this.googleAnalyticsPayload=this.bannerData.googleAnalyticsPayload||!1,Market.GoogleAnalytics.Promos.init(),console.log(`MC currently: ${Market.Helpers.CookieConsent.given("marketing")}`),this.showBanner(),Market.Helpers.CookieConsent.addListener("marketing",this.setBannerCookie.bind(this)),this.dom.close.on("click",this.handleClose.bind(this)),this.dom.link.on("click",this.handleClick.bind(this))}handleClick(e){if(null!=this.googleAnalyticsPayload&&!1===this.sentClickEvent)return this.sentClickEvent=!0,$(document).trigger("googleAnalytics:promoBannerClick",{payload:this.googleAnalyticsPayload})}handleClose(e){if(e.preventDefault(),e.stopPropagation(),this.dom.banner.slideUp(250),this.setLocalStorage(this.bannerKey),this.consentGiven("marketing")&&null!=this.googleAnalyticsPayload)return $(document).trigger("googleAnalytics:bannerClose",{payload:this.googleAnalyticsPayload})}setLocalStorage(e){if(!this.cookiebotEnabled||this.consentGiven(this.consentType))return window.localStorage.setItem(e,"hidden")}showBanner(){return!window.localStorage.getItem(this.bannerKey)?(this.dom.banner.slideDown(250),Market.Helpers.CookieConsent.addListener("marketing",this.sendBannerViewEvent.bind(this))):this.dom.banner.addClass("hide")}setBannerCookie(){const e={path:"/",domain:window.location.host,expires:14},t=JSON.stringify(this.bannerData.cookieData);return $.cookie("marketplace_banners",t,e)}sendBannerViewEvent(){if(null!=this.googleAnalyticsPayload&&!1===this.sentBannerViewEvent)return this.sentBannerViewEvent=!0,$(document).trigger("googleAnalytics:bannerView",{payload:this.googleAnalyticsPayload})}},Views.CartCount=class{constructor(e){this.$el=e,this.dom={$count:this.$el.find(".js-cart-summary-count")},$(document).on("uiCartUpdateRequest",this.handleCartUpdate.bind(this))}handleCartUpdate(e,t){const i=t.cart_count;1===i&&this.$el.removeClass("is-empty"),this.dom.$count.html(i)}},Views.CartVariantSelector=class{constructor(e){this.$el=e,this.MATRIX=this.$el.data("matrix"),this.DISCOUNT=this.$el.data("discount"),this.dom={$licenses:this.$el.find(".js-cart-variant__license"),$supportBundles:this.$el.find(".js-cart-variant__support"),$defaultLicense:this.$el.find(".js-cart-variant__default-license"),$price:this.$el.find(".js-cart-variant__output-price"),$license:this.$el.find(".js-cart-variant__output-license"),$support:this.$el.find(".js-cart-variant__output-support"),$error:this.$el.find(".js-cart-variant__error"),$discount:this.$el.find(".js-cart-variant__output-discount-price")},this.itemSupportable=this.dom.$supportBundles.length>0,this.activeSupport=this._getActiveSupport(),this.activeLicense=this._getActiveLicense(),this.activePrice=this._getActivePrice(),this.discountPrice=this._getDiscountPrice(),this.discountOriginalPrice=this._getDiscountOriginalPrice(),this.discountAvailable=this._getDiscountAvailability(),this.dom.$licenses.on("change",this.handleLicenseChange.bind(this)),this.dom.$supportBundles.on("change",this.handleSupportChange.bind(this))}handleLicenseChange(e){this.activeLicense=this._getActiveLicense(),this.discountAvailable=this._getDiscountAvailability(),this.discountPrice=this._getDiscountPrice(),this.discountOriginalPrice=this._getDiscountOriginalPrice(),this._updateUI()}handleSupportChange(e){this.activeSupport=this._getActiveSupport(),this.discountAvailable=this._getDiscountAvailability(),this.discountPrice=this._getDiscountPrice(),this.discountOriginalPrice=this._getDiscountOriginalPrice(),this._updateUI()}_getActiveLicense(){return this.dom.$licenses.find("option:selected").data("license")||this.dom.$defaultLicense.data("license")}_getActiveSupport(){return this.dom.$supportBundles.find("option:selected").data("support")||"none"}_getActivePrice(){return this.MATRIX[this.activeLicense].support[this.activeSupport].price}_getActiveTermsUrl(){return this.dom.$licenses.find("option:selected").data("terms-url")||this.dom.$defaultLicense.data("terms-url")}_getDiscountAvailability(){return this.MATRIX[this.activeLicense].default&&this.DISCOUNT.discount_original_price}_getDiscountPrice(){return"bundle_12month"===this.activeSupport?this.DISCOUNT.discount_upgrade_price:this.DISCOUNT.discount_price}_getDiscountOriginalPrice(){return"bundle_12month"===this.activeSupport?this.DISCOUNT.discount_upgrade_original_price:this.DISCOUNT.discount_original_price}_renderActiveLicense(){const e=this.MATRIX[this.activeLicense];this.dom.$license.html(e.license_label),this.dom.$license.attr("href",e.terms_url)}_renderActiveSupport(){this.itemSupportable&&this.dom.$support.html(this.MATRIX[this.activeLicense].support[this.activeSupport].label)}_renderActivePrice(){const e=this.discountAvailable?this.discountOriginalPrice:this.activePrice;this.dom.$price.html(e)}_renderDiscount(){this.discountAvailable?(this.dom.$discount.text(this.discountPrice),this.dom.$price.text(this.discountOriginalPrice),this.dom.$discount.addClass("active"),this.dom.$price.addClass("cart-variant__output-original-price")):(this.dom.$discount.removeClass("active"),this.dom.$price.removeClass("cart-variant__output-original-price"))}_updateUI(){this.activePrice=this._getActivePrice(),this._renderActiveLicense(),this._renderActiveSupport(),this._renderActivePrice(),this._renderDiscount(),this._broadcastVariantChange(),this._broadcastVariantChange()}_broadcastVariantChange(){const e={license:this.activeLicense,price:this.activePrice};$(document).trigger("item:variantChange",e)}},Views.CharacterCounter=class{constructor(e){this.$textField=e,this.maxLength=parseInt(this.$textField.data("maxLength"),10),this.$counterField=$(`.${this.$textField.data("counterClass")}`),this.$submitBtn=$(`.${this.$textField.data("submitBtn")}`),this.updateCounter(),this.$textField.on("input",this.updateCounter.bind(this))}updateCounter(){const e=this.$textField.val().length,t=e>this.maxLength;this.$counterField.html(this.maxLength-e),this.$submitBtn.prop("disabled",t),this.$counterField.toggleClass("is-error",t)}},Views.CollectionWidgetForm=class{constructor(e){this.$el=e,this.$form=this.$el.find(".js-collection-form"),this.$formReveal=this.$el.find(".js-collection-form-reveal"),this.$formInput=this.$el.find(".js-collection-form-input"),this.$formError=this.$el.find(".js-collection-form-error"),this.$formCancel=this.$el.find(".js-collection-form-cancel"),this.formClosed=!0,this.$formInput.on("focus",this.showForm.bind(this)),this.$formCancel.on("click",this.handleCancelClick.bind(this)),this.$form.on("collection:added",this.createSuccess.bind(this))}showForm(){this.formClosed&&(this.formClosed=!1,this.$formReveal.slideDown(),this.switchButtonPriority())}hideForm(){this.formClosed=!0,this.$formInput.val(""),this.$formError.html("").addClass("is-collapsed"),this.$formReveal.slideUp(),this.switchButtonPriority()}handleCancelClick(e){e.preventDefault(),this.hideForm()}createSuccess(){this.hideForm(),$(".js-collections-list").animate({scrollTop:0,duration:600})}switchButtonPriority(){$(".js-collection-form-sumbit, .js-modal-close").toggleClass("-color-primary").toggleClass("-color-light")}};class DelegatedDropdownManager{constructor(e){this.$manager=e,this.state={status:"closed",$currentDropdown:null},this.$manager.on("delegatedDropdown:change",((e,t,i)=>{"open"===t?this.watch(i):this.stopWatching()}))}watch(e){"open"===this.state.status&&this.state.$currentDropdown.trigger("delegatedDropdown:close"),this.state={status:"open",$currentDropdown:e},this.$manager.on("click.delegatedDropdown",(e=>{0!==this.state.$currentDropdown.has(e.target).length||this.state.$currentDropdown.is(e.target)||this.state.$currentDropdown.trigger("delegatedDropdown:close")}))}stopWatching(){this.state={status:"closed",$el:null},this.$manager.off("click.delegatedDropdown")}}Market.DOMUtils.getDelegatedDropdownManager=function(){return DelegatedDropdownManager._instance||(DelegatedDropdownManager._instance=new DelegatedDropdownManager($("body")))},Views.DelegatedDropdown=class{constructor(e){this.$el=e,Market.DOMUtils.getDelegatedDropdownManager(),this.state="closed",this.$target=$(this.$el.data("dropdownTarget")),this.$el.on("click",this.toggleDropdown.bind(this)),this.$el.on("delegatedDropdown:close",this.closeDropdown.bind(this)),this.$el.data("ignoreDropdownClicks")&&this.$target.on("click",(e=>e.stopPropagation()))}toggleDropdown(e){e.preventDefault(),this.$el.toggleClass("is-open"),this.$target.toggleClass("is-hidden"),this.state="closed"===this.state?"open":"closed",this.$el.trigger("delegatedDropdown:change",[this.state,this.$el])}closeDropdown(){this.$el.removeClass("is-open"),this.$target.addClass("is-hidden"),this.state="closed",this.$el.trigger("delegatedDropdown:change",[this.state,this.$el])}},Views.Dropdown=class{constructor(e){this.$toggle=e,this.$target=$(this.$toggle.data("dropdownTarget")),this.$toggle.on("click",(e=>{e.preventDefault(),this.$toggle.toggleClass("is-open"),this.$target.toggleClass("is-hidden")}))}},Views.Exposer=class{constructor(e){e.exposer({exposer:e.data("exposer"),destroyParent:!0})}},Views.GlobalMenu=class{constructor(e){this.$el=e,this.dom={$logo:this.$el.find(".global-header__logo"),$menuLink:this.$el.find("a.global-header-menu__link"),$dropdownLink:this.$el.find("a.global-header-dropdown__link")},this.dom.$logo.on("click",this.handleLogoClick.bind(this)),this.dom.$menuLink.on("click",this.handleMenuLinkClick.bind(this)),this.dom.$dropdownLink.on("click",this.handleDropdownLinkClick.bind(this))}handleLogoClick(){this._sendGAEvent("envato market")}handleMenuLinkClick(e){const t=e.target.closest("a").dataset.globalMenuGaLabel;t&&this._sendGAEvent(t)}handleDropdownLinkClick(e){const t=e.target.closest("a").dataset.globalMenuGaLabel;t&&this._sendGAEvent(`our products;${t}`)}_sendGAEvent(e){Market.Helpers.GoogleAnalytics.sendEvent("event","page-header-top","click;link",{label:e.trim()})}},Views.HeaderCartCount=class{constructor(e){this.$el=e,$(document).on("uiCartUpdateRequest",this.handleCartUpdate.bind(this))}handleCartUpdate(e,t){const i=t.cart_count;0===i?this.$el.addClass("is-hidden"):this.$el.removeClass("is-hidden"),this.$el.text(i)}},Views.ModalAutoLoad=class{constructor(e){this.$el=e,this.$el.find("a").click()}},Views.ModalConfirmationMessage=class{constructor(e){this.$el=e,this.modalInstance=$.magnificPopup.instance,this.$form=this.$el.find("form"),this.$inner=this.$el.find(".js-modal__form"),this.successMessage=this.$form.data("success-message")||"Thank you for updating your details!",this.$form.on({"ajax:success":this.handleSuccess.bind(this),"ajax:error":this.handleError.bind(this)})}handleSuccess(e,t,i,n){this.modalInstance?($(".js-system-banner p").html(this.successMessage),this.modalInstance.close()):window.location.href=n.responseJSON.success_url}handleError(e,t,i,n){500===t.status?this.$inner.html("<p class='t-body'>Sorry something went wrong.<br> Please refresh the page and try again.</p>"):this.$form.html(t.responseText)}},Views.OffCanvasLeft=class{constructor(e){this.$el=e,this.$subcategoryLink=this.$el.find(".off-canvas-category-link--sub"),this.$subcategoryLink.on("click",this.handleClick.bind(this))}handleClick(e){this._sendGAEvent($(e.target).text())}_sendGAEvent(e){Market.Helpers.GoogleAnalytics.sendEvent("event","MarketNav","click",{label:e.trim()})}},Market.DOMUtils.offCanvasDrawerToggle=function(e){switch(this.canvasPosition=e,this.$container=$(".page"),this.$canvas=$(".page__canvas"),this.$left=$(".page__off-canvas--left"),this.$right=$(".page__off-canvas--right"),this.$container.toggleClass("page--is-off-canvas"),$(".page__overlay").toggleClass("page__overlay--is-active"),this.canvasPosition){case"left":this.$canvas.addClass("page__canvas--is-off-canvas-left"),this.$left.toggleClass("page__off-canvas--is-active");break;case"right":this.$canvas.addClass("page__canvas--is-off-canvas-right"),this.$right.toggleClass("page__off-canvas--is-active");break;case"close":this.$canvas.removeClass("page__canvas--is-off-canvas-right page__canvas--is-off-canvas-left"),$("[class^='page__off-canvas']").removeClass("page__off-canvas--is-active")}},Views.OffCanvasNavToggle=class{constructor(e){this.$el=e,this.position=this.$el.data("off-canvas"),this.$el.on("click",this.handleClick.bind(this))}handleClick(e){e.preventDefault(),Market.DOMUtils.offCanvasDrawerToggle(this.position)}},Date.now||(Date.now=function(){return(new Date).getTime()}),function(){"use strict";for(var e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t){var i=e[t];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var n=0;window.requestAnimationFrame=function(e){var t=Date.now(),i=Math.max(n+16,t);return setTimeout((function(){e(n=i)}),i-t)},window.cancelAnimationFrame=clearTimeout}}(),Views.ParallaxBackground=class{constructor(e){this.$el=e,this.canEnableEffect()&&(this.setVariables(),this.handleScroll(),this.bindEvents())}bindEvents(){$(window).off("scroll.parallaxBackground"),$(window).on("scroll.parallaxBackground",this.handleScroll.bind(this))}canEnableEffect(){return this._isContainerVisible()&&this._isLargeScreenSize()}handleScroll(){this.windowScrollPosition=window.pageYOffset,this._animate(this._updatePosition.bind(this))}setVariables(){this.parallaxSpeed=30,this.backgroundContainer=this.$el.find(".js-.page-section__background")[0],this.parentContainer=this.$el[0],this.browserPrefixes=["-moz-","-ms-","-o-","-webkit-",""],this.isAnimating=!1}_animate(e){
this.isAnimating||(window.requestAnimationFrame(e),this.isAnimating=!0)}_getNewPosition(){const e=(this.windowScrollPosition*(100-this.parallaxSpeed)/100).toFixed();return Math.max(0,e)}_updatePosition(){const e=`translate3d(0px, ${this._getNewPosition()}px, 0px)`;for(const t of this.browserPrefixes){const i=`${t}transform`;this.backgroundContainer.style[i]=e}this.isAnimating=!1}_isContainerVisible(){return this.$el.is(":visible")}_isLargeScreenSize(){return window.innerWidth>800}},Views.SearchField=class{constructor(e){const t=e.find(".js-term");e.on("submit",(e=>{if(!t.val())return e.preventDefault();Market.Helpers.GoogleAnalytics.sendEvent("event","MarketNav","Search")}))}},Views.SystemBanner=class{constructor(e){this.$el=e,this.dom={$banner:this.$el,$form:this.$el.find(".js-system-banner__accept").closest("form")},this.dom.$form.on({"ajax:success":this.handleSuccess.bind(this)})}handleSuccess(){this.dom.$banner.slideUp(100,(()=>this.dom.$banner.remove()))}},Views.TextareaAutosize=class{constructor(e){e.autosize()}},Views.TouchOnlyDropdown=class{constructor(e){if(Modernizr.touch){new Views.DelegatedDropdown(e);$(e.data("dropdownTarget")).addClass("touch-only-dropdown-is-ready is-hidden")}}},Views.HeaderCategories=class{constructor(e){this.$el=e,this.dom={$categoryLink:this.$el.find(".header-categories__main-link"),$subcategoryLink:this.$el.find(".header-categories__links-dropdown a")},this.dom.$categoryLink.on("click",this.handleCategory.bind(this)),this.dom.$subcategoryLink.on("click",this.handleSubcategory.bind(this))}handleCategory(e){this._sendGAEvent($(e.target).text())}handleSubcategory(e){const t=$(e.target).parents(".header-categories__links-item").children("a").text(),i=$(e.target).text();this._sendGAEvent(`${t} - ${i}`)}_sendGAEvent(e){Market.Helpers.GoogleAnalytics.sendEvent("event","MarketNav","click",{label:e.trim()})}},Views.ReviewForm=class{constructor(e){this.dom={$SortReviewsTab:e.find(".js-item-navigation-sort-by-reviews")},Market.GoogleAnalytics.ItemPage.init(),this.dom.$SortReviewsTab.on("change",this.handleReviewsSortingTab.bind(this))}handleReviewsSortingTab(e){const t={label:"Reviews : "+$(e.currentTarget).find("option:selected").text()};$(document).trigger("googleAnalytics:ReviewsSortingOnTab",t)}},Views.CommentForm=class{constructor(e){this.dom={$searchCommentsTab:e.find(".js-item-navigation-search-comments"),$verifiedCommentsTab:$(".js-item-navigation-verified-comments"),$commentsSortBy:$(".js-item-navigation-sort-by")},Market.GoogleAnalytics.ItemPage.init(),this.dom.$searchCommentsTab.on("click",this.handleCommentsSearchTab.bind(this)),this.dom.$verifiedCommentsTab.on("click",this.handleVerifiedCommentsTab.bind(this)),this.dom.$commentsSortBy.on("change",this.handleCommentsSortBy.bind(this))}handleCommentsSearchTab(e){$(document).trigger("googleAnalytics:CommentsSearchTab")}handleVerifiedCommentsTab(e){const t=`Comments : ${$(e.currentTarget).prop("checked")?"buyers and authors only":"remove buyers and authors only"}`;$(document).trigger("googleAnalytics:VerifiedCommentsTab",{label:t})}handleCommentsSortBy(e){let t;switch($(e.currentTarget).val()){case"relevance":t="Most Relevant";break;case"newest":t="Newest";break;case"oldest":t="Oldest"}const i=`Comments : ${t} first`;$(document).trigger("googleAnalytics:commentsSortBy",{label:i}),e.currentTarget.form.submit()}},Views.AffiliatesTracker=class{constructor(e){const t=e.data("cookiebot-enabled"),i=(Market.Helpers.CookieConsent.given,Market.Helpers.CookieConsent.cookieAvailable()),n=this.removeAffiliateCookies,s=this.registerReferral.bind(this);this.setupReferralListener(t,s,n),i&&t||s()}setupReferralListener(e,t,i){const n=Market.Helpers.CookieConsent.given;e&&window.addEventListener("CookiebotOnAccept",(function(){if(n("marketing")){$.cookie("click_id")||t()}else i()}),!1)}removeAffiliateCookies(){const e="/consociate/recant";$.ajax({method:"GET",url:e,dataType:"JSON",timeout:5e3,xhrFields:{withCredentials:!0}}).then((function(){Market.Helpers.GoogleAnalytics.sendEvent("event","affiliate cookie removal","success")}),(function(t,i,n){Market.Helpers.GoogleAnalytics.sendEvent("event","affiliate cookie removal error",`${t.status} | ${i} | ${n}`,{label:e})}))}registerReferral(){const e=this._currentLocation(),t=new URL(e);t.pathname="/consociate/indite",t.search&&!t.search.includes("redirect_back")&&(t.searchParams.append("url",e),t.searchParams.append("referrer",document.referrer)),$.ajax({method:"GET",url:t.href,dataType:"JSON",timeout:5e3,xhrFields:{withCredentials:!0}}).then((function(e){e&&e.redirect&&(window.location.href=e.redirect_url)}),(function(e,i,n){Market.Helpers.GoogleAnalytics.sendEvent("event","affiliate cookie",`${e.status} | ${i} | ${n}`,{label:t})}))}_currentLocation(){return window.location.href}},function(e){"use strict";e.console=e.console||{};for(var t,i,n=e.console,s={},r=function(){},a="memory".split(","),o="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=a.pop();)n[t]||(n[t]=s);for(;i=o.pop();)n[i]||(n[i]=r)}("undefined"==typeof window?this:window),Views.AddToCartAutoSubmitForm=class{constructor(e){e.submit()}},Views.AutoSelect=class{constructor(e){e.on("change",(function(){e.closest("form").submit()}))}},Market.DOMUtils._userSignedIn=null,Market.DOMUtils.isUserSignedIn=function(){return null!==Market.DOMUtils._userSignedIn?Market.DOMUtils._userSignedIn:Market.DOMUtils._userSignedIn=$("body").data("user-signed-in")},function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Handlebars=t():e.Handlebars=t()}(this,(function(){return function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function n(){var e=u();return e.compile=function(t,i){return l.compile(t,i,e)},e.precompile=function(t,i){return l.precompile(t,i,e)},e.AST=a.default,e.Compiler=l.Compiler,e.JavaScriptCompiler=c.default,e.Parser=o.parser,e.parse=o.parse,e}var s=i(1).default;t.__esModule=!0;var r=s(i(2)),a=s(i(35)),o=i(36),l=i(41),c=s(i(42)),d=s(i(39)),h=s(i(34)),u=r.default.create,p=n();p.create=n,h.default(p),p.Visitor=d.default,p.default=p,t.default=p,e.exports=t.default},function(e,t){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(e,t,i){"use strict";function n(){var e=new a.HandlebarsEnvironment;return c.extend(e,a),e.SafeString=o.default,e.Exception=l.default,e.Utils=c,e.escapeExpression=c.escapeExpression,e.VM=d,e.template=function(t){return d.template(t,e)},e}var s=i(3).default,r=i(1).default;t.__esModule=!0;var a=s(i(4)),o=r(i(21)),l=r(i(6)),c=s(i(5)),d=s(i(22)),h=r(i(34)),u=n();u.create=n,h.default(u),u.default=u,t.default=u,e.exports=t.default},function(e,t){"use strict";t.default=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},t.__esModule=!0},function(e,t,i){"use strict";function n(e,t,i){this.helpers=e||{},this.partials=t||{},this.decorators=i||{},o.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}var s=i(1).default;t.__esModule=!0,t.HandlebarsEnvironment=n;var r=i(5),a=s(i(6)),o=i(10),l=i(18),c=s(i(20)),d="4.0.8";t.VERSION=d;var h=7;t.COMPILER_REVISION=h;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=u;var p="[object Object]";n.prototype={constructor:n,logger:c.default,log:c.default.log,registerHelper:function(e,t){if(r.toString.call(e)===p){if(t)throw new a.default("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(r.toString.call(e)===p)r.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(r.toString.call(e)===p){if(t)throw new a.default("Arg not supported with multiple decorators");r.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var f=c.default.log;t.log=f,t.createFrame=r.createFrame,t.logger=c.default},function(e,t){"use strict";function i(e){return d[e]}function n(e){for(var t=1;t<arguments.length;t++)for(var i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(e[i]=arguments[t][i]);return e}function s(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}function r(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return u.test(e)?e.replace(h,i):e}function a(e){return!e&&0!==e||!(!m(e)||0!==e.length)}function o(e){var t=n({},e);return t._parent=e,t}function l(e,t){return e.path=t,e}function c(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=n,t.indexOf=s,t.escapeExpression=r,t.isEmpty=a,t.createFrame=o,t.blockParams=l,t.appendContextPath=c;var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},h=/[&<>"'`=]/g,u=/[&<>"'`=]/,p=Object.prototype.toString;t.toString=p;var f=function(e){return"function"==typeof e};f(/x/)&&(t.isFunction=f=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)}),t.isFunction=f;var m=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===p.call(e)};t.isArray=m},function(e,t,i){"use strict";function n(e,t){var i=t&&t.loc,a=void 0,o=void 0;i&&(e+=" - "+(a=i.start.line)+":"+(o=i.start.column));for(var l=Error.prototype.constructor.call(this,e),c=0;c<r.length;c++)this[r[c]]=l[r[c]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{i&&(this.lineNumber=a,s?Object.defineProperty(this,"column",{value:o,enumerable:!0}):this.column=o)}catch(e){}}var s=i(7).default;t.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,t.default=n,e.exports=t.default},function(e,t,i){e.exports={default:i(8),__esModule:!0}},function(e,t,i){var n=i(9);e.exports=function(e,t,i){return n.setDesc(e,t,i)}},function(e){var t=Object;e.exports={create:t.create,getProto:t.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:t.getOwnPropertyDescriptor,setDesc:t.defineProperty,setDescs:t.defineProperties,getKeys:t.keys,getNames:t.getOwnPropertyNames,getSymbols:t.getOwnPropertySymbols,each:[].forEach}},function(e,t,i){"use strict";function n(e){r.default(e),a.default(e),o.default(e),l.default(e),c.default(e),d.default(e),h.default(e)}var s=i(1).default;t.__esModule=!0,t.registerDefaultHelpers=n;var r=s(i(11)),a=s(i(12)),o=s(i(13)),l=s(i(14)),c=s(i(15)),d=s(i(16)),h=s(i(17))},function(e,t,i){"use strict";t.__esModule=!0;var n=i(5);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,i){var s=i.inverse,r=i.fn;if(!0===t)return r(this);if(!1===t||null==t)return s(this);if(n.isArray(t))return t.length>0?(i.ids&&(i.ids=[i.name]),e.helpers.each(t,i)):s(this);if(i.data&&i.ids){var a=n.createFrame(i.data);a.contextPath=n.appendContextPath(i.data.contextPath,i.name),i={data:a}}return r(t,i)}))},e.exports=t.default},function(e,t,i){"use strict";var n=i(1).default;t.__esModule=!0;var s=i(5),r=n(i(6));t.default=function(e){e.registerHelper("each",(function(e,t){function i(t,i,r){c&&(c.key=t,c.index=i,c.first=0===i,c.last=!!r,d&&(c.contextPath=d+t)),l+=n(e[t],{data:c,blockParams:s.blockParams([e[t],t],[d+t,null])})}if(!t)throw new r.default("Must pass iterator to #each");var n=t.fn,a=t.inverse,o=0,l="",c=void 0,d=void 0;if(t.data&&t.ids&&(d=s.appendContextPath(t.data.contextPath,t.ids[0])+"."),s.isFunction(e)&&(e=e.call(this)),t.data&&(c=s.createFrame(t.data)),e&&"object"==typeof e)if(s.isArray(e))for(var h=e.length;o<h;o++)o in e&&i(o,o,o===e.length-1);else{var u=void 0;for(var p in e)e.hasOwnProperty(p)&&(void 0!==u&&i(u,o-1),u=p,o++);void 0!==u&&i(u,o-1,!0)}return 0===o&&(l=a(this)),l}))},e.exports=t.default},function(e,t,i){"use strict";var n=i(1).default;t.__esModule=!0;var s=n(i(6));t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new s.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0;var n=i(5);t.default=function(e){e.registerHelper("if",(function(e,t){return n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,i){return e.helpers.if.call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})}))},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],i=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var s=1;null!=i.hash.level?s=i.hash.level:i.data&&null!=i.data.level&&(s=i.data.level),t[0]=s,e.log.apply(e,t)}))},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t){return e&&e[t]}))},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0;var n=i(5);t.default=function(e){e.registerHelper("with",(function(e,t){n.isFunction(e)&&(e=e.call(this));var i=t.fn;if(n.isEmpty(e))return t.inverse(this);var s=t.data;return t.data&&t.ids&&((s=n.createFrame(t.data)).contextPath=n.appendContextPath(t.data.contextPath,t.ids[0])),i(e,{data:s,blockParams:n.blockParams([e],[s&&s.contextPath])})}))},e.exports=t.default},function(e,t,i){"use strict";function n(e){r.default(e)}var s=i(1).default;t.__esModule=!0,t.registerDefaultDecorators=n;var r=s(i(19))},function(e,t,i){"use strict";t.__esModule=!0;var n=i(5);t.default=function(e){e.registerDecorator("inline",(function(e,t,i,s){var r=e;return t.partials||(t.partials={},r=function(s,r){var a=i.partials;i.partials=n.extend({},a,t.partials);var o=e(s,r);return i.partials=a,o}),t.partials[s.args[0]]=s.fn,r}))},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0;var n=i(5),s={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(s.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=s.lookupLevel(e),"undefined"!=typeof console&&s.lookupLevel(s.level)<=e){var t=s.methodMap[e];console[t]||(t="log");for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];console[t].apply(console,n)}}};t.default=s,e.exports=t.default},function(e,t){"use strict";function i(e){this.string=e}t.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},t.default=i,e.exports=t.default},function(e,t,i){"use strict";function n(e){var t=e&&e[0]||1,i=g.COMPILER_REVISION;if(t!==i){if(t<i){var n=g.REVISION_CHANGES[i],s=g.REVISION_CHANGES[t];throw new m.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+s+").")}throw new m.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function s(e,t){function i(i,n,s){s.hash&&(n=f.extend({},n,s.hash),s.ids&&(s.ids[0]=!0)),i=t.VM.resolvePartial.call(this,i,n,s);var r=t.VM.invokePartial.call(this,i,n,s);if(null==r&&t.compile&&(s.partials[s.name]=t.compile(i,e.compilerOptions,t),r=s.partials[s.name](n,s)),null!=r){if(s.indent){for(var a=r.split("\n"),o=0,l=a.length;o<l&&(a[o]||o+1!==l);o++)a[o]=s.indent+a[o];r=a.join("\n")}return r}throw new m.default("The partial "+s.name+" could not be compiled when running in runtime-only mode")}function n(t){function i(t){return""+e.main(s,t,s.helpers,s.partials,a,l,o)}var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=r.data;n._setup(r),!r.partial&&e.useData&&(a=c(t,a));var o=void 0,l=e.useBlockParams?[]:void 0;return e.useDepths&&(o=r.depths?t!=r.depths[0]?[t].concat(r.depths):r.depths:[t]),(i=d(e.main,i,s,r.depths||[],a,l))(t,r)}if(!t)throw new m.default("No environment passed to template");if(!e||!e.main)throw new m.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var s={strict:function(e,t){if(!(t in e))throw new m.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var i=e.length,n=0;n<i;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:f.escapeExpression,invokePartial:i,fn:function(t){var i=e[t];return i.decorator=e[t+"_d"],i},programs:[],program:function(e,t,i,n,s){var a=this.programs[e],o=this.fn(e);return t||s||n||i?a=r(this,e,o,t,i,n,s):a||(a=this.programs[e]=r(this,e,o)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var i=e||t;return e&&t&&e!==t&&(i=f.extend({},t,e)),i},nullContext:h({}),noop:t.VM.noop,compilerInfo:e.compiler};return n.isTop=!0,n._setup=function(i){i.partial?(s.helpers=i.helpers,s.partials=i.partials,s.decorators=i.decorators):(s.helpers=s.merge(i.helpers,t.helpers),e.usePartial&&(s.partials=s.merge(i.partials,t.partials)),(e.usePartial||e.useDecorators)&&(s.decorators=s.merge(i.decorators,t.decorators)))},n._child=function(t,i,n,a){if(e.useBlockParams&&!n)throw new m.default("must pass block params");if(e.useDepths&&!a)throw new m.default("must pass parent depths");return r(s,t,e[t],i,0,n,a)},n}function r(e,t,i,n,s,r,a){function o(t){var s=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=a;return!a||t==a[0]||t===e.nullContext&&null===a[0]||(o=[t].concat(a)),i(e,t,e.helpers,e.partials,s.data||n,r&&[s.blockParams].concat(r),o)}return(o=d(i,o,e,a,n,r)).program=t,o.depth=a?a.length:0,o.blockParams=s||0,o}function a(e,t,i){return e?e.call||i.name||(i.name=e,e=i.partials[e]):e="@partial-block"===i.name?i.data["partial-block"]:i.partials[i.name],e}function o(e,t,i){var n=i.data&&i.data["partial-block"];i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var s=void 0;if(i.fn&&i.fn!==l&&function(){i.data=g.createFrame(i.data);var e=i.fn;s=i.data["partial-block"]=function(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return i.data=g.createFrame(i.data),i.data["partial-block"]=n,e(t,i)},e.partials&&(i.partials=f.extend({},i.partials,e.partials))}(),void 0===e&&s&&(e=s),void 0===e)throw new m.default("The partial "+i.name+" could not be found");if(e instanceof Function)return e(t,i)}function l(){return""}function c(e,t){return t&&"root"in t||((t=t?g.createFrame(t):{}).root=e),t}function d(e,t,i,n,s,r){if(e.decorator){var a={};t=e.decorator(t,a,i,n&&n[0],s,r,n),f.extend(t,a)}return t}var h=i(23).default,u=i(3).default,p=i(1).default;t.__esModule=!0,t.checkRevision=n,t.template=s,t.wrapProgram=r,t.resolvePartial=a,t.invokePartial=o,t.noop=l;var f=u(i(5)),m=p(i(6)),g=i(4)},function(e,t,i){e.exports={default:i(24),__esModule:!0}},function(e,t,i){i(25),e.exports=i(30).Object.seal},function(e,t,i){var n=i(26);i(27)("seal",(function(e){return function(t){return e&&n(t)?e(t):t}}))},function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){var n=i(28),s=i(30),r=i(33);e.exports=function(e,t){var i=(s.Object||{})[e]||Object[e],a={};a[e]=t(i),n(n.S+n.F*r((function(){i(1)})),"Object",a)}},function(e,t,i){var n=i(29),s=i(30),r=i(31),a="prototype",o=function(e,t,i){var l,c,d,h=e&o.F,u=e&o.G,p=e&o.S,f=e&o.P,m=e&o.B,g=e&o.W,v=u?s:s[t]||(s[t]={}),y=u?n:p?n[t]:(n[t]||{})[a];for(l in u&&(i=t),i)(c=!h&&y&&l in y)&&l in v||(d=c?y[l]:i[l],v[l]=u&&"function"!=typeof y[l]?i[l]:m&&c?r(d,n):g&&y[l]==d?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[a]=e[a],t}(d):f&&"function"==typeof d?r(Function.call,d):d,f&&((v[a]||(v[a]={}))[l]=d))};o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,e.exports=o},function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(e){var t=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=t)},function(e,t,i){var n=i(32);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,s){return e.call(t,i,n,s)}}return function(){return e.apply(t,arguments)}}},function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){(function(i){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==i?i:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t.default}).call(t,function(){return this}())},function(e,t){"use strict";t.__esModule=!0;var i={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!i.helpers.scopedId(e)&&!e.depth}}};t.default=i,e.exports=t.default},function(e,t,i){"use strict";function n(e,t){return"Program"===e.type?e:(a.default.yy=d,d.locInfo=function(e){return new d.SourceLocation(t&&t.srcName,e)},new o.default(t).accept(a.default.parse(e)))}var s=i(1).default,r=i(3).default;t.__esModule=!0,t.parse=n;var a=s(i(37)),o=s(i(38)),l=r(i(40)),c=i(5);t.parser=a.default;var d={};c.extend(d,l)},function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,i,n,s,r){var a=r.length-1;switch(s){case 1:return r[a-1];case 2:this.$=n.prepareProgram(r[a]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=r[a];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(r[a]),strip:n.stripFlags(r[a],r[a]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:r[a],value:r[a],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(r[a-2],r[a-1],r[a],this._$);break;case 12:this.$={path:r[a-3],params:r[a-2],hash:r[a-1]};break;case 13:this.$=n.prepareBlock(r[a-3],r[a-2],r[a-1],r[a],!1,this._$);break;case 14:this.$=n.prepareBlock(r[a-3],r[a-2],r[a-1],r[a],!0,this._$);break;case 15:this.$={open:r[a-5],path:r[a-4],params:r[a-3],hash:r[a-2],blockParams:r[a-1],strip:n.stripFlags(r[a-5],r[a])};break;case 16:case 17:this.$={path:r[a-4],params:r[a-3],hash:r[a-2],blockParams:r[a-1],strip:n.stripFlags(r[a-5],r[a])};break;case 18:this.$={strip:n.stripFlags(r[a-1],r[a-1]),program:r[a]};break;case 19:var o=n.prepareBlock(r[a-2],r[a-1],r[a],r[a],!1,this._$),l=n.prepareProgram([o],r[a-1].loc);l.chained=!0,this.$={strip:r[a-2].strip,program:l,chain:!0};break;case 21:this.$={path:r[a-1],strip:n.stripFlags(r[a-2],r[a])};break;case 22:case 23:this.$=n.prepareMustache(r[a-3],r[a-2],r[a-1],r[a-4],n.stripFlags(r[a-4],r[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:r[a-3],params:r[a-2],hash:r[a-1],indent:"",strip:n.stripFlags(r[a-4],r[a]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(r[a-2],r[a-1],r[a],this._$);break;case 26:this.$={path:r[a-3],params:r[a-2],hash:r[a-1],strip:n.stripFlags(r[a-4],r[a])};break;case 29:this.$={type:"SubExpression",path:r[a-3],params:r[a-2],hash:r[a-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:r[a],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(r[a-2]),value:r[a],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(r[a-1]);break;case 35:this.$={type:"StringLiteral",value:r[a],original:r[a],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(r[a]),original:Number(r[a]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===r[a],original:"true"===r[a],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 42:this.$=n.preparePath(!0,r[a],this._$);break;case 43:this.$=n.preparePath(!1,r[a],this._$);break;case 44:r[a-2].push({part:n.id(r[a]),original:r[a],separator:r[a-1]}),this.$=r[a-2];break;case 45:this.$=[{part:n.id(r[a]),original:r[a]}];break;case 46:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:r[a-1].push(r[a]);break;case 48:case 98:case 100:this.$=[r[a]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,
72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return"number"!=typeof(e=i.lexer.lex()||1)&&(e=i.symbols_[e]||e),e}var i=this,n=[0],s=[null],r=[],a=this.table,o="",l=0,c=0,d=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;r.push(h);var u=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,y,b,_,$,k={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null==p&&(p=t()),g=a[m]&&a[m][p]),void 0===g||!g.length||!g[0]){var w="";if(!d){for(y in $=[],a[m])this.terminals_[y]&&y>2&&$.push("'"+this.terminals_[y]+"'");w=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+$.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(w,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:$})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:n.push(p),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(g[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,o=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,d>0&&d--);break;case 2:if(b=this.productions_[g[1]][1],k.$=s[s.length-b],k._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},u&&(k._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),void 0!==(v=this.performAction.call(k,o,c,l,this.yy,g[1],s,r)))return v;b&&(n=n.slice(0,-1*b*2),s=s.slice(0,-1*b),r=r.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),s.push(k.$),r.push(k._$),_=a[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,i=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,i,n,s;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),a=0;a<r.length&&(!(i=this._input.match(this.rules[r[a]]))||t&&!(i[0].length>t[0].length)||(t=i,n=a,this.options.flex));a++);return t?((s=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,r[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,i){function n(e,i){return t.yytext=t.yytext.substr(e,t.yyleng-i)}switch(i){case 0:if("\\\\"===t.yytext.slice(-2)?(n(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(n(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(t.yytext=t.yytext.substr(5,t.yyleng-9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=n(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=n(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return e}();return t.lexer=i,e.prototype=t,t.Parser=e,new e}();t.default=i,e.exports=t.default},function(e,t,i){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function s(e,t,i){void 0===t&&(t=e.length);var n=e[t-1],s=e[t-2];return n?"ContentStatement"===n.type?(s||!i?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:i}function r(e,t,i){void 0===t&&(t=-1);var n=e[t+1],s=e[t+2];return n?"ContentStatement"===n.type?(s||!i?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:i}function a(e,t,i){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(i||!n.rightStripped)){var s=n.value;n.value=n.value.replace(i?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==s}}function o(e,t,i){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(i||!n.leftStripped)){var s=n.value;return n.value=n.value.replace(i?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==s,n.leftStripped}}var l=i(1).default;t.__esModule=!0;var c=l(i(39));n.prototype=new c.default,n.prototype.Program=function(e){var t=!this.options.ignoreStandalone,i=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,l=0,c=n.length;l<c;l++){var d=n[l],h=this.accept(d);if(h){var u=s(n,l,i),p=r(n,l,i),f=h.openStandalone&&u,m=h.closeStandalone&&p,g=h.inlineStandalone&&u&&p;h.close&&a(n,l,!0),h.open&&o(n,l,!0),t&&g&&(a(n,l),o(n,l)&&"PartialStatement"===d.type&&(d.indent=/([ \t]+$)/.exec(n[l-1].original)[1])),t&&f&&(a((d.program||d.inverse).body),o(n,l)),t&&m&&(a(n,l),o((d.inverse||d.program).body))}}return e},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,i=e.program&&e.inverse,n=i,l=i;if(i&&i.chained)for(n=i.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var c={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:r(t.body),closeStandalone:s((n||t).body)};if(e.openStrip.close&&a(t.body,null,!0),i){var d=e.inverseStrip;d.open&&o(t.body,null,!0),d.close&&a(n.body,null,!0),e.closeStrip.open&&o(l.body,null,!0),!this.options.ignoreStandalone&&s(t.body)&&r(n.body)&&(o(t.body),a(n.body))}else e.closeStrip.open&&o(t.body,null,!0);return c},n.prototype.Decorator=n.prototype.MustacheStatement=function(e){return e.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=n,e.exports=t.default},function(e,t,i){"use strict";function n(){this.parents=[]}function s(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function r(e){s.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function a(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}var o=i(1).default;t.__esModule=!0;var l=o(i(6));n.prototype={constructor:n,mutating:!1,acceptKey:function(e,t){var i=this.accept(e[t]);if(this.mutating){if(i&&!n.prototype[i.type])throw new l.default('Unexpected node type "'+i.type+'" found when accepting '+t+" on "+e.type);e[t]=i}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new l.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,i=e.length;t<i;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,i--)},accept:function(e){if(e){if(!this[e.type])throw new l.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:s,Decorator:s,BlockStatement:r,DecoratorBlock:r,PartialStatement:a,PartialBlockStatement:function(e){a.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:s,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=n,e.exports=t.default},function(e,t,i){"use strict";function n(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var i={loc:e.path.loc};throw new m.default(e.path.original+" doesn't match "+t,i)}}function s(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function r(e){return/^\[.*\]$/.test(e)?e.substr(1,e.length-2):e}function a(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}}function o(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function l(e,t,i){i=this.locInfo(i);for(var n=e?"@":"",s=[],r=0,a=0,o=t.length;a<o;a++){var l=t[a].part,c=t[a].original!==l;if(n+=(t[a].separator||"")+l,c||".."!==l&&"."!==l&&"this"!==l)s.push(l);else{if(s.length>0)throw new m.default("Invalid path: "+n,{loc:i});".."===l&&(r++,"../")}}return{type:"PathExpression",data:e,depth:r,parts:s,original:n,loc:i}}function c(e,t,i,n,s,r){var a=n.charAt(3)||n.charAt(2),o="{"!==a&&"&"!==a;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:e,params:t,hash:i,escaped:o,strip:s,loc:this.locInfo(r)}}function d(e,t,i,s){n(e,i);var r={type:"Program",body:t,strip:{},loc:s=this.locInfo(s)};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:r,openStrip:{},inverseStrip:{},closeStrip:{},loc:s}}function h(e,t,i,s,r,a){s&&s.path&&n(e,s);var o=/\*/.test(e.open);t.blockParams=e.blockParams;var l=void 0,c=void 0;if(i){if(o)throw new m.default("Unexpected inverse block on decorator",i);i.chain&&(i.program.body[0].closeStrip=s.strip),c=i.strip,l=i.program}return r&&(r=l,l=t,t=r),{type:o?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:l,openStrip:e.strip,inverseStrip:c,closeStrip:s&&s.strip,loc:this.locInfo(a)}}function u(e,t){if(!t&&e.length){var i=e[0].loc,n=e[e.length-1].loc;i&&n&&(t={source:i.source,start:{line:i.start.line,column:i.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:e,strip:{},loc:t}}function p(e,t,i,s){return n(e,i),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:i&&i.strip,loc:this.locInfo(s)}}var f=i(1).default;t.__esModule=!0,t.SourceLocation=s,t.id=r,t.stripFlags=a,t.stripComment=o,t.preparePath=l,t.prepareMustache=c,t.prepareRawBlock=d,t.prepareBlock=h,t.prepareProgram=u,t.preparePartialBlock=p;var m=f(i(6))},function(e,t,i){"use strict";function n(){}function s(e,t,i){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new c.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0),t.compat&&(t.useDepths=!0);var n=i.parse(e,t),s=(new i.Compiler).compile(n,t);return(new i.JavaScriptCompiler).compile(s,t)}function r(e,t,i){function n(){var n=i.parse(e,t),s=(new i.Compiler).compile(n,t),r=(new i.JavaScriptCompiler).compile(s,t,void 0,!0);return i.template(r)}function s(e,t){return r||(r=n()),r.call(this,e,t)}if(void 0===t&&(t={}),null==e||"string"!=typeof e&&"Program"!==e.type)throw new c.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var r=void 0;return s._setup=function(e){return r||(r=n()),r._setup(e)},s._child=function(e,t,i,s){return r||(r=n()),r._child(e,t,i,s)},s}function a(e,t){if(e===t)return!0;if(d.isArray(e)&&d.isArray(t)&&e.length===t.length){for(var i=0;i<e.length;i++)if(!a(e[i],t[i]))return!1;return!0}}function o(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}var l=i(1).default;t.__esModule=!0,t.Compiler=n,t.precompile=s,t.compile=r;var c=l(i(6)),d=i(5),h=l(i(35)),u=[].slice;n.prototype={compiler:n,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var i=0;i<t;i++){var n=this.opcodes[i],s=e.opcodes[i];if(n.opcode!==s.opcode||!a(n.args,s.args))return!1}t=this.children.length;for(i=0;i<t;i++)if(!this.children[i].equals(e.children[i]))return!1;return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[];var i=t.knownHelpers;if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},i)for(var n in i)n in i&&(t.knownHelpers[n]=i[n]);return this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),i=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[i]=t,this.useDepths=this.useDepths||t.useDepths,i},accept:function(e){if(!this[e.type])throw new c.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,i=t.length,n=0;n<i;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===i,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){o(e);var t=e.program,i=e.inverse;t=t&&this.compileProgram(t),i=i&&this.compileProgram(i);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,i):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,i),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),i=this.setupFullMustacheParams(e,t,void 0),n=e.path;this.useDecorators=!0,this.opcode("registerDecorator",i.length,n.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var i=e.params;if(i.length>1)throw new c.default("Unsupported number of partial arguments: "+i.length,e);i.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):i.push({type:"PathExpression",parts:[],depth:0}));var n=e.name.original,s="SubExpression"===e.name.type;s&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var r=e.indent||"";this.options.preventIndent&&r&&(this.opcode("appendContent",r),r=""),this.opcode("invokePartial",s,n,r),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){o(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,i){var n=e.path,s=n.parts[0],r=null!=t||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",i),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",s,r)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,i){var n=this.setupFullMustacheParams(e,t,i),s=e.path,r=s.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",n.length,r);else{if(this.options.knownHelpersOnly)throw new c.default("You specified knownHelpersOnly, but used the unknown helper "+r,e);s.strict=!0,s.falsy=!0,this.accept(s),this.opcode("invokeHelper",n.length,s.original,h.default.helpers.simpleId(s))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],i=h.default.helpers.scopedId(e),n=!e.depth&&!i&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,i):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,i=0,n=t.length;for(this.opcode("pushHash");i<n;i++)this.pushParam(t[i].value);for(;i--;)this.opcode("assignToHash",t[i].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:u.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=h.default.helpers.simpleId(e.path),i=t&&!!this.blockParamIndex(e.path.parts[0]),n=!i&&h.default.helpers.helperExpression(e),s=!i&&(n||t);if(s&&!n){var r=e.path.parts[0],a=this.options;a.knownHelpers[r]?n=!0:a.knownHelpersOnly&&(s=!1)}return n?"helper":s?"ambiguous":"simple"},pushParams:function(e){for(var t=0,i=e.length;t<i;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var i=void 0;if(!e.parts||h.default.helpers.scopedId(e)||e.depth||(i=this.blockParamIndex(e.parts[0])),i){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",i,n)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,i,n){var s=e.params;return this.pushParams(s),this.opcode("pushProgram",t),this.opcode("pushProgram",i),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),s},blockParamIndex:function(e){for(var t=0,i=this.options.blockParams.length;t<i;t++){var n=this.options.blockParams[t],s=n&&d.indexOf(n,e);if(n&&s>=0)return[t,s]}}}},function(e,t,i){"use strict";function n(e){this.value=e}function s(){}function r(e,t,i,n){var s=t.popStack(),r=0,a=i.length;for(e&&a--;r<a;r++)s=t.nameLookup(s,i[r],n);return e?[t.aliasable("container.strict"),"(",s,", ",t.quotedString(i[r]),")"]:s}var a=i(1).default;t.__esModule=!0;var o=i(4),l=a(i(6)),c=i(5),d=a(i(43));s.prototype={nameLookup:function(e,t){return s.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"[",JSON.stringify(t),"]"]},depthedLookup:function(e){return[this.aliasable("container.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=o.COMPILER_REVISION;return[e,o.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,i){return c.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:i?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,i,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!i,this.context=i||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var s=e.opcodes,r=void 0,a=void 0,o=void 0,c=void 0;for(o=0,c=s.length;o<c;o++)r=s[o],this.source.currentLocation=r.loc,a=a||r.loc,this[r.opcode].apply(this,r.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var d=this.createFunctionContext(n);if(this.isChild)return d;var h={compiler:this.compilerInfo(),main:d};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var u=this.context,p=u.programs,f=u.decorators;for(o=0,c=p.length;o<c;o++)p[o]&&(h[o]=p[o],f[o]&&(h[o+"_d"]=f[o],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),n?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),t.srcName?(h=h.toStringWithSourceMap({file:t.destName})).map=h.map&&h.map.toString():h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new d.default(this.options.srcName),this.decorators=new d.default(this.options.srcName)},createFunctionContext:function(e){var t="",i=this.stackVars.concat(this.registers.list);i.length>0&&(t+=", "+i.join(", "));var n=0;for(var s in this.aliases){var r=this.aliases[s];this.aliases.hasOwnProperty(s)&&r.children&&r.referenceCount>1&&(t+=", alias"+ ++n+"="+s,r.children[0]="alias"+n)}var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var o=this.mergeSource(t);return e?(a.push(o),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",o,"}"])},mergeSource:function(e){
var t=this.environment.isSimple,i=!this.forceBuffer,n=void 0,s=void 0,r=void 0,a=void 0;return this.source.each((function(e){e.appendToBuffer?(r?e.prepend("  + "):r=e,a=e):(r&&(s?r.prepend("buffer += "):n=!0,a.add(";"),r=a=void 0),s=!0,t||(i=!1))})),i?r?(r.prepend("return "),a.add(";")):s||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),r?(r.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),i=[this.contextName(0)];this.setupHelperArgs(e,0,i);var n=this.popStack();i.splice(1,0,n),this.push(this.source.functionCall(t,"call",i))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var i=this.topStack();t.splice(1,0,i),this.pushSource(["if (!",this.lastHelper,") { ",i," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack((function(e){return[" != null ? ",e,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,i,n){var s=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[s++])),this.resolvePath("context",e,s,t,i)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,i){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,i)},resolvePath:function(e,t,i,n,s){var a=this;if(this.options.strict||this.options.assumeObjects)this.push(r(this.options.strict&&s,this,t,e));else for(var o=t.length;i<o;i++)this.replaceStack((function(s){var r=a.nameLookup(s,t[i],e);return n?[" && ",r]:[" != null ? ",r," : ",s]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var i=this.nameLookup("decorators",t,"decorator"),n=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(i,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(e,t,i){var n=this.popStack(),s=this.setupHelper(e,t),r=i?[s.name," || "]:"",a=["("].concat(r,n);this.options.strict||a.push(" || ",this.aliasable("helpers.helperMissing")),a.push(")"),this.push(this.source.functionCall(a,"call",s.callParams))},invokeKnownHelper:function(e,t){var i=this.setupHelper(e,t);this.push(this.source.functionCall(i.name,"call",i.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var i=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),s=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",i,")"];this.options.strict||(s[0]="(helper = ",s.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",s,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,i){var n=[],s=this.setupParams(t,1,n);e&&(t=this.popStack(),delete s.name),i&&(s.indent=JSON.stringify(i)),s.helpers="helpers",s.partials="partials",s.decorators="container.decorators",e?n.unshift(t):n.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(s.depths="depths"),s=this.objectLiteral(s),n.push(s),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),i=void 0,n=void 0,s=void 0;this.trackIds&&(s=this.popStack()),this.stringParams&&(n=this.popStack(),i=this.popStack());var r=this.hash;i&&(r.contexts[e]=i),n&&(r.types[e]=n),s&&(r.ids[e]=s),r.values[e]=t},pushId:function(e,t,i){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(i?" + "+JSON.stringify("."+i):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:s,compileChildren:function(e,t){for(var i=e.children,n=void 0,s=void 0,r=0,a=i.length;r<a;r++){n=i[r],s=new this.compiler;var o=this.matchExistingProgram(n);if(null==o){this.context.programs.push("");var l=this.context.programs.length;n.index=l,n.name="program"+l,this.context.programs[l]=s.compile(n,t,this.context,!this.precompile),this.context.decorators[l]=s.decorators,this.context.environments[l]=n,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=o.index,n.name="program"+o.index,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams}},matchExistingProgram:function(e){for(var t=0,i=this.context.environments.length;t<i;t++){var n=this.context.environments[t];if(n&&n.equals(e))return n}},programExpression:function(e){var t=this.environment.children[e],i=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths"),"container.program("+i.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof n||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],i=void 0,s=void 0,r=void 0;if(!this.isInline())throw new l.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof n)t=["(",i=[a.value]],r=!0;else{s=!0;var o=this.incrStack();t=["((",this.push(o)," = ",a,")"],i=this.topStack()}var c=e.call(this,i);r||this.popStack(),s&&this.stackSlot--,this.push(t.concat(c,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,i=e.length;t<i;t++){var s=e[t];if(s instanceof n)this.compileStack.push(s);else{var r=this.incrStack();this.pushSource([r," = ",s,";"]),this.compileStack.push(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof n)return i.value;if(!t){if(!this.stackSlot)throw new l.default("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof n?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,i){var n=[];return{params:n,paramsInit:this.setupHelperArgs(t,e,n,i),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(e,t,i){var n={},s=[],r=[],a=[],o=!i,l=void 0;o&&(i=[]),n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var c=this.popStack(),d=this.popStack();(d||c)&&(n.fn=d||"container.noop",n.inverse=c||"container.noop");for(var h=t;h--;)l=this.popStack(),i[h]=l,this.trackIds&&(a[h]=this.popStack()),this.stringParams&&(r[h]=this.popStack(),s[h]=this.popStack());return o&&(n.args=this.source.generateArray(i)),this.trackIds&&(n.ids=this.source.generateArray(a)),this.stringParams&&(n.types=this.source.generateArray(r),n.contexts=this.source.generateArray(s)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,i,n){var s=this.setupParams(e,t,i);return s=this.objectLiteral(s),n?(this.useRegister("options"),i.push("options"),["options=",s]):i?(i.push(s),""):s}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=s.RESERVED_WORDS={},i=0,n=e.length;i<n;i++)t[e[i]]=!0}(),s.isValidJavaScriptVariableName=function(e){return!s.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=s,e.exports=t.default},function(e,t,i){"use strict";function n(e,t,i){if(r.isArray(e)){for(var n=[],s=0,a=e.length;s<a;s++)n.push(t.wrap(e[s],i));return n}return"boolean"==typeof e||"number"==typeof e?e+"":e}function s(e){this.srcFile=e,this.source=[]}t.__esModule=!0;var r=i(5),a=void 0;try{}catch(e){}a||((a=function(e,t,i,n){this.src="",n&&this.add(n)}).prototype={add:function(e){r.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){r.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),s.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each((function(t){e.add(["  ",t,"\n"])})),e},each:function(e){for(var t=0,i=this.source.length;t<i;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new a(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof a?e:(e=n(e,this,t),new a(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,i){return i=this.generateList(i),this.wrap([e,t?"."+t+"(":"(",i,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var i in e)if(e.hasOwnProperty(i)){var s=n(e[i],this);"undefined"!==s&&t.push([this.quotedString(i),":",s])}var r=this.generateList(t);return r.prepend("{"),r.add("}"),r},generateList:function(e){for(var t=this.empty(),i=0,s=e.length;i<s;i++)i&&t.add(","),t.add(n(e[i],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t.default=s,e.exports=t.default}])})),Market.DOMUtils.Bookmark=class{constructor(e){this.$widget=e,this.$collectionsList=this.$widget.find(".js-collections-list"),this.$form=this.$widget.find(".js-collection-form"),this.$formInput=this.$widget.find(".js-collection-form-input"),this.$formError=this.$widget.find(".js-collection-form-error"),this.templates={add:Handlebars.compile($("#template-bookmark-add").html()),remove:Handlebars.compile($("#template-bookmark-remove").html())},this.$widget.on("ajax:beforeSend",".js-bookmark-add",this.addBeforeSend.bind(this)),this.$widget.on("ajax:success",".js-bookmark-add",this.addSuccess.bind(this)),this.$widget.on("ajax:error",".js-bookmark-add",this.addError.bind(this)),this.$widget.on("ajax:beforeSend",".js-bookmark-remove",this.removeBeforeSend.bind(this)),this.$widget.on("ajax:success",".js-bookmark-remove",this.removeSuccess.bind(this)),this.$widget.on("ajax:error",".js-bookmark-remove",this.removeError.bind(this)),this.$widget.on("ajax:beforeSend",".js-collection-form",this.newBeforeSend.bind(this)),this.$widget.on("ajax:success",".js-collection-form",this.newSuccess.bind(this)),this.$widget.on("ajax:error",".js-collection-form",this.newError.bind(this))}addBeforeSend(e,t,i){this.render("updating",e.target)}addSuccess(e,t,i,n){this.render("remove",e.target,t)}addError(e,t,i,n){this.render("error",e.target,t)}removeBeforeSend(e,t,i){this.render("updating",e.target)}removeSuccess(e,t,i,n){this.render("add",e.target,t)}removeError(e,t,i,n){this.render("error",e.target,t)}newBeforeSend(e,t,i){this.$formError.addClass("is-hidden").html(""),this.render("updating",e.target)}newSuccess(e,t,i,n){!0===t.success?this.render("new",e.target,t):this.$formError.removeClass("is-hidden").html(t.errors)}newError(e,t,i,n){this.render("error",e.target,t)}triggerItemCollectedStatusChange(e){const t={item_id:e.item_id,is_collected:e.item_collected};$("[data-bind='item-collected-status:"+t.item_id+"']").trigger("itemCollectedStatus:change",t)}triggerNewCollectionAdded(){this.$collectionsList.hasClass("is-empty")?this.$collectionsList.removeClass("is-empty").html(this.html):this.$collectionsList.prepend(this.html),this.$form.trigger("collection:added")}render(e,t,i){switch(e){case"updating":$(t).addClass("is-updating");break;case"error":$(t).removeClass("is-updating").addClass("is-error");break;case"add":Market.Helpers.GoogleAnalytics.sendEvent("event","Item","click",{label:"collection: removed",value:i.item_id}),$(t).replaceWith(this.templates.add(i)),this.triggerItemCollectedStatusChange(i);break;case"remove":Market.Helpers.GoogleAnalytics.sendEvent("event","Item","click",{label:"collection: added",value:i.item_id}),$(t).replaceWith(this.templates.remove(i)),this.triggerItemCollectedStatusChange(i);break;case"new":Market.Helpers.GoogleAnalytics.sendEvent("event","Item","click",{label:"collection: created"}),i.new_collection=!0,this.html="<li>"+this.templates.remove(i)+"</li>",this.triggerNewCollectionAdded(this.html),this.triggerItemCollectedStatusChange(i)}}},Market.DOMUtils.CollectionWidget=class{constructor(e){this.$el=e,this.templates={active:Handlebars.compile($("#template-collection-active").html()),inactive:Handlebars.compile($("#template-collection-inactive").html())},this.$el.on("modalAjaxContent:added",this.modalContentAdded.bind(this)),this.$el.on("itemCollectedStatus:change",this.updateWidget.bind(this))}modalContentAdded(e,t){new Market.DOMUtils.Bookmark($(t)),Market.Helpers.GoogleAnalytics.sendEvent("event","Item Navigation","click;button",{label:"Add to Collection"})}updateWidget(e,t){this.$widget=this.$el.find("a"),this.active=this.$el.hasClass(this.activeClass),this.collected=t.is_collected,this.collected&&!this.active?this.$widget.replaceWith(this.templates.active(t)):this.collected||this.$widget.replaceWith(this.templates.inactive(t)),viewloader.execute(Views,this.$el)}},Market.DOMUtils.FavoriteWidget=class{constructor(e){this.$el=e,this.$widget=this.$el.find("a"),this.$removableItem=this.$el.closest(".js-favorite-widget__removable-item"),this.$noResultsMessage=$(".js-favorite-widget__no-results"),this.templates={add:Handlebars.compile($("#template-favorite-add").html()),remove:Handlebars.compile($("#template-favorite-remove").html())},this.$el.on("itemFavoritedStatus:change",this.updateWidget.bind(this)),this.$el.on("ajax:beforeSend",".js-favorite-add",this.addBeforeSend.bind(this)),this.$el.on("ajax:success",".js-favorite-add",this.addSuccess.bind(this)),this.$el.on("ajax:error",".js-favorite-add",this.addError.bind(this)),this.$el.on("ajax:beforeSend",".js-favorite-remove",this.removeBeforeSend.bind(this)),this.$el.on("ajax:success",".js-favorite-remove",this.removeSuccess.bind(this)),this.$el.on("ajax:error",".js-favorite-remove",this.removeError.bind(this))}addBeforeSend(e,t,i){this.render("updating",e.target)}addSuccess(e,t,i,n){this.render("remove",e.target,t)}addError(e,t,i,n){this.render("error",e.target,t)}removeBeforeSend(e,t,i){this.render("updating",e.target),this.$removableItem.addClass("is-hidden"),this.showEmptyMessageIfEmpty()}removeSuccess(e,t,i,n){this.render("add",e.target,t),this.$removableItem.remove()}removeError(e,t,i,n){this.render("error",e.target,t),this.$removableItem.removeClass("is-hidden")}showEmptyMessageIfEmpty(){0===$(".js-favorite-widget__removable-item:not(.is-hidden)").length&&this.$noResultsMessage.removeClass("is-hidden")}hideEmptyMessage(){this.$noResultsMessage.addClass("is-hidden")}render(e,t,i){switch(e){case"updating":$(t).addClass("is-updating");break;case"error":$(t).removeClass("is-updating").addClass("is-error");break;case"add":$(t).replaceWith(this.templates.add(i)),Market.Helpers.GoogleAnalytics.sendEvent("event","Item Navigation","click;button",{label:"Favorites:removed",value:i.item_id});break;case"remove":$(t).replaceWith(this.templates.remove(i)),Market.Helpers.GoogleAnalytics.sendEvent("event","Item Navigation","click;button",{label:"Favorites:added",value:i.item_id})}}updateWidget(e,t){t.is_favorited?this.$widget.replaceWith(this.templates.remove(t)):this.$widget.replaceWith(this.templates.add(t))}},Views.BookmarkStatesLoader=class{constructor(e){if(this.$el=e,Market.DOMUtils.isUserSignedIn()){const e=[];this.$el.find(".js-collection-widget").each((function(t,i){this.$item=$(i),this.$item.addClass("is-initialized"),new Market.DOMUtils.CollectionWidget(this.$item),e.push(this.$item.data("item-id"))})),this.$el.find(".js-favorite-widget").each((function(t,i){this.$item=$(i),this.$item.addClass("is-initialized"),new Market.DOMUtils.FavoriteWidget(this.$item),e.push(this.$item.data("item-id"))})),this.fetchData(_.uniq(e)),$(document).on("uiCartUpdateRequest",this.handleCartUpdate.bind(this))}}fetchData(e){e.length&&$.getJSON("/bookmarks/states",{"item_ids[]":e}).done((e=>this.initBookmarkStates(e)))}initBookmarkStates(e){for(const t of e)$("[data-bind='item-collected-status:"+t.item_id+"']").trigger("itemCollectedStatus:change",t),$("[data-bind='item-favorited-status:"+t.item_id+"']").trigger("itemFavoritedStatus:change",t),$("[data-bind='item-cart-status:"+t.item_id+"']").toggleClass("is-active",t.is_in_cart);this.autoLaunchModal()}handleCartUpdate(e,t){$("[data-bind='item-cart-status:"+t.item_id+"']").addClass("is-active")}autoLaunchModal(){this.uri=new URL(window.location),this.uriItemId=this.uri.searchParams.get("open_collect_for_item_id"),_.isUndefined(this.uriItemId)||(this.$uriItem=this.$el.find(".js-collection-widget[data-item-id='"+this.uriItemId+"'] a"),this.$uriItem.click())}},Views.CarouselList=class{constructor(e){this.$el=e,this.dom=this.getDomReferences(),this.carouselSettings=this.getInitialSettings(this.$el.data("settings")),this.carouselListWidth=this.getTotalWidth(this.dom.$salesBadges),this.setupCarousel()}addEventListeners(){this.$el.on({"mouseover.carousel":this.scrollCarousel.bind(this),"mouseout.carousel":this.stopCarousel.bind(this)},".js-carousel__nav--left, .js-carousel__nav--right");const e=_.throttle(this.updateScrollArrows.bind(this),100);return this.dom.$carouselInner.on("scroll",e)}getDomReferences(){const e=this.$el.find(".js-carousel__inner"),t=e.find("ul"),i=t.children("li").not(".js-community-badges__category-text");return{$carouselInner:e,$carouselScrollDirectionLeft:this.$el.find(".js-carousel__nav--left"),$carouselScrollDirectionRight:this.$el.find(".js-carousel__nav--right"),$carouselList:t,$salesBadges:i,$badgeCategoryText:t.find(".js-community-badges__category-text"),$currentBadge:i.filter(".is-current")}}getElementCenterPosition(e,t,i){return e+t/2-i/2}getInitialSettings(e){e=e||{};const t={showArrows:!1,scrollToCurrent:!1,showNextBadgeProgress:!1};return $.extend({},t,e)}getTotalWidth(e){if(!e||!e.length)return!1;const t=Array.from(e).map((e=>$(e).outerWidth(!0)));return _.reduce(t,((e,t)=>e+t))}setupCarousel(){this.dom.$carouselList.width(this.carouselListWidth),this.carouselSettings.showArrows&&this.$el.addClass("has-arrows"),this.carouselSettings.scrollToCurrent&&this.scrollCarouselTo(this.dom.$currentBadge),this.carouselSettings.showNextBadgeProgress&&this.$el.find(".js-community-badges__progress-overlay").removeClass("is-staged");const e=this.carouselListWidth>this.dom.$carouselInner.width();this.dom.$badgeCategoryText.length&&this.positionBadgeCategoryText(),this.updateScrollArrows(),e?Modernizr.touch||this.addEventListeners():this.dom.$carouselScrollDirectionLeft.add(this.dom.$carouselScrollDirectionRight).addClass("is-invisible")}scrollCarousel(e){$(e.currentTarget).hasClass("js-carousel__nav--left")?this.dom.$carouselInner.animate({scrollLeft:`-=${this.carouselListWidth}`},2e3,"swing"):this.dom.$carouselInner.animate({scrollLeft:`+=${this.carouselListWidth}`},2e3,"swing")}scrollCarouselTo(e){if(e.length){const t=this.getElementCenterPosition(e.position().left,e.outerWidth(!0),this.dom.$carouselInner.width());this.dom.$carouselInner.scrollLeft(t)}}stopCarousel(){this.dom.$carouselInner.stop(),this.updateScrollArrows()}updateScrollArrows(){0===this.dom.$carouselInner.scrollLeft()?(this.dom.$carouselScrollDirectionLeft.addClass("is-invisible"),this.dom.$carouselScrollDirectionRight.removeClass("is-invisible")):this.dom.$carouselInner.scrollLeft()+this.dom.$carouselInner.width()>=this.carouselListWidth?(this.dom.$carouselScrollDirectionLeft.removeClass("is-invisible"),this.dom.$carouselScrollDirectionRight.addClass("is-invisible")):(this.dom.$carouselScrollDirectionLeft.removeClass("is-invisible"),this.dom.$carouselScrollDirectionRight.removeClass("is-invisible"))}positionBadgeCategoryText(){const e=e=>{const t=e.data("category"),i=this.dom.$salesBadges.filter(`[data-category='${t}']`),n=i.first().position().left,s=this.getTotalWidth(i)-15;e.css("left",`${n}px`),e.width(s)};Array.from(this.dom.$badgeCategoryText).forEach((t=>e($(t))))}},Market.GoogleAnalytics.CartPage=class{static init(){return this._instance||(this._instance=new this)}constructor(){$(document).on({"googleAnalytics:cartEmpty":this.handleCartEmpty.bind(this),"googleAnalytics:cartEmptyClick":this.handleCartEmptyClick.bind(this),"googleAnalytics:cartRemoveEntry":this.handleCartRemoveEntry.bind(this),"googleAnalytics:cartRemoveEntryClick":this.handleCartRemoveEntryClick.bind(this),"googleAnalytics:cartSupportUpgrade":this.handleCartSupportUpgrade.bind(this),"googleAnalytics:cartContinueShopping":this.handleCartContinueShopping.bind(this),"googleAnalytics:cartCheckout":this.handleCartCheckout.bind(this),"googleAnalytics:breadcrumbHomeClick":this.handleBreadcrumbHomeClick.bind(this),"googleAnalytics:showHandlingFee":this.handleShowHandlingFee.bind(this),"googleAnalytics:hideHandlingFee":this.handleHideHandlingFee.bind(this)})}handleCartEmpty(e,t){this._addProducts(t.payload),this._setAction("remove"),this._send("Empty cart")}handleCartEmptyClick(e){Market.Helpers.GoogleAnalytics.sendEvent("event","Shopping Cart","click;button",{label:"Empty Cart"})}handleCartRemoveEntry(e,t){this._addProducts(t.payload),this._setAction("remove"),this._send("Remove from cart")}handleCartRemoveEntryClick(e,{itemId:t}){Market.Helpers.GoogleAnalytics.sendEvent("event","Shopping Cart","click;button",{label:`Delete Item : ${t}`})}handleCartSupportUpgrade(e,t){this._addProducts(t.payload),this._setAction("add"),this._send("Cart support upgrade")}handleCartContinueShopping(e,t){Market.Helpers.GoogleAnalytics.sendEvent("event","Shopping Cart","click;button",{label:`Continue Shopping : ${t}`})}handleCartCheckout(e,t){Market.Helpers.GoogleAnalytics.sendEvent("event","Shopping Cart","click;button",{label:`Secure Checkout : ${t}`})}handleBreadcrumbHomeClick(e){Market.Helpers.GoogleAnalytics.sendEvent("event","Breadcrumbs","click;link",{label:"Home"})}handleShowHandlingFee(e,t){Market.Helpers.GoogleAnalytics.sendEvent("event","HandlingFee",`click;${t}`)}handleHideHandlingFee(e,{placement:t,label:i}){Market.Helpers.GoogleAnalytics.sendEvent("event","HandlingFee",`close;${t}`,{label:i})}_addProducts(e){Market.Helpers.GoogleAnalytics.addProducts(e)}_setAction(e,t){Market.Helpers.GoogleAnalytics.setAction(e,t)}_send(e){Market.Helpers.GoogleAnalytics.sendEvent("event","Ecommerce","click",{label:e})}},Market.GoogleAnalytics.SearchPage=class{static init(){return this._instance||(this._instance=new this)}constructor(){$(document).on({"googleAnalytics:cartSupportUpgrade":this.handleCartSupportUpgrade.bind(this)})}handleCartSupportUpgrade(e,t){this._addProducts(t.payload),this._setAction("add"),this._send("Search support upgrade")}_addProducts(e){Market.Helpers.GoogleAnalytics.addProducts(e)}_setAction(e,t){Market.Helpers.GoogleAnalytics.setAction(e,t)}_send(e){Market.Helpers.GoogleAnalytics.sendEvent("event","Ecommerce","click",{label:e})}},Views.CartSupportUpgrade=class{constructor(e){Market.GoogleAnalytics.SearchPage.init();const t=e.data();this.googleAnalyticsPayload=t.googleAnalyticsPayload,this.settings={entryId:t.entryId,urlPath:t.path,index:t.index},this.dom={$form:e,$upgrade:e.find(".js-support-upgrade"),$itemPrice:e.parent().find(".js-item-upgrade__item-price"),$itemVariantPrice:$(".js-cart-variant__output-price"),$cartOriginalPrice:$(".js-item-upgrade__item-original-price"),$cartPageOriginalPrice:e.parent().find(".js-cart-page-item-upgrade__item-original-price"),$cartTotal:$(".js-item-upgrade__cart-total"),$cartCheckout:$(".js-cart__checkout"),$variantSupport:$(".js-cart-variant__output-support"),$discountEnabled:e.find(".js-support-upgrade").data("discount-enabled"),$discountOriginalPrice:e.find(".js-support-upgrade").data("discount-original-price"),$discountPrice:e.find(".js-support-upgrade").data("discount-price"),$discountPriceWrapper:$(".js-cart-variant__output-discount-price"),$discountUpgradePrice:e.find(".js-support-upgrade").data("discount-upgrade-price"),$discountUpgradeOriginalPrice:e.find(".js-support-upgrade").data("discount-upgrade-original-price")},this.dom.$upgrade.on("change",this.handleFormSubmit.bind(this))}handleFormSubmit(){this.dom.$upgrade.prop("disabled",!0);const e=this._getSupportValue();this._trackSupportValueChange(),$.ajax({method:"PUT",url:this.settings.urlPath,data:{support:e,entry_id:this.settings.entryId},error:()=>{this.dom.$form.attr("data-upgrade-error",!0)},success:t=>{this.dom.$form.attr("data-upgrade-error",!1),this.dom.$upgrade.prop("disabled",!1),this._updatePrices(t),this._updateSupportPeriod(t),this._updateCartPath(t.cart_identifier),this._triggerUpgradeAnalytics(e),this._updateCheckoutPayload(t.checkout_payload)}})}_updatePrices(e){this.dom.$itemPrice.text(e.item_price),this.dom.$itemVariantPrice.text(e.item_price),this.dom.$cartTotal.text(e.cart_total),this._updateDiscountablePrices()}_updateDiscountablePrices(){this.dom.$discountEnabled&&this.dom.$discountPrice&&(this.dom.$upgrade.prop("checked")?(this.dom.$itemVariantPrice.text(this.dom.$discountUpgradeOriginalPrice),this.dom.$cartOriginalPrice.text(this.dom.$discountUpgradeOriginalPrice),this.dom.$discountPriceWrapper.text(this.dom.$discountUpgradePrice),this.dom.$cartPageOriginalPrice.text(this.dom.$discountUpgradeOriginalPrice)):(this.dom.$itemVariantPrice.text(this.dom.$discountOriginalPrice),this.dom.$cartOriginalPrice.text(this.dom.$discountOriginalPrice),this.dom.$discountPriceWrapper.text(this.dom.$discountPrice),this.dom.$cartPageOriginalPrice.text(this.dom.$discountOriginalPrice)))}_updateSupportPeriod(e){this.dom.$variantSupport.text(e.support_period)}_updateCartPath(e){if(this.dom.$cartCheckout.length){const t=this.dom.$cartCheckout.attr("action").replace(/\d+/,e);this.dom.$cartCheckout.attr("action",t)}}_updateCheckoutPayload(e){this.dom.$cartCheckout.attr("data-google-analytics-payload",JSON.stringify(e))}_getSupportValue(){return this.dom.$upgrade.prop("checked")?"bundle_12month":"bundle_6month"}_triggerUpgradeAnalytics(e){this.googleAnalyticsPayload.productsArray[0].dimension14=e,$(document).trigger("googleAnalytics:cartSupportUpgrade",{payload:this.googleAnalyticsPayload})}_trackSupportValueChange(){const e=this.dom.$upgrade.prop("checked")?"Extend Support":"Remove Extend Support";$(document).trigger("googleAnalytics:itemAddToCartModalSupportOption",{label:e})}},Views.ConfirmEditCart=class{constructor(e){this.dom={$form:e,$saveSelection:e.find(".js-confirm_edit__save-selection")},this.dom.$form.on({"ajax:beforeSend":this.handleBeforeSend.bind(this),"ajax:success":this.handleSuccess.bind(this),"ajax:error":this.handleError.bind(this)}),this.dom.$saveSelection.on("click",this.handleSaveSelection.bind(this))}handleSaveSelection(e){return e.preventDefault(),this.databaseReadOnly=!1,$.ajax({url:"/_healthcheck/database",async:!1,success:e=>{"read-only"===e.write.value&&(this.databaseReadOnly=!0)}}),this.databaseReadOnly?(alert("This functionality is disabled while maintenance is being performed. Try submitting again in a few minutes."),!1):this._submitWithAjax(this.dom.$saveSelection)}handleBeforeSend(){Market.DOMUtils.getModalInstance().init()}handleError(){Market.DOMUtils.getModalInstance().error()}handleSuccess(e,t){const i=null!=t.html?t.html:t;Market.DOMUtils.getModalInstance().show(i,!1)}_submitWithAjax(e){return this.dom.$form.data("ujs:submit-button",{name:e.attr("name"),value:e.val()}),$.rails.handleRemote(this.dom.$form)}},Views.CreditCardList=class{constructor(e){this.$el=e,this.dom={$selectCard:this.$el.find(".js-credit-card-list__select"),$addCard:this.$el.find(".js-credit-card-list__add-new"),$deleteCard:this.$el.find(".js-credit-card-list__delete"),$deleteAlert:this.$el.find(".js-credit-card-list__delete-alert"),$deleteConfirm:this.$el.find(".js-credit-card-list__delete-confirm"),$deleteDecline:this.$el.find(".js-credit-card-list__delete-decline")},this.selector={listItem:".js-credit-card-list__card",selectedCardField:".js-credit-card-list__card-id",deleteOverlay:".js-credit-card-list__delete-alert"},this.dom.$selectCard.on("click",this.handleSelectCard.bind(this)),this.dom.$addCard.on("click",this.handleNewCard.bind(this)),this.dom.$deleteCard.on("click",this.handleDeleteCard.bind(this)),this.dom.$deleteDecline.on("click",this.handleDeleteDecline.bind(this)),this.dom.$deleteConfirm.on({"ajax:beforeSend":this.handleDeleteBeforeSend.bind(this),"ajax:success":this.handleDeleteSuccess.bind(this),"ajax:error":this.handleDeleteError.bind(this)}),this.dom.$selectCard.first().click()}handleSelectCard(e){e.preventDefault(),this._hideForm(),this._clearSelectIndicator(),$(this.selector.selectedCardField).val($(e.currentTarget).data("card-id")),$(e.currentTarget).closest(this.selector.listItem).addClass("is-selected")}handleNewCard(e){e.preventDefault(),this._clearSelectIndicator(),this._showForm(),$(this.selector.selectedCardField).val("")}handleDeleteCard(e){e.preventDefault();$(e.currentTarget).closest(this.selector.listItem).find(this.selector.deleteOverlay).attr("data-show-delete-overlay",!0)}handleDeleteDecline(e){e.preventDefault(),this._hideDeleteOverlay()}handleDeleteBeforeSend(e){this._hideDeleteOverlay(),$(e.currentTarget).closest(this.selector.listItem).addClass("is-hidden")}handleDeleteSuccess(e,t){$(e.currentTarget).closest(this.selector.listItem).remove(),0===$(this.selector.listItem).size()&&this._showForm()}handleDeleteError(e){const t=$(e.currentTarget).closest(this.selector.listItem)
;t.find(this.selector.deleteOverlay).attr("data-show-delete-overlay",!0),t.removeClass("is-hidden")}_hideDeleteOverlay(){this.dom.$deleteAlert.attr("data-show-delete-overlay",!1)}_showForm(){this.$el.attr("data-show-form",!0)}_hideForm(){this.$el.attr("data-show-form",!1)}_clearSelectIndicator(){$(this.selector.listItem).removeClass("is-selected")}},Market.DOMUtils.FlashPreview=function(e){const t=this;return t.config=e,t.previewTypes={flash:function(e){const t={},i={base:e.base,wmode:"opaque"},n={};swfobject.embedSWF(e.preview_url,"large_item_preview_container","590","300","9.0.0","/swfobject/expressInstall.swf",t,i,n)}},t.client_has_flash=function(){if(swfobject.hasFlashPlayerVersion("8.0.0"))return!0;{const e=$("<h4>Loading Item Preview...</h4>"),t=$("<p>If you are reading this message you may not have Adobe Flash installed or you are required to upgrade your Flash player.</p>"),i=$('<p>You can download a copy of Adobe Flash from <a href="https://get.adobe.com/flashplayer/">here</a></p>');return $("#large_item_preview_container").append(e).append(t).append(i),!1}},t.initialize=function(){t.hasFlash=t.client_has_flash(),void 0===t.previewTypes[t.config.type]&&(t.config.type="unknown")},t.display=function(){t.hasFlash||$(document.documentElement).addClass("no-flash");const e=t.previewTypes[t.config.type];void 0!==e?e(t.config):alert("Item preview type not defined.")},t.initialize(),t},Views.FlashPreview=class{constructor(e){const t=e.data("props");new Market.DOMUtils.FlashPreview(t).display()}},Views.FollowButton=class{constructor(e){this.$el=e,this.props=this.$el.data("props"),this.dom={$buttons:this.$el.find("button")},this.state={loading:!1,following:this.props.following},this.$el.on({"ajax:beforeSend":this.renderButtonDisability.bind(this),"ajax:success":this.handleAjaxSuccess.bind(this),"ajax:error":this.renderButtonDisability.bind(this)})}handleAjaxSuccess(e,t){this.renderButtonDisability(),this.state.following=t.following;const i=this.state.following?this.props.routes.follow:this.props.routes.unfollow;this.renderButtonUpdate(),this.props.selectors.count&&this.renderCount(t.follower_count,t.follower_label),Market.Helpers.GoogleAnalytics.sendEvent("event","Content","click",{label:`Follow: ${i}`})}renderCount(e,t){$(this.props.selectors.count).html(e),$(this.props.selectors.label).html(t)}renderButtonDisability(){this.state.loading=!this.state.loading,this.dom.$buttons.prop("disabled",this.state.loading),this.$el.toggleClass("is-waiting")}renderButtonUpdate(){this.state.following?this.$el.attr("action",this.props.routes.unfollow).addClass("is-following"):this.$el.attr("action",this.props.routes.follow).removeClass("is-following")}},function(e,t,i,n){var s=i("html"),r=i(e),a=i(t),o=i.fancybox=function(){o.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,d=t.createTouch!==n,h=function(e){return e&&e.hasOwnProperty&&e instanceof i},u=function(e){return e&&"string"===i.type(e)},p=function(e){return u(e)&&0<e.indexOf("%")},f=function(e,t){var i=parseInt(e,10)||0;return t&&p(e)&&(i*=o.getViewport()[t]/100),Math.ceil(i)},m=function(e,t){return f(e,t)+"px"};i.extend(o,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!d,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){if(e&&(i.isPlainObject(t)||(t={}),!1!==o.close(!0)))return i.isArray(e)||(e=h(e)?i(e).get():[e]),i.each(e,(function(s,r){var a,l,c,d,p,f={};"object"===i.type(r)&&(r.nodeType&&(r=i(r)),h(r)?(f={href:r.data("fancybox-href")||r.attr("href"),title:r.data("fancybox-title")||r.attr("title"),isDom:!0,element:r},i.metadata&&i.extend(!0,f,r.metadata())):f=r),a=t.href||f.href||(u(r)?r:null),l=t.title!==n?t.title:f.title||"",!(d=(c=t.content||f.content)?"html":t.type||f.type)&&f.isDom&&((d=r.data("fancybox-type"))||(d=(d=r.prop("class").match(/fancybox\.(\w+)/))?d[1]:null)),u(a)&&(d||(o.isImage(a)?d="image":o.isSWF(a)?d="swf":"#"===a.charAt(0)?d="inline":u(r)&&(d="html",c=r)),"ajax"===d&&(p=a.split(/\s+/,2),a=p.shift(),p=p.shift())),c||("inline"===d?a?c=i(u(a)?a.replace(/.*(?=#[^\s]+$)/,""):a):f.isDom&&(c=r):"html"===d?c=a:!d&&!a&&f.isDom&&(d="inline",c=r)),i.extend(f,{href:a,type:d,content:c,title:l,selector:p}),e[s]=f})),o.opts=i.extend(!0,{},o.defaults,t),t.keys!==n&&(o.opts.keys=!!t.keys&&i.extend({},o.defaults.keys,t.keys)),o.group=e,o._start(o.opts.index)},cancel:function(){var e=o.coming;e&&!1!==o.trigger("onCancel")&&(o.hideLoading(),o.ajaxLoad&&o.ajaxLoad.abort(),o.ajaxLoad=null,o.imgPreload&&(o.imgPreload.onload=o.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),o.coming=null,o.current||o._afterZoomOut(e))},close:function(e){o.cancel(),!1!==o.trigger("beforeClose")&&(o.unbindEvents(),o.isActive&&(o.isOpen&&!0!==e?(o.isOpen=o.isOpened=!1,o.isClosing=!0,i(".fancybox-item, .fancybox-nav").remove(),o.wrap.stop(!0,!0).removeClass("fancybox-opened"),o.transitions[o.current.closeMethod]()):(i(".fancybox-wrap").stop(!0).trigger("onReset").remove(),o._afterZoomOut())))},play:function(e){var t=function(){clearTimeout(o.player.timer)},i=function(){t(),o.current&&o.player.isActive&&(o.player.timer=setTimeout(o.next,o.current.playSpeed))},n=function(){t(),a.unbind(".player"),o.player.isActive=!1,o.trigger("onPlayEnd")};!0===e||!o.player.isActive&&!1!==e?o.current&&(o.current.loop||o.current.index<o.group.length-1)&&(o.player.isActive=!0,a.bind({"onCancel.player beforeClose.player":n,"onUpdate.player":i,"beforeLoad.player":t}),i(),o.trigger("onPlayStart")):n()},next:function(e){var t=o.current;t&&(u(e)||(e=t.direction.next),o.jumpto(t.index+1,e,"next"))},prev:function(e){var t=o.current;t&&(u(e)||(e=t.direction.prev),o.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,i){var s=o.current;s&&(e=f(e),o.direction=t||s.direction[e>=s.index?"next":"prev"],o.router=i||"jumpto",s.loop&&(0>e&&(e=s.group.length+e%s.group.length),e%=s.group.length),s.group[e]!==n&&(o.cancel(),o._start(e)))},reposition:function(e,t){var n,s=o.current,r=s?s.wrap:null;r&&(n=o._getPosition(t),e&&"scroll"===e.type?(delete n.position,r.stop(!0,!0).animate(n,200)):(r.css(n),s.pos=i.extend({},s.dim,n)))},update:function(e){var t=e&&e.type,i=!t||"orientationchange"===t;i&&(clearTimeout(c),c=null),o.isOpen&&!c&&(c=setTimeout((function(){var n=o.current;n&&!o.isClosing&&(o.wrap.removeClass("fancybox-tmp"),(i||"load"===t||"resize"===t&&n.autoResize)&&o._setDimension(),"scroll"===t&&n.canShrink||o.reposition(e),o.trigger("onUpdate"),c=null)}),i&&!d?0:300))},toggle:function(e){o.isOpen&&(o.current.fitToView="boolean"===i.type(e)?e:!o.current.fitToView,d&&(o.wrap.removeAttr("style").addClass("fancybox-tmp"),o.trigger("onUpdate")),o.update())},hideLoading:function(){a.unbind(".loading"),i("#fancybox-loading").remove()},showLoading:function(){var e,t;o.hideLoading(),e=i('<div id="fancybox-loading"><div></div></div>').click(o.cancel).appendTo("body"),a.bind("keydown.loading",(function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),o.cancel())})),o.defaults.fixed||(t=o.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x}))},getViewport:function(){var t=o.current&&o.current.locked||!1,i={x:r.scrollLeft(),y:r.scrollTop()};return t?(i.w=t[0].clientWidth,i.h=t[0].clientHeight):(i.w=d&&e.innerWidth?e.innerWidth:r.width(),i.h=d&&e.innerHeight?e.innerHeight:r.height()),i},unbindEvents:function(){o.wrap&&h(o.wrap)&&o.wrap.unbind(".fb"),a.unbind(".fb"),r.unbind(".fb")},bindEvents:function(){var e,t=o.current;t&&(r.bind("orientationchange.fb"+(d?"":" resize.fb")+(t.autoCenter&&!t.locked?" scroll.fb":""),o.update),(e=t.keys)&&a.bind("keydown.fb",(function(s){var r=s.which||s.keyCode,a=s.target||s.srcElement;if(27===r&&o.coming)return!1;!s.ctrlKey&&!s.altKey&&!s.shiftKey&&!s.metaKey&&(!a||!a.type&&!i(a).is("[contenteditable]"))&&i.each(e,(function(e,a){return 1<t.group.length&&a[r]!==n?(o[e](a[r]),s.preventDefault(),!1):-1<i.inArray(r,a)?(o[e](),s.preventDefault(),!1):void 0}))})),i.fn.mousewheel&&t.mouseWheel&&o.wrap.bind("mousewheel.fb",(function(e,n,s,r){for(var a=i(e.target||null),l=!1;a.length&&!l&&!a.is(".fancybox-skin")&&!a.is(".fancybox-wrap");)l=a[0]&&!(a[0].style.overflow&&"hidden"===a[0].style.overflow)&&(a[0].clientWidth&&a[0].scrollWidth>a[0].clientWidth||a[0].clientHeight&&a[0].scrollHeight>a[0].clientHeight),a=i(a).parent();0!==n&&!l&&1<o.group.length&&!t.canShrink&&(0<r||0<s?o.prev(0<r?"down":"left"):(0>r||0>s)&&o.next(0>r?"up":"right"),e.preventDefault())})))},trigger:function(e,t){var n,s=t||o.coming||o.current;if(s){if(i.isFunction(s[e])&&(n=s[e].apply(s,Array.prototype.slice.call(arguments,1))),!1===n)return!1;s.helpers&&i.each(s.helpers,(function(t,n){n&&o.helpers[t]&&i.isFunction(o.helpers[t][e])&&o.helpers[t][e](i.extend(!0,{},o.helpers[t].defaults,n),s)})),a.trigger(e)}},isImage:function(e){return u(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return u(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t,n,s={};if(e=f(e),!(t=o.group[e]||null))return!1;if(t=(s=i.extend(!0,{},o.opts,t)).margin,n=s.padding,"number"===i.type(t)&&(s.margin=[t,t,t,t]),"number"===i.type(n)&&(s.padding=[n,n,n,n]),s.modal&&i.extend(!0,s,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),s.autoSize&&(s.autoWidth=s.autoHeight=!0),"auto"===s.width&&(s.autoWidth=!0),"auto"===s.height&&(s.autoHeight=!0),s.group=o.group,s.index=e,o.coming=s,!1===o.trigger("beforeLoad"))o.coming=null;else{if(n=s.type,t=s.href,!n)return o.coming=null,!(!o.current||!o.router||"jumpto"===o.router)&&(o.current.index=e,o[o.router](o.direction));if(o.isActive=!0,"image"!==n&&"swf"!==n||(s.autoHeight=s.autoWidth=!1,s.scrolling="visible"),"image"===n&&(s.aspectRatio=!0),"iframe"===n&&d&&(s.scrolling="scroll"),s.wrap=i(s.tpl.wrap).addClass("fancybox-"+(d?"mobile":"desktop")+" fancybox-type-"+n+" fancybox-tmp "+s.wrapCSS).appendTo(s.parent||"body"),i.extend(s,{skin:i(".fancybox-skin",s.wrap),outer:i(".fancybox-outer",s.wrap),inner:i(".fancybox-inner",s.wrap)}),i.each(["Top","Right","Bottom","Left"],(function(e,t){s.skin.css("padding"+t,m(s.padding[e]))})),o.trigger("onReady"),"inline"===n||"html"===n){if(!s.content||!s.content.length)return o._error("content")}else if(!t)return o._error("href");"image"===n?o._loadImage():"ajax"===n?o._loadAjax():"iframe"===n?o._loadIframe():o._afterLoad()}},_error:function(e){i.extend(o.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:o.coming.tpl.error}),o._afterLoad()},_loadImage:function(){var e=o.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,o.coming.width=this.width/o.opts.pixelRatio,o.coming.height=this.height/o.opts.pixelRatio,o._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,o._error("image")},e.src=o.coming.href,!0!==e.complete&&o.showLoading()},_loadAjax:function(){var e=o.coming;o.showLoading(),o.ajaxLoad=i.ajax(i.extend({},e.ajax,{url:e.href,error:function(e,t){o.coming&&"abort"!==t?o._error("ajax",e):o.hideLoading()},success:function(t,i){"success"===i&&(e.content=t,o._afterLoad())}}))},_loadIframe:function(){var e=o.coming,t=i(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",d?"auto":e.iframe.scrolling).attr("src",e.href);i(e.wrap).bind("onReset",(function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}})),e.iframe.preload&&(o.showLoading(),t.one("load",(function(){i(this).data("ready",1),d||i(this).bind("load.fb",o.update),i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),o._afterLoad()}))),e.content=t.appendTo(e.inner),e.iframe.preload||o._afterLoad()},_preloadImages:function(){var e,t,i=o.group,n=o.current,s=i.length,r=n.preload?Math.min(n.preload,s-1):0;for(t=1;t<=r;t+=1)"image"===(e=i[(n.index+t)%s]).type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var e,t,n,s,r,a=o.coming,l=o.current;if(o.hideLoading(),a&&!1!==o.isActive)if(!1===o.trigger("afterLoad",a,l))a.wrap.stop(!0).trigger("onReset").remove(),o.coming=null;else{switch(l&&(o.trigger("beforeChange",l),l.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),o.unbindEvents(),e=a.content,t=a.type,n=a.scrolling,i.extend(o,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:l}),s=a.href,t){case"inline":case"ajax":case"html":a.selector?e=i("<div>").html(e).find(a.selector):h(e)&&(e.data("fancybox-placeholder")||e.data("fancybox-placeholder",i('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()),e=e.show().detach(),a.wrap.bind("onReset",(function(){i(this).find(e).length&&e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder",!1)})));break;case"image":e=a.tpl.image.replace("{href}",s);break;case"swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+s+'"></param>',r="",i.each(a.swf,(function(t,i){e+='<param name="'+t+'" value="'+i+'"></param>',r+=" "+t+'="'+i+'"'})),e+='<embed src="'+s+'" type="application/x-shockwave-flash" width="100%" height="100%"'+r+"></embed></object>"}(!h(e)||!e.parent().is(a.inner))&&a.inner.append(e),o.trigger("beforeShow"),a.inner.css("overflow","yes"===n?"scroll":"no"===n?"hidden":n),o._setDimension(),o.reposition(),o.isOpen=!1,o.coming=null,o.bindEvents(),o.isOpened?l.prevMethod&&o.transitions[l.prevMethod]():i(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove(),o.transitions[o.isOpened?a.nextMethod:a.openMethod](),o._preloadImages()}},_setDimension:function(){var e,t,n,s,r,a,l,c,d,h=o.getViewport(),u=0,g=!1,v=!1,y=(g=o.wrap,o.skin),b=o.inner,_=o.current,$=(v=_.width,_.height),k=_.minWidth,w=_.minHeight,C=_.maxWidth,x=_.maxHeight,S=_.scrolling,A=_.scrollOutside?_.scrollbarWidth:0,P=_.margin,T=f(P[1]+P[3]),E=f(P[0]+P[2]);if(g.add(y).add(b).width("auto").height("auto").removeClass("fancybox-tmp"),t=T+(P=f(y.outerWidth(!0)-y.width())),n=E+(e=f(y.outerHeight(!0)-y.height())),s=p(v)?(h.w-t)*f(v)/100:v,r=p($)?(h.h-n)*f($)/100:$,"iframe"===_.type){if(d=_.content,_.autoHeight&&1===d.data("ready"))try{d[0].contentWindow.document.location&&(b.width(s).height(9999),a=d.contents().find("body"),A&&a.css("overflow-x","hidden"),r=a.outerHeight(!0))}catch(e){}}else(_.autoWidth||_.autoHeight)&&(b.addClass("fancybox-tmp"),_.autoWidth||b.width(s),_.autoHeight||b.height(r),_.autoWidth&&(s=b.width()),_.autoHeight&&(r=b.height()),b.removeClass("fancybox-tmp"));if(v=f(s),$=f(r),c=s/r,k=f(p(k)?f(k,"w")-t:k),C=f(p(C)?f(C,"w")-t:C),w=f(p(w)?f(w,"h")-n:w),a=C,l=x=f(p(x)?f(x,"h")-n:x),_.fitToView&&(C=Math.min(h.w-t,C),x=Math.min(h.h-n,x)),t=h.w-T,E=h.h-E,_.aspectRatio?(v>C&&($=f((v=C)/c)),$>x&&(v=f(($=x)*c)),v<k&&($=f((v=k)/c)),$<w&&(v=f(($=w)*c))):(v=Math.max(k,Math.min(v,C)),_.autoHeight&&"iframe"!==_.type&&(b.width(v),$=b.height()),$=Math.max(w,Math.min($,x))),_.fitToView)if(b.width(v).height($),g.width(v+P),h=g.width(),T=g.height(),_.aspectRatio)for(;(h>t||T>E)&&v>k&&$>w&&!(19<u++);)$=Math.max(w,Math.min(x,$-10)),(v=f($*c))<k&&($=f((v=k)/c)),v>C&&($=f((v=C)/c)),b.width(v).height($),g.width(v+P),h=g.width(),T=g.height();else v=Math.max(k,Math.min(v,v-(h-t))),$=Math.max(w,Math.min($,$-(T-E)));A&&"auto"===S&&$<r&&v+P+A<t&&(v+=A),b.width(v).height($),g.width(v+P),h=g.width(),T=g.height(),g=(h>t||T>E)&&v>k&&$>w,v=_.aspectRatio?v<a&&$<l&&v<s&&$<r:(v<a||$<l)&&(v<s||$<r),i.extend(_,{dim:{width:m(h),height:m(T)},origWidth:s,origHeight:r,canShrink:g,canExpand:v,wPadding:P,hPadding:e,wrapSpace:T-y.outerHeight(!0),skinSpace:y.height()-$}),!d&&_.autoHeight&&$>w&&$<x&&!v&&b.height("auto")},_getPosition:function(e){var t=o.current,i=o.getViewport(),n=t.margin,s=o.wrap.width()+n[1]+n[3],r=o.wrap.height()+n[0]+n[2];n={position:"absolute",top:n[0],left:n[3]};return t.autoCenter&&t.fixed&&!e&&r<=i.h&&s<=i.w?n.position="fixed":t.locked||(n.top+=i.y,n.left+=i.x),n.top=m(Math.max(n.top,n.top+(i.h-r)*t.topRatio)),n.left=m(Math.max(n.left,n.left+(i.w-s)*t.leftRatio)),n},_afterZoomIn:function(){var e=o.current;e&&(o.isOpen=o.isOpened=!0,o.wrap.css("overflow","visible").addClass("fancybox-opened"),o.update(),(e.closeClick||e.nextClick&&1<o.group.length)&&o.inner.css("cursor","pointer").bind("click.fb",(function(t){!i(t.target).is("a")&&!i(t.target).parent().is("a")&&(t.preventDefault(),o[e.closeClick?"close":"next"]())})),e.closeBtn&&i(e.tpl.closeBtn).appendTo(o.skin).bind("click.fb",(function(e){e.preventDefault(),o.close()})),e.arrows&&1<o.group.length&&((e.loop||0<e.index)&&i(e.tpl.prev).appendTo(o.outer).bind("click.fb",o.prev),(e.loop||e.index<o.group.length-1)&&i(e.tpl.next).appendTo(o.outer).bind("click.fb",o.next)),o.trigger("afterShow"),e.loop||e.index!==e.group.length-1?o.opts.autoPlay&&!o.player.isActive&&(o.opts.autoPlay=!1,o.play()):o.play(!1))},_afterZoomOut:function(e){e=e||o.current,i(".fancybox-wrap").trigger("onReset").remove(),i.extend(o,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),o.trigger("afterClose",e)}}),o.transitions={getOrigPosition:function(){var e=o.current,t=e.element,i=e.orig,n={},s=50,r=50,a=e.hPadding,l=e.wPadding,c=o.getViewport();return!i&&e.isDom&&t.is(":visible")&&((i=t.find("img:first")).length||(i=t)),h(i)?(n=i.offset(),i.is("img")&&(s=i.outerWidth(),r=i.outerHeight())):(n.top=c.y+(c.h-r)*e.topRatio,n.left=c.x+(c.w-s)*e.leftRatio),("fixed"===o.wrap.css("position")||e.locked)&&(n.top-=c.y,n.left-=c.x),{top:m(n.top-a*e.topRatio),left:m(n.left-l*e.leftRatio),width:m(s+l),height:m(r+a)}},step:function(e,t){var i,n,s=t.prop,r=(n=o.current).wrapSpace,a=n.skinSpace;"width"!==s&&"height"!==s||(i=t.end===t.start?1:(e-t.start)/(t.end-t.start),o.isClosing&&(i=1-i),n=e-(n="width"===s?n.wPadding:n.hPadding),o.skin[s](f("width"===s?n:n-r*i)),o.inner[s](f("width"===s?n:n-r*i-a*i)))},zoomIn:function(){var e=o.current,t=e.pos,n=e.openEffect,s="elastic"===n,r=i.extend({opacity:1},t);delete r.position,s?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===n&&(t.opacity=.1),o.wrap.css(t).animate(r,{duration:"none"===n?0:e.openSpeed,easing:e.openEasing,step:s?this.step:null,complete:o._afterZoomIn})},zoomOut:function(){var e=o.current,t=e.closeEffect,i="elastic"===t,n={opacity:.1};i&&(n=this.getOrigPosition(),e.closeOpacity&&(n.opacity=.1)),o.wrap.animate(n,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:i?this.step:null,complete:o._afterZoomOut})},changeIn:function(){var e,t=o.current,i=t.nextEffect,n=t.pos,s={opacity:1},r=o.direction;n.opacity=.1,"elastic"===i&&(e="down"===r||"up"===r?"top":"left","down"===r||"right"===r?(n[e]=m(f(n[e])-200),s[e]="+=200px"):(n[e]=m(f(n[e])+200),s[e]="-=200px")),"none"===i?o._afterZoomIn():o.wrap.css(n).animate(s,{duration:t.nextSpeed,easing:t.nextEasing,complete:o._afterZoomIn})},changeOut:function(){var e=o.previous,t=e.prevEffect,n={opacity:.1},s=o.direction;"elastic"===t&&(n["down"===s||"up"===s?"top":"left"]=("up"===s||"left"===s?"-":"+")+"=200px"),e.wrap.animate(n,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}},o.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!d,fixed:!0},overlay:null,fixed:!1,el:i("html"),create:function(e){e=i.extend({},this.defaults,e),this.overlay&&this.close(),this.overlay=i('<div class="fancybox-overlay"></div>').appendTo(o.coming?o.coming.parent:e.parent),this.fixed=!1,e.fixed&&o.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(e){var t=this;e=i.extend({},this.defaults,e),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e),this.fixed||(r.bind("resize.overlay",i.proxy(this.update,this)),this.update()),e.closeClick&&this.overlay.bind("click.overlay",(function(e){if(i(e.target).hasClass("fancybox-overlay"))return o.isActive?o.close():t.close(),!1})),this.overlay.css(e.css).show()},close:function(){var e,t;r.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(i(".fancybox-margin").removeClass("fancybox-margin"),e=r.scrollTop(),t=r.scrollLeft(),this.el.removeClass("fancybox-lock"),r.scrollTop(e).scrollLeft(t)),i(".fancybox-overlay").remove().hide(),i.extend(this,{overlay:null,fixed:!1})},update:function(){var e,i="100%";this.overlay.width(i).height("100%"),l?(e=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),a.width()>e&&(i=a.width())):a.width()>r.width()&&(i=a.width()),this.overlay.width(i).height(a.height())},onReady:function(e,t){var n=this.overlay;i(".fancybox-overlay").stop(!0,!0),n||this.create(e),e.locked&&this.fixed&&t.fixed&&(n||(this.margin=a.height()>r.height()&&i("html").css("margin-right").replace("px","")),t.locked=this.overlay.append(t.wrap),t.fixed=!1),!0===e.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){var n,s;t.locked&&(!1!==this.margin&&(i("*").filter((function(){return"fixed"===i(this).css("position")&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap")})).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),n=r.scrollTop(),s=r.scrollLeft(),this.el.addClass("fancybox-lock"),r.scrollTop(n).scrollLeft(s)),this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!o.coming&&this.overlay.fadeOut(e.speedOut,i.proxy(this.close,this))}},o.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var t=o.current,n=t.title,s=e.type;if(i.isFunction(n)&&(n=n.call(t.element,t)),u(n)&&""!==i.trim(n)){switch(t=i('<div class="fancybox-title fancybox-title-'+s+'-wrap">'+n+"</div>"),s){case"inside":s=o.skin;break;case"outside":s=o.wrap;break;case"over":s=o.inner;break;default:s=o.skin,t.appendTo("body"),l&&t.width(t.width()),t.wrapInner('<span class="child"></span>'),o.current.margin[2]+=Math.abs(f(t.css("margin-bottom")))}t["top"===e.position?"prependTo":"appendTo"](s)}}},i.fn.fancybox=function(e){var t,n=i(this),s=this.selector||"",r=function(r){var a,l,c=i(this).blur(),d=t;!r.ctrlKey&&!r.altKey&&!r.shiftKey&&!r.metaKey&&!c.is(".fancybox-wrap")&&(a=e.groupAttr||"data-fancybox-group",(l=c.attr(a))||(a="rel",l=c.get(0)[a]),l&&""!==l&&"nofollow"!==l&&(d=(c=(c=s.length?i(s):n).filter("["+a+'="'+l+'"]')).index(this)),e.index=d,!1!==o.open(c,e)&&r.preventDefault())};return t=(e=e||{}).index||0,s&&!1!==e.live?a.undelegate(s,"click.fb-start").delegate(s+":not('.fancybox-item, .fancybox-nav')","click.fb-start",r):n.unbind("click.fb-start").bind("click.fb-start",r),this.filter("[data-fancybox-start=1]").trigger("click"),this},a.ready((function(){var t,r;if(i.scrollbarWidth===n&&(i.scrollbarWidth=function(){var e=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=(t=e.children()).innerWidth()-t.height(99).innerWidth();return e.remove(),t}),i.support.fixedPosition===n){t=i.support;var a=20===(r=i('<div style="position:fixed;top:20px;"></div>').appendTo("body"))[0].offsetTop||15===r[0].offsetTop;r.remove(),t.fixedPosition=a}i.extend(o.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")}),t=i(e).width(),s.addClass("fancybox-lock-test"),r=i(e).width(),s.removeClass("fancybox-lock-test"),i("<style type='text/css'>.fancybox-margin{margin-right:"+(r-t)+"px;}</style>").appendTo("head")}))}(window,document,jQuery),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Market.DOMUtils.Video=function(){function t(t){var i;this.video=t,this.getFile=e(this.getFile,this),this.handleSetupError=e(this.handleSetupError,this),this.setup=e(this.setup,this),i=$(".js-video-player"),this.dom={$el:i,$container:i.parent(),$legacyVideoButton:$(".video-preview"),$legacyButtons:$("#fullscreen"),$legacyButtonContainer:$(".js-legacy-preview-buttons"),$errors:$("js-video-error-container")},this.loggedEvents={}}return t.prototype.setup=function(){return this.video.isMainPreview?(this.setupFancyboxVideo(this.dom.$el.add(this.dom.$legacyVideoButton)),this.dom.$el.addClass("fake-video-player--is-ready")):this.setupFancyboxVideo(this.dom.$legacyVideoButton)},t.prototype.handleSetupError=function(e){var t;return $.fancybox.close(!0),t=-1!==e.message.indexOf("No suitable players found")?"Your browser is unable to play videos. You can <a href='"+this.video.file+"'>download the video</a> or <a href='https://get.adobe.com/flashplayer'>get Flash</a>.":"Uh-oh, something went wrong. You can <a href='"+this.video.file+"'>download the video</a> or reload the page.",this.dom.$errors.html("<div class='error'>"+t+"</div>")},t.prototype.getFile=function(){return window.location.href=this.video.file},t.prototype.fancyboxOptions=function(){var e,t;return e="<video id='inline-videojs-preview' class='video-js vjs-default-skin' preload='metadata'></video>",{width:this.video.width,height:this.video.height,autoSize:!1,padding:3,hideOnContentClick:!1,scrolling:"no",model:!1,content:e,openEffect:"none",closeEffect:"none",beforeShow:(t=this,function(){return t.setupInlineVideo({autostart:!0,image:null})}),beforeClose:function(e){return function(){return e.videoJs.dispose()}}(this),helpers:{overlay:{css:{background:"rgba(0, 0, 0, 0.5)"}}}}},t.prototype.setupFancyboxVideo=function(e){return e.fancybox(this.fancyboxOptions())},t.prototype.playVideoJs=function(){var e;return e=this.video,this.videoJs.ready((function(){return this.src(e.file),this.play()}))},t.prototype.setupVideoJs=function(){var e;return e=this,this.videoJs=videojs("inline-videojs-preview",{src:this.video.file,fluid:!0,controls:!0}).on("timeupdate",(function(){var t;if(t=100*this.currentTime()/this.duration(),!e.videoJSLooped){if(0===this.currentTime()&&e.logGAEventOnce("video_start",{label:e.video.file}),t>=25&&t<50)return e.logGAEventOnce("25_percent",{label:e.video.file});if(t>=50&&t<75)return e.logGAEventOnce("50_percent",{label:e.video.file});if(t>=75)return e.logGAEventOnce("75_percent",{label:e.video.file})}})).on("ended",(function(){return e.videoJSLooped=!0,e.loopVideo(this),e.logGAEventOnce("video_complete",{label:e.video.file})}))},t.prototype.loopVideo=function(e){return e.currentTime(0),e.play()},t.prototype.logGAEventOnce=function(e,t){if(this.loggedEvents[e]!==t.label)return Market.Helpers.GoogleAnalytics.sendEvent("event","video player - item page",e,t),this.loggedEvents[e]=t.label},t.prototype.setupInlineVideo=function(){this.setupVideoJs(),this.playVideoJs()},t}()}.call(this),Views.InlineVideoPreview=class{constructor(e){this.EXTERNAL_VIDEOJS_SCRIPTS=["//vjs.zencdn.net/5.0.2/video.min.js","//vjs.zencdn.net/5.0.2/video-js.min.css"];const t=e.data("props");this.loadVideoJs(t)}loadVideoJs(e){Market.Helpers.loadOnce(this.EXTERNAL_VIDEOJS_SCRIPTS).done((()=>new Market.DOMUtils.Video(e).setup()))}},function(){Market.Validations.itemAttributeFields=function(){return $.validator.addMethod("regex",(function(e,t){var i,n,s,r;return n=-1!==(r=(i=$(t)).attr("data-regex")).split("/").pop().indexOf("i"),s=new RegExp(r.replace(/^\/|\/$|\/i$|\/g$|\/m$|\/y$/g,""),n?"i":""),$.validator.messages.regex=i.attr("data-message"),""===e||s.test(e)})),$.validator.addClassRules("regex-validate",{regex:!0}),$("#attribute_fields").closest("form").validate({errorClass:"invalid",validClass:"valid",errorPlacement:function(e,t){return"user[accepted_terms]"===t.attr("name")?e.appendTo($(t).parent("label")):e.insertAfter(t)},invalidHandler:function(){return $(this).trigger("submit-cancelled")}})}}.call(this),Views.ItemAttributeFields=class{constructor(){Market.Validations.itemAttributeFields()}},Views.ScreenshotGallery=class{constructor(e){this.link=e,this.gallery=$(".js-.item-preview-image__gallery"),0!==this.gallery.length&&(this.title=this.gallery.data("title"),this.url=this.gallery.data("url"),$.magnificPopup.instance=null,this.link.on("click",this.handleClickGATracking.bind(this)),this.link.on("mouseenter",this.handleMouseEnter.bind(this)),this.link.on("mouseleave",this.handleMouseLeave.bind(this)),this.link.on("click",this.handleClick.bind(this)),this.link.data("spec-gallery-loaded",!0))}handleClick(e){this.loadModal(),$(window).width()>=501&&(this.gallery.magnificPopup("open"),e.preventDefault())}handleClickGATracking(e){const t="click;image",i="Marketing Image;Live Preview";$(document).trigger("googleAnalytics:itemPreviewImageClick",{action:t,label:i})}handleMouseEnter(e){this.itemPreviewImageHoverTimeout=setTimeout(this._triggerItemPreviewImageHover,1e3)}handleMouseLeave(e){clearTimeout(this.itemPreviewImageHoverTimeout)}_triggerItemPreviewImageHover(){$(document).trigger("googleAnalytics:itemPreviewImageHover")}loadModal(){this.gallery.magnificPopup({delegate:"a",type:"image",gallery:{enabled:!0},disableOn:()=>$(window).width()>=500,callbacks:{open:()=>{this._triggerGoogleAnalytics("open"),$.magnificPopup.instance.arrowLeft.on("click",(()=>this._triggerGoogleAnalytics("previous"))),$.magnificPopup.instance.arrowRight.on("click",(()=>this._triggerGoogleAnalytics("next")))},afterClose(){$.magnificPopup.instance=null}}})}_triggerGoogleAnalytics(e){let t,i;switch(e){case"open":t=this.url,i=this.title;break;case"previous":t=`${this.url}/prev`,i=`${this.title} - Previous`;break;case"next":t=`${this.url}/next`,i=`${this.title} - Next`}$(document).trigger("googleAnalytics:itemGalleryScreenshotLoaded",{page:t,title:i})}},Market.GoogleAnalytics.OrderConfirmation=class{static init(){return this._instance||(this._instance=new this)}constructor(){$(document).on("googleAnalytics:purchaseComplete",this.handleOnLoad.bind(this))}handleOnLoad(e,t){if(!Market.Helpers.GoogleAnalytics.isEventStale(t.timestamp)){const e=t.actionData.dimension7;delete t.actionData.dimension7,Market.Helpers.GoogleAnalytics.set("dimension7",`${e}`);const i=t.actionData.dimension15;return delete t.actionData.dimension15,Market.Helpers.GoogleAnalytics.set("dimension15",`${i}`),Market.Helpers.GoogleAnalytics.set("dimension17",`${t.timestamp}`),Market.Helpers.GoogleAnalytics.addProducts(t),Market.Helpers.GoogleAnalytics.setAction("purchase",t.actionData),Market.Helpers.GoogleAnalytics.sendEvent("event","Ecommerce","click",{label:"Checkout: purchase completed"})}}},Views.OrderConfirmation=class{constructor(e){this.$el=e,this.googleAnalyticsPayload=this.$el.data("googleAnalyticsPayload"),Market.GoogleAnalytics.OrderConfirmation.init(),this.handleOnLoad()}handleOnLoad(){return $(document).trigger("googleAnalytics:purchaseComplete",this.googleAnalyticsPayload)}},Views.PjaxSelector=class{
constructor(e){this.$el=e,this.radioButtonSelector="input[type='radio']",this.pjaxContainerSelector=this.$el.data("pjax-container-selector"),this.setupPjax()}setupPjax(){this.$el.on("click",this.radioButtonSelector,this.handleSelection.bind(this)),$(this.pjaxContainerSelector).on({"pjax:start":this.handleStart.bind(this),"pjax:success":this.handleSuccess.bind(this),"pjax:end":this.handleEnd.bind(this)})}handleSelection(e){const t=$(e.currentTarget).data("url");$.pjax({url:t,container:this.pjaxContainerSelector,fragment:this.pjaxContainerSelector,target:this.pjaxContainerSelector,scrollTo:!1})}handleSuccess(e,t,i,n,s){viewloader.execute(Views,$(this.pjaxContainerSelector))}handleStart(e){$(this.pjaxContainerSelector).addClass("is-disabled-loading")}handleEnd(e){$(this.pjaxContainerSelector).removeClass("is-disabled-loading")}},Market.GoogleAnalytics.ProductList=class{static init(){return this._instance||(this._instance=new this)}constructor(){$(document).on({"googleAnalytics:listItemAddToCart":this.handleListItemAddToCart.bind(this),"googleAnalytics:listImpression":this.handleListImpression.bind(this),"googleAnalytics:productClick":this.handleProductClick.bind(this)})}handleListItemAddToCart(e,t){$.extend(t.payload,{dimension9:"add to cart"}),this._addProduct(t.payload),this._setAction("add"),Market.Helpers.GoogleAnalytics.sendEvent("event","Ecommerce","click",{label:"Add to cart: product list"})}handleListImpression(e,t){this._addImpressions(t.payloadObjects),Market.Helpers.GoogleAnalytics.sendEvent("event","Ecommerce","view",{label:"Product impression",nonInteraction:!0})}handleProductClick(e,t){this._addProduct(t.payload),this._setAction("click",{list:t.payload.productsArray[0].list}),Market.Helpers.GoogleAnalytics.sendEvent("event","Ecommerce","click",{label:"Product click: product list"})}_addProduct(e){Market.Helpers.GoogleAnalytics.addProducts(e)}_addImpressions(e){Market.Helpers.GoogleAnalytics.addImpressions(e)}_setAction(e,t){Market.Helpers.GoogleAnalytics.setAction(e,t)}},Views.ProductList=class{constructor(e){if(this.$el=e,!this.$el.data().gaInitialized)try{this.dom=this._getDomReferences(),Market.GoogleAnalytics.ProductList.init(),this.bindEvents(),this.handleOnLoad()}catch(e){window.Rollbar&&window.Rollbar.error("Product List JS GA Tracking error",e)}}bindEvents(){this.dom.$productList.on("click",".js-google-analytics__list-event-trigger",this.handleOnThumbnailClick.bind(this)),this.dom.$addToCartButtons.on("click",this.handleOnAddToCart.bind(this))}handleOnAddToCart(e){try{const t=this._getPayload($(e.target));$(document).trigger("googleAnalytics:listItemAddToCart",{payload:t})}catch(e){window.Rollbar&&window.Rollbar.error("Product List JS GA Tracking error",e)}}handleOnThumbnailClick(e){const t=$(e.target);try{const e=t.data().googleAnalyticsPayload||this._getPayload(t);$(document).trigger("googleAnalytics:productClick",{payload:e})}catch(t){console.warn(`Could not fetch payload from '${e.target}'. Ecommerce event not sent.`)}}handleOnLoad(){const e=_.map(this.dom.$productPayloads,(e=>JSON.parse(e.getAttribute("data-google-analytics-payload"))));$(document).trigger("googleAnalytics:listImpression",{payloadObjects:e}),this.dom.$productList.data().gaInitialized=!0}_getDomReferences(){return{$productList:this.$el,$productPayloads:this.$el.find("[data-google-analytics-payload]"),$addToCartButtons:this.$el.find(".js-google-analytics__list-add-to-cart")}}_getPayload(e){const{itemId:t}=e.closest(".js-google-analytics__list-event-container").data();return this.dom.$productPayloads.filter(`[data-item-id='${t}']`).data().googleAnalyticsPayload}},Views.PurchaseForm=class{constructor(e){switch(this.redirectConditionMet=Market.Helpers.detectRedirect.check({mobile:!0}),this.userSignedIn=Market.DOMUtils.isUserSignedIn(),this.googleAnalyticsPayload=e.data("googleAnalyticsPayload"),this.googleAnalyticsPage=e.data("googleAnalyticsPage"),this.dom={$form:e,$addToCart:e.find(".js-purchase__add-to-cart"),$buyNow:e.find(".js-purchase__buy-now"),$breadcrumbCategory:$(".js-breadcrumb-category"),$itemComments:$(".js-item-comments"),$headerItemComments:$(".js-header-item-comments"),$viewPortfolioButton:$(".js-view-portfolio-button"),$ratingDetails:$(".js-rating-details"),$ratingDetailedExposer:$(".js-rating-exposer"),$showMore:$(".meta-attributes-toggle__link"),$itemDescriptionToggle:$(".item-description-toggle__link"),$byAuthor:$(".js-by-author"),$titleRating:$(".rating-detailed-small-total_rating_count--experiment"),$itemSidebarMetaAttributes:$(".js-item-sidebar-meta-attributes"),$itemDetailsTab:$(".js-item-navigation-item-details"),$reviewsTab:$(".js-item-navigation-reviews"),$commentsTab:$(".js-item-navigation-comments"),$supportTab:$(".js-item-navigation-support"),$metaAttributesToggle:$(".js-meta-attributes")},this.googleAnalyticsPage){case"productList":Market.GoogleAnalytics.ProductList.init();break;case"itemPage":Market.GoogleAnalytics.ItemPage.init()}this.dom.$form.on({"ajax:beforeSend":this.handleBeforeSend.bind(this),"ajax:success":this.handleSuccess.bind(this),"ajax:error":this.handleError.bind(this)}),this.dom.$addToCart.on("click",this.handleAddToCart.bind(this)),this.dom.$buyNow.on("click",this.handleBuyNow.bind(this)),this.dom.$breadcrumbCategory.on("click",this.handleBreadcrumbCategory.bind(this)),this.dom.$itemComments.on("click",this.handleItemComments.bind(this)),this.dom.$headerItemComments.on("click",this.handleHeaderItemComments.bind(this)),this.dom.$viewPortfolioButton.on("click",this.handleViewPortfolioButton.bind(this)),this.dom.$ratingDetails.on("click",this.handleRatingDetails.bind(this)),this.dom.$ratingDetailedExposer.on("click",this.handleRatingDetailedExposer.bind(this)),this.dom.$showMore.on("click",this.handleShowMore.bind(this)),this.dom.$itemDescriptionToggle.on("click",this.handleItemDescriptionToggle.bind(this)),this.dom.$byAuthor.on("click",this.handleByAuthor.bind(this)),this.dom.$titleRating.on("click",this.handleTitleRating.bind(this)),this.dom.$itemSidebarMetaAttributes.on("click",this.handleItemSidebarMetaAttributes.bind(this)),this.dom.$itemDetailsTab.on("click",this.handleItemDetailsTab.bind(this)),this.dom.$reviewsTab.on("click",this.handleReviewsTab.bind(this)),this.dom.$commentsTab.on("click",this.handleCommentsTab.bind(this)),this.dom.$supportTab.on("click",this.handleSupportTab.bind(this)),$(document).on("item:variantChange",this.handleItemVariantChange.bind(this)),$(document).on("modal:beforeCloseInstance",this._handleItemAddToCartModalClose.bind(this))}handleItemVariantChange(e,t){this._updateGoogleAnalyticsPayload(t)}handleItemDetailsTab(e,t){$(document).trigger("googleAnalytics:itemDetailsTab",{payload:this.googleAnalyticsPayload})}handleReviewsTab(e,t){$(document).trigger("googleAnalytics:reviewsTab",{payload:this.googleAnalyticsPayload})}handleCommentsTab(e,t){$(document).trigger("googleAnalytics:commentsTab",{payload:this.googleAnalyticsPayload})}handleSupportTab(e,t){$(document).trigger("googleAnalytics:supportTab",{payload:this.googleAnalyticsPayload})}handleAddToCart(e){return this.submit=!1,this.databaseReadOnly=!1,$.ajax({url:"/_healthcheck/database",async:!1,success:e=>{"read-only"===e.write.value&&(this.databaseReadOnly=!0)}}),this.databaseReadOnly?(alert("This functionality is disabled while maintenance is being performed. Try submitting again in a few minutes."),!1):($(document).trigger("googleAnalytics:itemAddToCart",{payload:this.googleAnalyticsPayload}),this.redirectConditionMet?this.submit=!0:this._submitWithAjax(this.dom.$addToCart),this.submit)}handleBuyNow(e){if(this.submit=!1,this.databaseReadOnly=!1,$.ajax({url:"/_healthcheck/database",async:!1,success:e=>{"read-only"===e.write.value&&(this.databaseReadOnly=!0)}}),this.databaseReadOnly)return alert("This functionality is disabled while maintenance is being performed. Try submitting again in a few minutes."),!1;$(document).trigger("googleAnalytics:itemBuyNow",{payload:this.googleAnalyticsPayload});const t=Market.Helpers.GoogleAnalytics.getLinker(),i=this.dom.$form.attr("action");return t&&this.dom.$form.attr("action",i+"?"+t),this.submit=!0,this.submit}handleBreadcrumbCategory(e,t){e.preventDefault();const i=$(e.target);$(document).trigger("googleAnalytics:breadcrumbCategoryClick",{categoryName:i.text()}),window.location.href=i.prop("href")}handleItemComments(e,t){$(document).trigger("googleAnalytics:itemCommentsClick",{payload:this.googleAnalyticsPayload})}handleHeaderItemComments(e,t){$(document).trigger("googleAnalytics:headerItemCommentsClick",{payload:this.googleAnalyticsPayload})}handleViewPortfolioButton(e,t){$(document).trigger("googleAnalytics:viewPortfolioButtonClick",{payload:this.googleAnalyticsPayload})}handleRatingDetails(e,t){$(document).trigger("googleAnalytics:ratingDetailsClick",{payload:this.googleAnalyticsPayload})}handleRatingDetailedExposer(e,t){$(document).trigger("googleAnalytics:ratingDetailedExposerClick",{payload:this.googleAnalyticsPayload})}handleShowMore(e,t){const i=this.dom.$metaAttributesToggle.hasClass("is-expanded")?"Fewer attributes":"More attributes";$(document).trigger("googleAnalytics:attributesShowMoreClick",{label:i})}handleItemDescriptionToggle(e,t){$(document).trigger("googleAnalytics:itemDescriptionToggleClick",{payload:this.googleAnalyticsPayload})}handleByAuthor(e,t){$(document).trigger("googleAnalytics:byAuthorClick",{payload:this.googleAnalyticsPayload})}handleTitleRating(e,t){$(document).trigger("googleAnalytics:titleRatingClick",{payload:this.googleAnalyticsPayload})}handleItemSidebarMetaAttributes(e,t){e.preventDefault(),$(document).trigger("googleAnalytics:itemSidebarMetaAttributeClick",{metaAttributeLabel:$(e.target).closest("tr").find("td:first").text()}),window.location.href=$(e.target).prop("href")}handleBeforeSend(){Market.DOMUtils.getModalInstance().init()}handleError(){Market.DOMUtils.getModalInstance().error()}handleSuccess(e,t){null!=t.cart_count&&$(document).trigger("uiCartUpdateRequest",t);const i=null!=t.html?t.html:t;Market.DOMUtils.getModalInstance().show(i,!1)}_submitWithAjax(e){this.dom.$form.data("ujs:submit-button",{name:e.attr("name"),value:e.val()}),$.rails.handleRemote(this.dom.$form)}_updateGoogleAnalyticsPayload(e){const t=numeral().unformat(e.price),i=numeral(t).format("0.00"),n={variant:e.license,price:i};"source"!==e.size&&(n.dimension3=e.size),e.support&&(n.dimension14=e.support),$.extend(this.googleAnalyticsPayload.productsArray[0],n)}_handleItemAddToCartModalClose(){$(document).trigger("googleAnalytics:itemAddToCartModalClose",{category:"Modal: Item added to cart"})}},Views.SelectToggleText=class{constructor(e){this.dom={$toggleInitiator:e.find(".js-select-toggle__initiator"),$toggleElement:e.find(".js-select-toggle__element")},this.useDictionary=!!e.data("dictionary"),this.useDictionary&&(this.dictionary=e.data("dictionary"));const t=(e.data("radioToggle")?this.handleRadioInitiatorChange:this.handleInitiatorChange).bind(this);this.dom.$toggleInitiator.on("change.handleInitiatorChange",t),t()}handleRadioInitiatorChange(){const e=$(".js-select-toggle__initiator:checked").data("toggleAction");e?this.dom.$toggleElement.show().html(e):this.dom.$toggleElement.hide()}handleInitiatorChange(){const e=$("option:selected",this.dom.$toggleInitiator).data("toggleAction"),t=this.useDictionary?this.dictionary[e]:e;this.dom.$toggleElement.html(t)}},Views.TieredSelect=class{constructor(e){this.$el=e,this.dom={$inputEl:this.$el,$form:this.$el.closest("form")},this.$selectEl=$("<select>").attr({name:this.$el.attr("name")}),this.selectAttributes=this.$el.data("tieredSelectAttributes"),this.selectAttributes&&this.$selectEl.attr(this.selectAttributes),this.options=this.$el.data("tieredSelectOptions"),this.$parentEl=$(this.$el.data("tieredSelectParent"),this.$el.closest("form")).on("change.tieredSelect",(()=>this.updateOptions())),this.updateOptions()}updateOptions(){const e=this.$el.val(),t=this.$parentEl.val();t in this.options?(this.$el!==this.$selectEl&&(this.$el.replaceWith(this.$selectEl),this.$el=this.$selectEl),this.$selectEl.html(this.options[t]).val(e),this.dom.$form.trigger("tieredSelectChange",!0)):this.$el!==this.dom.$inputEl&&(this.$el.replaceWith(this.dom.$inputEl),this.$el=this.dom.$inputEl,this.$el.val(e),this.dom.$form.trigger("tieredSelectChange",!1))}},Views.TsunamiPlayer=class{constructor(e){if(this.delayedAutoPlay=this.delayedAutoPlay.bind(this),this.keyboardEvent=this.keyboardEvent.bind(this),this.audioProgress=this.audioProgress.bind(this),this.checkIfOnScreenYet=this.checkIfOnScreenYet.bind(this),this.$el=e,this.cannotPlayMP3())return void this.displayError("Your browser does not support our audio player. Please try again with a browser that supports HTML5 Audio.");this.fileUrl=this.$el.data("file"),this.waveformUrl=this.$el.data("waveform"),this.autoPlay=null!=this.$el.data("autoplay"),this.preload=null!=this.$el.data("preload"),this.loop=null!=this.$el.data("loop")&&!this.userPreferenceLoopDisabled();const t=/^http/i;this.fileUrl.match(t)&&($.support.cors?(this.containerWidth=this.$el.width(),this.containerHeight=this.$el.height(),this.isDragging=!1,this.firstPlayed=!1,this.toggleButtonTimeout=null,this.scrollCheckTimeout=null,this.fileLoaded=!1,this.expectedSeekOffset=null,this.createPlayerElements(),this.connectToExistingElements(),this.setLoopButton(),this.loadVolumePreference(),this.$el.attr("unselectable","on").on("selectstart",!1),this.$el.on({mousedown:this.startDragging.bind(this),mouseup:this.stopDragging.bind(this),mouseleave:this.cancelDragging.bind(this),mousemove:this.dragWaveform.bind(this)}),this.dom.$playTimeLabel.add(this.dom.$loadingIcon).on("mousemove",(e=>e.preventDefault())),this.dom.$loadingIcon.css("pointer-events","none"),this.dom.$audioPlayer.on({canplay:this.audioFileLoaded.bind(this),play:this.audioPlaying.bind(this),pause:this.audioPaused.bind(this),progress:this.audioLoading.bind(this),error:this.handleError.bind(this)}),$(window).resize(_.debounce((()=>{const e=this.$el.width();this.containerWidth!==e&&(this.containerWidth=e,this.$el.find("canvas").css("width",this.containerWidth))}),100)),window.requestAnimationFrame||this.dom.$audioPlayer.on("timeupdate",this.audioProgress),this.dom.$toggleButton.on("click",this.togglePlay.bind(this)),this.dom.$loopButton.on("click",this.toggleLoop.bind(this)),this.dom.$volumeSlider.on("change input",this.adjustVolume.bind(this)),$(document).on("TsunamiPlayer:startPlay",this.stopPlayingForOthers.bind(this)),this.isOnScreen()?this.fetchWaveform():this.fetchWaveformLater()):this.noCorsSupport())}createPlayerElements(){const e={src:this.fileUrl,preload:this.preload?"auto":"none"};this.loop&&(e.loop="loop"),this.dom={$backgroundCanvas:$("<canvas>",{class:"tsunami-player__background-canvas",width:this.containerWidth,height:this.containerHeight}),$loadedContainer:$("<div>",{class:"tsunami-player__loaded-container"}),$loadedCanvas:$("<canvas>",{class:"tsunami-player__loaded-canvas",width:this.containerWidth,height:this.containerHeight}),$progressContainer:$("<div>",{class:"tsunami-player__progress-container"}),$progressCanvas:$("<canvas>",{class:"tsunami-player__progress-canvas",width:this.containerWidth,height:this.containerHeight}),$audioPlayer:$("<audio>",e),$playTimeLabelContainer:$("<div>",{class:"tsunami-player__time-label-container"}),$playTimeLabel:$("<div>",{class:"tsunami-player__time-label"}).html("0:00")},this.dom.$backgroundCanvas.appendTo(this.$el),this.dom.$loadedContainer.appendTo(this.$el),this.dom.$loadedCanvas.appendTo(this.dom.$loadedContainer),this.dom.$progressContainer.appendTo(this.$el),this.dom.$progressCanvas.appendTo(this.dom.$progressContainer),this.dom.$audioPlayer.appendTo(this.$el),this.dom.$playTimeLabelContainer.appendTo(this.$el),this.dom.$playTimeLabel.appendTo(this.dom.$playTimeLabelContainer),this.audioPlayer=this.dom.$audioPlayer[0]}connectToExistingElements(){this.dom.$toggleButton=$("#"+this.$el.data("toggleButton")),this.dom.$toggleButtonIcon=this.dom.$toggleButton.find(".js-tsunami-player__toggle-icon"),this.dom.$loadingIcon=this.$el.find(".js-tsunami-player-loading-icon"),this.dom.$loopButton=$("#"+this.$el.data("loopButton")),this.dom.$resultContainer=$("#"+this.$el.data("resultContainer")),this.dom.$volumeSlider=$("#"+this.$el.data("volumeSlider")),this.dom.$mutedIcon=$("#"+this.$el.data("volumeSliderMute")),this.dom.$notMutedIcon=$("#"+this.$el.data("volumeSliderNotMute"))}userPreferenceLoopDisabled(){return Modernizr.localstorage&&"false"===localStorage.getItem("tsunami-loop-preference")}audioFileLoaded(){this.fileLoaded=!0;const e=this.doAutoPlay();e&&e.then((()=>{this.expectedSeekOffset&&(this.audioPlayer.currentTime=this.audioPlayer.duration*this.expectedSeekOffset/this.containerWidth,this.expectedSeekOffset=null),this.audioLoading()}))}doAutoPlay(){if(this.autoPlay&&this.audioPlayer.paused){if(!document.hidden)return this.play();$(window).focus(this.delayedAutoPlay)}}delayedAutoPlay(){$(window).off("focus",this.delayedAutoPlay),this.play()}audioLoading(){if(this.audioPlayer.buffered.length>0&&this.audioPlayer.duration){const e=Math.min(this.audioPlayer.buffered.end(this.audioPlayer.buffered.length-1)/this.audioPlayer.duration*100,100);this.dom.$loadedContainer.animate({width:e+"%"},500)}}audioPlaying(){window.requestAnimationFrame&&window.requestAnimationFrame(this.audioProgress),this.firstPlayed||(this.firstPlayed=!0,this.dom.$progressContainer.add(this.dom.$playTimeLabel).animate({opacity:1},1e3))}audioPaused(){this.updateToggleButton("play")}stopPlayingForOthers(e,t){t.element!==this.$el[0]&&(this.pause(),$(window).off("keydown",this.keyboardEvent),this.setContainerStatus(""))}startDragging(e){this.fileLoaded&&(this.pause(),this.isDragging=!0,this.dragWaveform(e))}cancelDragging(){this.isDragging&&this.fileLoaded&&(this.redrawProgress(this.audioPlayer.currentTime/this.audioPlayer.duration,this.audioPlayer.currentTime),this.isDragging=!1)}stopDragging(e){this.fileLoaded?(this.isDragging=!1,this.audioPlayer.currentTime=this.audioPlayer.duration*this.getOffsetX(e)/this.containerWidth,this.updateToggleButton("loading"),this.audioPlayer.paused&&this.play()):(this.expectedSeekOffset=this.getOffsetX(e),this.play())}dragWaveform(e){if(this.isDragging&&this.fileLoaded){const t=this.getOffsetX(e)/this.containerWidth,i=this.audioPlayer.duration*t;this.redrawProgress(t,i)}}keyboardEvent(e){if(document.activeElement===document.getElementsByTagName("body")[0]||document.activeElement===this.dom.$toggleButton[0])switch(e.which){case 32:e.preventDefault(),this.togglePlay();break;case 37:this.audioPlayer.currentTime=Math.max(this.audioPlayer.currentTime-this.audioPlayer.duration/10,0),this.audioPlayer.paused&&this.play();break;case 39:{const e=this.audioPlayer.currentTime+this.audioPlayer.duration/10;this.audioPlayer.currentTime=e<=this.audioPlayer.duration?e:0,this.audioPlayer.paused&&this.play();break}}}isOnScreen(){const e=$(window).scrollTop(),t=e+$(window).height();return null==this.elementTop&&(this.elementTop=this.$el.offset().top),null==this.elementBottom&&(this.elementBottom=this.elementTop+this.$el.outerHeight()),this.elementTop<=t&&this.elementBottom>=e}getOffsetX(e){return null!=e.offsetX?e.offsetX:e.originalEvent.layerX}play(){const e=this.audioPlayer.play();return e&&e.then((()=>{$(document).trigger("TsunamiPlayer:startPlay",{element:this.$el[0]}),$(window).off("keydown",this.keyboardEvent),$(window).keydown(this.keyboardEvent),this.setContainerStatus("active")})).catch((e=>{if("NotAllowedError"!==e.name)throw e}))}pause(){this.audioPlayer.pause()}adjustVolume(e){e&&e.preventDefault();const t=this.dom.$volumeSlider.prop("value");this.setVolume(t),Modernizr.localstorage&&localStorage.setItem("tsunami-volume-preference",t)}setVolume(e){this.audioPlayer.volume=e,this.updateVolumeIcon(e)}updateVolumeIcon(e){"0"===e?(this.dom.$mutedIcon.removeClass("is-hidden"),this.dom.$notMutedIcon.addClass("is-hidden")):(this.dom.$mutedIcon.addClass("is-hidden"),this.dom.$notMutedIcon.removeClass("is-hidden"))}loadVolumePreference(){if(Modernizr.localstorage&&this.dom.$volumeSlider.length){const e=localStorage.getItem("tsunami-volume-preference");null!=e&&(this.dom.$volumeSlider.prop("value",e),this.setVolume(e))}}togglePlay(e){e&&e.preventDefault(),this.audioPlayer.paused?this.play():this.pause()}toggleLoop(e){e&&e.preventDefault(),this.loop=!this.loop,this.loop?this.dom.$audioPlayer.attr("loop","loop"):this.dom.$audioPlayer.removeAttr("loop"),Modernizr.localstorage&&localStorage.setItem("tsunami-loop-preference",this.loop),this.setLoopButton()}setLoopButton(){this.loop?this.dom.$loopButton.addClass("-color-primary"):this.dom.$loopButton.removeClass("-color-primary")}updateToggleButton(e){e!==this.desiredToggleButtonStatus&&(this.desiredToggleButtonStatus=e,clearTimeout(this.toggleButtonTimeout),e!==this.currentToggleButtonStatus&&(this.toggleButtonTimeout=setTimeout(this.updateToggleButtonCallback.bind(this),100)))}updateToggleButtonCallback(){this.currentToggleButtonStatus=this.desiredToggleButtonStatus,this.dom.$toggleButtonIcon.attr("data-status",this.currentToggleButtonStatus).find("span").text(this.currentToggleButtonStatus),this.dom.$playTimeLabel.attr("data-status",this.currentToggleButtonStatus)}setContainerStatus(e){this.dom.$resultContainer&&this.dom.$resultContainer.attr("data-status",e)}audioProgress(){this.audioPlayer.paused||(this.redrawProgress(this.audioPlayer.currentTime/this.audioPlayer.duration,this.audioPlayer.currentTime),this.audioPlayer.seeking||this.audioPlayer.readyState<3?this.updateToggleButton("loading"):this.updateToggleButton("pause"),window.requestAnimationFrame&&window.requestAnimationFrame(this.audioProgress))}redrawProgress(e,t){const i=100*e;this.dom.$progressContainer.add(this.dom.$playTimeLabelContainer).css("width",i+"%"),this.dom.$playTimeLabel.text(this.prettyTime(t))}prettyTime(e){e=Math.floor(e);const t=Math.floor(e/60);return(e-=60*t)<10&&(e=`0${e}`),`${t}:${e}`}fetchWaveform(){this.waveformUrl&&$.ajax({url:this.waveformUrl,success:this.waveformReceived.bind(this)})}fetchWaveformLater(){$(window).scroll(this.checkIfOnScreenYet)}checkIfOnScreenYet(){this.scrollCheckTimeout||(this.scrollCheckTimeout=setTimeout(this.checkIfOnScreenYetCallback.bind(this),500))}checkIfOnScreenYetCallback(){this.scrollCheckTimeout&&(clearTimeout(this.scrollCheckTimeout),this.scrollCheckTimeout=null,this.isOnScreen()&&($(window).off("scroll",this.checkIfOnScreenYet),this.fetchWaveform()))}waveformReceived(e){const t=this.generateForm(e);this.drawWaveform(this.dom.$backgroundCanvas,t,"#aaa"),this.drawWaveform(this.dom.$progressCanvas,t,"#7aa93c"),this.drawWaveform(this.dom.$loadedCanvas,t,"#7e7e7e"),this.dom.$loadingIcon.remove()}generateForm(e){const t={max:1,samples:[]};for(let i=0;i<e.length;i++){const n=e.data[2*i+1]-e.data[2*i];t.samples.push(n),t.max=Math.max(t.max,n)}return t}drawWaveform(e,t,i){const n=e[0],s=n.getContext("2d"),r=t.samples.length;n.width=r,n.height=this.containerHeight,s.clearRect(0,0,r,this.containerHeight);const a=this.containerHeight/2,o=a/t.max;s.lineWidth=.1,s.beginPath(),s.moveTo(0,a),s.lineTo(r,a),s.stroke(),s.fillStyle=i,s.beginPath(),s.moveTo(0,a);for(let e=0;e<t.samples.length;e++)s.lineTo(e,a-t.samples[e]*o);s.lineTo(r,a),s.closePath(),s.fill(),s.beginPath(),s.moveTo(0,a);for(let e=0;e<t.samples.length;e++)s.lineTo(e,a+t.samples[e]*o);s.lineTo(r,a),s.closePath(),s.fill(),e.css("width",this.containerWidth).animate({opacity:1},1e3)}cannotPlayMP3(){const e=document.createElement("audio");return!(e.canPlayType&&e.canPlayType("audio/mpeg;").replace(/no/,""))}noCorsSupport(){const e={src:this.fileUrl,controls:!0};this.removeExternalElements(),$audioPlayer.html($("<audio>",e))}handleError(e){this.displayError()}displayError(e){e=e||"The audio player could not be loaded. Please try again later.",this.removeExternalElements(),this.dom.$loadingIcon.remove(),this.$el.prepend($('<span class="t-body -size-s"></span>').html(e))}removeExternalElements(){$("#"+this.$el.data("toggleButton")).remove(),$("#"+this.$el.data("loopButton")).remove()}},Views.GoToCheckout=class{constructor(e){this.dom={$form:e},this.dom.$form.on("submit",this.handleGoToCheckout.bind(this))}handleGoToCheckout(e){$(document).trigger("googleAnalytics:itemAddToCartModalGoToCheckout"),this.submit=!1;const t=Market.Helpers.GoogleAnalytics.getLinker(),i=this.dom.$form.attr("action");return t&&this.dom.$form.attr("action",i+"?"+t),this.submit=!0,this.submit}},Views.KeepBrowsing=class{constructor(e){e.on("click",this.handleElementClick.bind(this))}handleElementClick(e){$(document).trigger("googleAnalytics:itemAddToCartModalKeepBrowsing")}},Views.HeaderMini=class{constructor(e){this.dom={$cart:e.find(".js-header-mini-cart")},this.dom.$cart.on("click",this._handleCartClick.bind(this))}_handleCartClick(){Market.Helpers.CookieConsent.given("marketing")&&Market.Helpers.GoogleAnalytics.sendEvent("event","page-header-top","click;link",{label:"cart"})}};